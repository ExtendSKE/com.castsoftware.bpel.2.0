<?xml version="1.0" encoding="UTF-8"?><bpws:process xmlns:bpws="http://schemas.xmlsoap.org/ws/2004/03/business-process/" xmlns:java="http://SdpCommonLibrary" xmlns:ns="http://MamMemberServicesProcessModule/com/att/sdp/bprocess/UpdateMailBoxArtifacts" xmlns:ns0="http://www.ibm.com/websphere/crossworlds/2002/BOSchema/SDP_Order" xmlns:ns1="http://www.ibm.com/websphere/crossworlds/2002/BOSchema/SDP_TransactionDetail" xmlns:ns10="http://www.ibm.com/websphere/crossworlds/2002/BOSchema/SDP_ServiceCvoipSettings" xmlns:ns11="http://MamMemberServicesProcessModule/com/att/sdp/intf/UpdateMailBox_Compensation_Interface" xmlns:ns12="http://SdpCommonLibrary/com/att/sdp/intf/FromSdp_CommonErrorLogger_Interface" xmlns:ns13="http://www.ibm.com/websphere/crossworlds/2002/BOSchema/SDP_Temp" xmlns:ns14="http://www.ibm.com/websphere/crossworlds/2002/BOSchema/SDP_LineSubComponent" xmlns:ns15="http://SdpCommonLibrary/com/att/sdp/intf/UcdclOutputServiceWrapper_Interface" xmlns:ns16="http://SdpCommonLibrary/com/att/sdp/intf/MPSCompensableService2_Interface" xmlns:ns17="http://MamMemberServicesProcessModule/com/att/sdp/bprocess/UpdateMailBoxCompensation" xmlns:ns18="http://SdpCommonLibrary/com/att/sdp/intf/UCDCLCompensableService_Interface" xmlns:ns2="http://MamMemberServicesProcessModule/com/att/sdp/intf/FromMam_UpdateMailBox_Interface" xmlns:ns3="http://SdpCommonLibrary/com/att/sdp/intf/To_WESM" xmlns:ns4="http://SdpCommonLibrary/com/att/sdp/intf/ToUCDCL_ProvisioningService_Interface" xmlns:ns5="http://www.ibm.com/websphere/crossworlds/2002/BOSchema/SDP_ErrorObject_Message" xmlns:ns6="http://www.ibm.com/websphere/crossworlds/2002/BOSchema/SDP_Error" xmlns:ns7="http://SdpCommonLibrary/com/att/sdp/intf/FromSdp_ErrorLogger_Interface" xmlns:ns8="http://www.ibm.com/websphere/crossworlds/2002/BOSchema/SDP_AccountMailBoxes" xmlns:ns9="http://www.ibm.com/websphere/crossworlds/2002/BOSchema/SDP_MemberTNS" xmlns:wpc="http://www.ibm.com/xmlns/prod/websphere/business-process/6.0.0/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" expressionLanguage="http://www.ibm.com/xmlns/prod/websphere/business-process/expression-lang/java/6.0.0/" name="UpdateMailBox_Compensation" suppressJoinFailure="yes" targetNamespace="http://MamMemberServicesProcessModule/com/att/sdp/bprocess" wpc:displayName="UpdateMailBox_Compensation" wpc:executionMode="microflow" wpc:id="1" wpc:version="IBM_8.5.0">
  <wpc:javaGlobals>
    <wpc:import packages="sbc.lightspeed.sdp.wps.SdpErrorHelper"/>
    <wpc:import packages="sbc.lightspeed.sdp.wps.SdpHelper"/>
    <wpc:import packages="sbc.lightspeed.sdp.wps.SdpLoggerHelper"/>
    <wpc:import packages="commonj.sdo.DataObject"/>
    <wpc:import packages="java.util.List"/>
  </wpc:javaGlobals>
  <bpws:import importType="http://schemas.xmlsoap.org/wsdl/" location="../../../../../intf/FromMam_UpdateMailBox_Interface.wsdl" namespace="http://MamMemberServicesProcessModule/com/att/sdp/intf/FromMam_UpdateMailBox_Interface"/>
  <bpws:import importType="http://schemas.xmlsoap.org/wsdl/" location="UpdateMailBox_CompensationArtifacts.wsdl" namespace="http://MamMemberServicesProcessModule/com/att/sdp/bprocess/UpdateMailBoxCompensation"/>
  <bpws:import importType="http://www.w3.org/2001/XMLSchema" location="platform:/resource/MamMemberServicesProcessModule/xsd-includes/http.www.ibm.com.websphere.crossworlds.2002.BOSchema.SDP_Order.xsd" namespace="http://www.ibm.com/websphere/crossworlds/2002/BOSchema/SDP_Order"/>
  <bpws:import importType="http://www.w3.org/2001/XMLSchema" location="platform:/resource/MamMemberServicesProcessModule/xsd-includes/http.www.ibm.com.websphere.crossworlds.2002.BOSchema.SDP_TransactionDetail.xsd" namespace="http://www.ibm.com/websphere/crossworlds/2002/BOSchema/SDP_TransactionDetail"/>
  <bpws:import importType="http://schemas.xmlsoap.org/wsdl/" location="../../../../../../../../../SdpCommonLibrary/com/att/sdp/intf/To_WESM.wsdl" namespace="http://SdpCommonLibrary/com/att/sdp/intf/To_WESM"/>
  <bpws:import importType="http://schemas.xmlsoap.org/wsdl/" location="../../../../../../../../../SdpCommonLibrary/com/att/sdp/intf/SDP_Order_to_UCDCL_ProvisioningService.wsdl" namespace="http://SdpCommonLibrary/com/att/sdp/intf/ToUCDCL_ProvisioningService_Interface"/>
  <bpws:import importType="http://www.w3.org/2001/XMLSchema" location="platform:/resource/MamMemberServicesProcessModule/xsd-includes/http.www.ibm.com.websphere.crossworlds.2002.BOSchema.SDP_ErrorObject_Message.xsd" namespace="http://www.ibm.com/websphere/crossworlds/2002/BOSchema/SDP_ErrorObject_Message"/>
  <bpws:import importType="http://www.w3.org/2001/XMLSchema" location="platform:/resource/MamMemberServicesProcessModule/xsd-includes/http.www.ibm.com.xmlns.prod.websphere.business-process.6.0.0.xsd" namespace="http://www.ibm.com/xmlns/prod/websphere/business-process/6.0.0/"/>
  <bpws:import importType="http://www.w3.org/2001/XMLSchema" location="platform:/resource/MamMemberServicesProcessModule/xsd-includes/http.www.ibm.com.websphere.crossworlds.2002.BOSchema.SDP_Error.xsd" namespace="http://www.ibm.com/websphere/crossworlds/2002/BOSchema/SDP_Error"/>
  <bpws:import importType="http://schemas.xmlsoap.org/wsdl/" location="../../../../../../../../../SdpCommonLibrary/com/att/sdp/intf/FromSdp_ErrorLogger_Interface.wsdl" namespace="http://SdpCommonLibrary/com/att/sdp/intf/FromSdp_ErrorLogger_Interface"/>
  <bpws:import importType="http://www.w3.org/2001/XMLSchema" location="platform:/resource/MamMemberServicesProcessModule/xsd-includes/http.www.ibm.com.websphere.crossworlds.2002.BOSchema.SDP_MemberTNS.xsd" namespace="http://www.ibm.com/websphere/crossworlds/2002/BOSchema/SDP_MemberTNS"/>
  <bpws:import importType="http://www.w3.org/2001/XMLSchema" location="platform:/resource/MamMemberServicesProcessModule/xsd-includes/http.www.ibm.com.websphere.crossworlds.2002.BOSchema.SDP_AccountMailBoxes.xsd" namespace="http://www.ibm.com/websphere/crossworlds/2002/BOSchema/SDP_AccountMailBoxes"/>
  <bpws:import importType="http://www.w3.org/2001/XMLSchema" location="platform:/resource/MamMemberServicesProcessModule/xsd-includes/http.www.ibm.com.websphere.crossworlds.2002.BOSchema.SDP_ServiceCvoipSettings.xsd" namespace="http://www.ibm.com/websphere/crossworlds/2002/BOSchema/SDP_ServiceCvoipSettings"/>
  <bpws:import importType="http://schemas.xmlsoap.org/wsdl/" location="UpdateMailBox_CompensationArtifacts.wsdl" namespace="http://MamMemberServicesProcessModule/com/att/sdp/bprocess/UpdateMailBoxArtifacts"/>
  <bpws:import importType="http://schemas.xmlsoap.org/wsdl/" location="../../../../../MamMemberServicesProcessModule_Old/com/att/sdp/intf/FromMam_UpdateMailBox_Interface.wsdl" namespace="http://MamMemberServicesProcessModule/com/att/sdp/intf/FromMam_UpdateMailBox_Interface"/>
  <bpws:import importType="http://schemas.xmlsoap.org/wsdl/" location="../../../../../SdpCommonLibrary/com/att/sdp/intf/FromSdp_ErrorLogger_Interface.wsdl" namespace="http://SdpCommonLibrary/com/att/sdp/intf/FromSdp_ErrorLogger_Interface"/>
  <bpws:import importType="http://schemas.xmlsoap.org/wsdl/" location="../../../../../SdpCommonLibrary/com/att/sdp/intf/SDP_Order_to_UCDCL_ProvisioningService.wsdl" namespace="http://SdpCommonLibrary/com/att/sdp/intf/ToUCDCL_ProvisioningService_Interface"/>
  <bpws:import importType="http://schemas.xmlsoap.org/wsdl/" location="../../../../../SdpCommonLibrary/com/att/sdp/intf/To_WESM.wsdl" namespace="http://SdpCommonLibrary/com/att/sdp/intf/To_WESM"/>
  <bpws:import importType="http://schemas.xmlsoap.org/wsdl/" location="../../../../../MamMemberServicesProcessModule_Old/com/att/sdp/bprocess/NewUpdateMailBoxArtifacts.wsdl" namespace="http://MamMemberServicesProcessModule/com/att/sdp/bprocess/UpdateMailBoxArtifacts"/>
  <bpws:import importType="http://schemas.xmlsoap.org/wsdl/" location="../../../../../MamMemberServicesProcessModule_Old/com/att/sdp/intf/UpdateMailBox_Compensation_Interface.wsdl" namespace="http://MamMemberServicesProcessModule/com/att/sdp/intf/UpdateMailBox_Compensation_Interface"/>
  <bpws:import importType="http://schemas.xmlsoap.org/wsdl/" location="../../../../../SdpCommonLibrary/FromSdp_CommonErrorLogger_Interface.wsdl" namespace="http://SdpCommonLibrary/com/att/sdp/intf/FromSdp_CommonErrorLogger_Interface"/>
  <bpws:import importType="http://schemas.xmlsoap.org/wsdl/" location="UpdateMailBoxArtifacts.wsdl" namespace="http://MamMemberServicesProcessModule/com/att/sdp/bprocess/UpdateMailBoxArtifacts"/>
  <bpws:import importType="http://schemas.xmlsoap.org/wsdl/" location="../../../../../MamMemberServicesProcessModule_Old/com/att/sdp/intf/UpdateMailBox_Compensation_Interface.wsdl" namespace="http://MamMemberServicesProcessModule/com/att/sdp/intf/UpdateMailBox_Compensation_Interface"/>
  <bpws:import importType="http://www.w3.org/2001/XMLSchema" location="../../../../../SdpCommonLibrary/BPCStandardFaultType.xsd" namespace="http://www.ibm.com/xmlns/prod/websphere/business-process/6.0.0/"/>
  <bpws:import importType="http://www.w3.org/2001/XMLSchema" location="../../../../../SdpCommonLibrary/SDP_MemberTNS.xsd" namespace="http://www.ibm.com/websphere/crossworlds/2002/BOSchema/SDP_MemberTNS"/>
  <bpws:import importType="http://www.w3.org/2001/XMLSchema" location="../../../../../SdpCommonLibrary/SDP_Error.xsd" namespace="http://www.ibm.com/websphere/crossworlds/2002/BOSchema/SDP_Error"/>
  <bpws:import importType="http://www.w3.org/2001/XMLSchema" location="../../../../../SdpCommonLibrary/SDP_AccountMailBoxes.xsd" namespace="http://www.ibm.com/websphere/crossworlds/2002/BOSchema/SDP_AccountMailBoxes"/>
  <bpws:import importType="http://www.w3.org/2001/XMLSchema" location="../../../../../SdpCommonLibrary/SDP_ErrorObject_Message.xsd" namespace="http://www.ibm.com/websphere/crossworlds/2002/BOSchema/SDP_ErrorObject_Message"/>
  <bpws:import importType="http://www.w3.org/2001/XMLSchema" location="../../../../../SdpCommonLibrary/SDP_ServiceCvoipSettings.xsd" namespace="http://www.ibm.com/websphere/crossworlds/2002/BOSchema/SDP_ServiceCvoipSettings"/>
  <bpws:import importType="http://www.w3.org/2001/XMLSchema" location="../../../../../SdpCommonLibrary/SDP_TransactionDetail.xsd" namespace="http://www.ibm.com/websphere/crossworlds/2002/BOSchema/SDP_TransactionDetail"/>
  <bpws:import importType="http://schemas.xmlsoap.org/wsdl/" location="../intf/UpdateMailBox_Compensation_Interface.wsdl" namespace="http://MamMemberServicesProcessModule/com/att/sdp/intf/UpdateMailBox_Compensation_Interface"/>
  <bpws:import importType="http://www.w3.org/2001/XMLSchema" location="../../../../../SdpCommonLibrary/SDP_Order.xsd" namespace="http://www.ibm.com/websphere/crossworlds/2002/BOSchema/SDP_Order"/>
  <bpws:import importType="http://www.w3.org/2001/XMLSchema" location="../../../../../SdpCommonLibrary/SDP_Temp.xsd" namespace="http://www.ibm.com/websphere/crossworlds/2002/BOSchema/SDP_Temp"/>
  <bpws:import importType="http://www.w3.org/2001/XMLSchema" location="../../../../../SdpCommonLibrary/SDP_LineSubComponent.xsd" namespace="http://www.ibm.com/websphere/crossworlds/2002/BOSchema/SDP_LineSubComponent"/>
  <bpws:import importType="http://www.w3.org/2001/XMLSchema" location="../../../../SDP_ServiceCvoipSettings.xsd" namespace="http://www.ibm.com/websphere/crossworlds/2002/BOSchema/SDP_ServiceCvoipSettings"/>
  <bpws:import importType="http://schemas.xmlsoap.org/wsdl/" location="../intf/SDP_Order_to_UCDCL_ProvisioningService.wsdl" namespace="http://SdpCommonLibrary/com/att/sdp/intf/ToUCDCL_ProvisioningService_Interface"/>
  <bpws:import importType="http://www.w3.org/2001/XMLSchema" location="../../../../SDP_Order.xsd" namespace="http://www.ibm.com/websphere/crossworlds/2002/BOSchema/SDP_Order"/>
  <bpws:import importType="http://www.w3.org/2001/XMLSchema" location="../../../../SDP_TransactionDetail.xsd" namespace="http://www.ibm.com/websphere/crossworlds/2002/BOSchema/SDP_TransactionDetail"/>
  <bpws:import importType="http://www.w3.org/2001/XMLSchema" location="../../../../SDP_Error.xsd" namespace="http://www.ibm.com/websphere/crossworlds/2002/BOSchema/SDP_Error"/>
  <bpws:import importType="http://www.w3.org/2001/XMLSchema" location="../../../../SDP_MemberTNS.xsd" namespace="http://www.ibm.com/websphere/crossworlds/2002/BOSchema/SDP_MemberTNS"/>
  <bpws:import importType="http://www.w3.org/2001/XMLSchema" location="../../../../SDP_Temp.xsd" namespace="http://www.ibm.com/websphere/crossworlds/2002/BOSchema/SDP_Temp"/>
  <bpws:import importType="http://www.w3.org/2001/XMLSchema" location="../../../../SDP_LineSubComponent.xsd" namespace="http://www.ibm.com/websphere/crossworlds/2002/BOSchema/SDP_LineSubComponent"/>
  <bpws:import importType="http://www.w3.org/2001/XMLSchema" location="../../../../SDP_AccountMailBoxes.xsd" namespace="http://www.ibm.com/websphere/crossworlds/2002/BOSchema/SDP_AccountMailBoxes"/>
  <bpws:import importType="http://www.w3.org/2001/XMLSchema" location="../../../../BPCStandardFaultType.xsd" namespace="http://www.ibm.com/xmlns/prod/websphere/business-process/6.0.0/"/>
  <bpws:import importType="http://www.w3.org/2001/XMLSchema" location="../../../../SDP_ErrorObject_Message.xsd" namespace="http://www.ibm.com/websphere/crossworlds/2002/BOSchema/SDP_ErrorObject_Message"/>
  <bpws:import importType="http://schemas.xmlsoap.org/wsdl/" location="../intf/To_WESM.wsdl" namespace="http://SdpCommonLibrary/com/att/sdp/intf/To_WESM"/>
  <bpws:import importType="http://schemas.xmlsoap.org/wsdl/" location="../../../../FromSdp_CommonErrorLogger_Interface.wsdl" namespace="http://SdpCommonLibrary/com/att/sdp/intf/FromSdp_CommonErrorLogger_Interface"/>
  <bpws:import importType="http://schemas.xmlsoap.org/wsdl/" location="../intf/UcdclOutputServiceWrapper_Interface.wsdl" namespace="http://SdpCommonLibrary/com/att/sdp/intf/UcdclOutputServiceWrapper_Interface"/>
  <bpws:import importType="http://schemas.xmlsoap.org/wsdl/" location="/resource/SdpCommonLibrary/com/att/sdp/intf/MPSCompensableService2_Interface.wsdl" namespace="http://SdpCommonLibrary/com/att/sdp/intf/MPSCompensableService2_Interface"/>
  <bpws:import importType="http://schemas.xmlsoap.org/wsdl/" location="../intf/MPSCompensableService2_Interface.wsdl" namespace="http://SdpCommonLibrary/com/att/sdp/intf/MPSCompensableService2_Interface"/>
  <bpws:import importType="http://www.w3.org/2001/XMLSchema" location="../../../../ServiceCallFault.xsd" namespace="http://SdpCommonLibrary"/>
  <bpws:import importType="http://schemas.xmlsoap.org/wsdl/" location="/resource/SdpCommonLibrary/com/att/sdp/intf/UcdclOutputServiceWrapper_Interface.wsdl" namespace="http://SdpCommonLibrary/com/att/sdp/intf/UcdclOutputServiceWrapper_Interface"/>
  <bpws:import importType="http://schemas.xmlsoap.org/wsdl/" location="../intf/UCDCLCompensableService_Interface.wsdl" namespace="http://SdpCommonLibrary/com/att/sdp/intf/UCDCLCompensableService_Interface"/>
  <bpws:partnerLinks>
    <bpws:partnerLink name="FromSdp_CommonErrorLogger_Interface" partnerLinkType="ns17:PartnerPLT5" partnerRole="partnerRole" wpc:id="904"/>
    <bpws:partnerLink myRole="myRole" name="UpdateMailBox_Compensation_Interface" partnerLinkType="ns17:PartnerPLT4" wpc:id="905"/>
    <bpws:partnerLink name="MPSCompensableService2_InterfacePartner" partnerLinkType="ns:MPSCompensableService2_InterfacePLT" partnerRole="MPSCompensableService2_InterfaceRole" wpc:id="906"/>
    <bpws:partnerLink name="UcdclCompensableService_InterfacePartner" partnerLinkType="ns17:PartnerPLT6" partnerRole="partnerRole" wpc:id="907"/>
  </bpws:partnerLinks>
  <bpws:variables>
    <bpws:variable name="SDP_ORDER_Request" type="ns0:SDP_Order" wpc:id="2"/>
    <bpws:variable name="SDP_ORDER_Prov" type="ns0:SDP_Order" wpc:id="3"/>
    <bpws:variable name="EmptyTransaction_Detail" type="ns1:SDP_TransactionDetail" wpc:id="4"/>
    <bpws:variable name="ucdclEmailOrPhone" type="xsd:string" wpc:id="14"/>
    <bpws:variable name="ucdclDeviceNumber" type="xsd:string" wpc:id="15"/>
    <bpws:variable name="ucdclDeviceType" type="xsd:string" wpc:id="16"/>
    <bpws:variable name="ucdclDeviceCFN" type="xsd:string" wpc:id="17"/>
    <bpws:variable name="ucdclAuthentication" type="xsd:string" wpc:id="18"/>
    <bpws:variable name="ucdclTransportMWI" type="xsd:string" wpc:id="19"/>
    <bpws:variable name="intReqSubMBoxCounter" type="xsd:int" wpc:id="173"/>
    <bpws:variable name="mailBoxTN" type="ns9:SDP_MemberTNS" wpc:id="176"/>
    <bpws:variable name="provSubMailBox" type="ns8:SDP_AccountMailBoxes" wpc:id="181"/>
    <bpws:variable name="reqSubMailBox" type="ns8:SDP_AccountMailBoxes" wpc:id="182"/>
    <bpws:variable name="SDP_ORDER_RequestProc" type="ns0:SDP_Order" wpc:id="193"/>
    <bpws:variable name="SDP_ORDER_ProvProc" type="ns0:SDP_Order" wpc:id="194"/>
    <bpws:variable name="Transaction_DetailPort" type="ns1:SDP_TransactionDetail" wpc:id="196"/>
    <bpws:variable name="reqTN" type="ns9:SDP_MemberTNS" wpc:id="281"/>
    <bpws:variable name="provTN" type="ns9:SDP_MemberTNS" wpc:id="282"/>
    <bpws:variable name="intReqTNCounter" type="xsd:int" wpc:id="289"/>
    <bpws:variable name="SDP_ORDER_ForUpdate" type="ns0:SDP_Order" wpc:id="298"/>
    <bpws:variable name="tmpSubMBox" type="ns8:SDP_AccountMailBoxes" wpc:id="325"/>
    <bpws:variable name="SDP_ORDER_Prov_Temp" type="ns0:SDP_Order" wpc:id="340"/>
    <bpws:variable name="RollbackState" type="xsd:int" wpc:id="424"/>
    <bpws:variable name="UMBState" type="xsd:int" wpc:id="457"/>
    <bpws:variable name="emptyMailBox" type="ns8:SDP_AccountMailBoxes" wpc:id="464"/>
    <bpws:variable name="SDP_ERROR_OBJECT_MESSAGE" type="ns5:SDP_ErrorObject_Message" wpc:id="480"/>
    <bpws:variable name="MANUAL_INTERVENTION_FLAG" type="xsd:boolean" wpc:id="481"/>
    <bpws:variable name="PARENT_PROCESS_NAME" type="xsd:string" wpc:id="482"/>
    <bpws:variable name="TARGET_OPERATION_NAME" type="xsd:string" wpc:id="483"/>
    <bpws:variable name="TARGET_SYSTEM_NAME" type="xsd:string" wpc:id="484"/>
    <bpws:variable name="SEVERITY" type="xsd:string" wpc:id="485"/>
    <bpws:variable name="STATE" type="xsd:string" wpc:id="486"/>
    <bpws:variable name="Transaction_Error" type="ns1:SDP_TransactionDetail" wpc:id="488"/>
    <bpws:variable name="PROCESS_NAME" type="xsd:string" wpc:id="561"/>
    <bpws:variable name="processID" type="xsd:string" wpc:id="562"/>
    <bpws:variable name="intCounter" type="xsd:int" wpc:id="608"/>
    <bpws:variable name="currentTempStore" type="ns13:SDP_Temp" wpc:id="612"/>
    <bpws:variable name="currentMailbox" type="ns8:SDP_AccountMailBoxes" wpc:id="617"/>
    <bpws:variable name="ADL_Line" type="ns14:SDP_LineSubComponent" wpc:id="747"/>
    <bpws:variable name="SdpOrderUpdated" type="ns0:SDP_Order" wpc:id="782"/>
    <bpws:variable name="UMSessionID" type="xsd:string" wpc:id="788"/>
    <bpws:variable name="processBO" type="ns0:SDP_Order" wpc:id="816"/>
  </bpws:variables>
  <bpws:faultHandlers>
    <bpws:catchAll wpc:id="903">
      <bpws:invoke name="LogErrorToFile" operation="null" partnerLink="null" portType="wpc:null" wpc:displayName="Log Error To File" wpc:id="524">
        <wpc:script>
          <wpc:javaCode><![CDATA[SdpLoggerHelper.logMessage("Unknown Failure Occured in MAM.UpdateMailBoxConfig",PROCESS_NAME,processID,SdpLoggerHelper.FATAL);
														
											
														
														
														]]></wpc:javaCode>
        </wpc:script>
      </bpws:invoke>
    </bpws:catchAll>
  </bpws:faultHandlers>
  <bpws:sequence name="HiddenSequence11" wpc:id="1073742633">
    <bpws:receive createInstance="yes" name="Receive" operation="compensateUpdateMailBox" partnerLink="UpdateMailBox_Compensation_Interface" portType="ns11:UpdateMailBox_Compensation_Interface" wpc:displayName="Receive" wpc:id="510">
      <wpc:output>
        <wpc:parameter name="SDP_ORDER_Prov" variable="SDP_ORDER_Prov"/>
        <wpc:parameter name="SDP_ORDER_Request" variable="SDP_ORDER_Request"/>
      </wpc:output>
    </bpws:receive>
    <bpws:invoke name="LogBeginProcess" operation="null" partnerLink="null" portType="wpc:null" wpc:displayName="Log - [Begin Process]" wpc:id="526">
      <wpc:script>
        <wpc:javaCode><![CDATA[processID = SDP_ORDER_Request.getString(SdpHelper.TEMPSTRING2_PATH.replace('.','/'));
PROCESS_NAME ="UPDATE_MAILBOX_COMPENSATION";


SdpLoggerHelper.logMessage("Begin SubFlow : UpdateMailBoxCompensation",PROCESS_NAME,processID,SdpLoggerHelper.INFO);
SdpLoggerHelper.logMessage("Received the following GBO From MAM ",PROCESS_NAME,processID,SdpLoggerHelper.INFO);

SdpLoggerHelper.logMessage("SDP_ORDER_Request :",PROCESS_NAME,processID,SdpLoggerHelper.INFO);

SdpLoggerHelper.logBO(SDP_ORDER_Request,PROCESS_NAME,processID,SdpLoggerHelper.INFO);

SdpLoggerHelper.logMessage("SDP_ORDER_Prov :",PROCESS_NAME,processID,SdpLoggerHelper.INFO);

SdpLoggerHelper.logBO(SDP_ORDER_Prov,PROCESS_NAME,processID,SdpLoggerHelper.INFO);]]></wpc:javaCode>
      </wpc:script>
    </bpws:invoke>
    <bpws:assign name="CopyTrigtoProc" wpc:displayName="Copy Trig to Proc" wpc:id="34">
      <bpws:copy>
        <bpws:from variable="SDP_ORDER_Request"/>
        <bpws:to variable="SDP_ORDER_RequestProc"/>
      </bpws:copy>
      <bpws:copy>
        <bpws:from variable="SDP_ORDER_Prov"/>
        <bpws:to variable="SDP_ORDER_ProvProc"/>
      </bpws:copy>
      <bpws:copy>
        <bpws:from>UpdateMailBoxConfig</bpws:from>
        <bpws:to variable="PARENT_PROCESS_NAME"/>
      </bpws:copy>
      <bpws:copy>
        <bpws:from>false</bpws:from>
        <bpws:to variable="MANUAL_INTERVENTION_FLAG"/>
      </bpws:copy>
    </bpws:assign>
    <bpws:assign name="InitializeVariables" wpc:displayName="Initialize Variables" wpc:id="299">
      <bpws:copy>
        <bpws:from variable="SDP_ORDER_RequestProc"/>
        <bpws:to variable="SDP_ORDER_ForUpdate"/>
      </bpws:copy>
      <bpws:copy>
        <bpws:from>0</bpws:from>
        <bpws:to variable="intReqSubMBoxCounter"/>
      </bpws:copy>
      <bpws:copy>
        <bpws:from variable="SDP_ORDER_Prov"/>
        <bpws:to variable="SDP_ORDER_Prov_Temp"/>
      </bpws:copy>
      <bpws:copy>
        <bpws:from>
          <bpws:expression expressionLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[bo:create('http://www.ibm.com/websphere/crossworlds/2002/BOSchema/SDP_TransactionDetail','SDP_TransactionDetail')]]></bpws:expression>
        </bpws:from>
        <bpws:to variable="EmptyTransaction_Detail"/>
      </bpws:copy>
      <bpws:copy>
        <bpws:from>false</bpws:from>
        <bpws:to variable="EmptyTransaction_Detail">
          <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/errorIndicator]]></bpws:query>
        </bpws:to>
      </bpws:copy>
      <bpws:copy>
        <bpws:from>
          <bpws:expression expressionLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[bo:create('http://www.ibm.com/websphere/crossworlds/2002/BOSchema/SDP_AccountMailBoxes', 'SDP_AccountMailBoxes')]]></bpws:expression>
        </bpws:from>
        <bpws:to variable="emptyMailBox"/>
      </bpws:copy>
      <bpws:copy>
        <bpws:from>null</bpws:from>
        <bpws:to variable="EmptyTransaction_Detail">
          <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/errorDetails/Error/Message/SdpCode]]></bpws:query>
        </bpws:to>
      </bpws:copy>
      <bpws:copy>
        <bpws:from variable="EmptyTransaction_Detail"/>
        <bpws:to variable="Transaction_DetailPort"/>
      </bpws:copy>
      <bpws:copy>
        <bpws:from variable="EmptyTransaction_Detail"/>
        <bpws:to variable="SDP_ORDER_ForUpdate">
          <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/transactionDetail]]></bpws:query>
        </bpws:to>
      </bpws:copy>
      <bpws:copy>
        <bpws:from>0</bpws:from>
        <bpws:to variable="intCounter"/>
      </bpws:copy>
      <bpws:copy>
        <bpws:from variable="EmptyTransaction_Detail"/>
        <bpws:to variable="processBO">
          <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[transactionDetail]]></bpws:query>
        </bpws:to>
      </bpws:copy>
    </bpws:assign>
    <bpws:invoke name="GetADL_Line" operation="null" partnerLink="null" portType="wpc:null" wpc:displayName="Get ADL_Line" wpc:id="749">
      <wpc:script>
        <wpc:javaCode><![CDATA[DataObject tmpLine = null;

tmpLine = SdpHelper.getPrimaryOrSecondaryTN(SDP_ORDER_ProvProc, SdpHelper.NO);

if (tmpLine != null)
{
	ADL_Line = SdpHelper.copySpecificBO(tmpLine);
}
]]></wpc:javaCode>
      </wpc:script>
    </bpws:invoke>
    <bpws:invoke name="SetSdpOrderUpdated" operation="null" partnerLink="null" portType="wpc:null" wpc:displayName="Set SdpOrderUpdated" wpc:id="784">
      <wpc:script>
        <wpc:javaCode><![CDATA[List lstMailboxes = null;

SdpOrderUpdated = SdpHelper.copySpecificBO(SDP_ORDER_ProvProc);

lstMailboxes = SdpOrderUpdated.getList(SdpHelper.VOIP_ACCOUNTMAILBOXES_PATH.replace('.','/'));
lstMailboxes.clear();]]></wpc:javaCode>
      </wpc:script>
    </bpws:invoke>
    <bpws:invoke name="InitializeintCounter" operation="null" partnerLink="null" portType="wpc:null" wpc:displayName="Initialize intCounter" wpc:id="616">
      <wpc:script>
        <wpc:javaCode><![CDATA[List lstTempStore = null;

lstTempStore = SDP_ORDER_RequestProc.getList(SdpHelper.TEMP_STORE_LIST.replace('.','/'));

intCounter = new Integer(lstTempStore.size() - 1);]]></wpc:javaCode>
      </wpc:script>
    </bpws:invoke>
    <bpws:while name="LoopeachTempStore" wpc:displayName="Loop each TempStore" wpc:id="607">
      <bpws:condition><![CDATA[return intCounter.intValue() >= 0;]]></bpws:condition>
      <bpws:sequence name="HiddenSequence21" wpc:id="1073742632">
        <bpws:invoke name="GetcurrentTempStoreMailbox" operation="null" partnerLink="null" portType="wpc:null" wpc:displayName="Get current TempStore/Mailbox" wpc:id="614">
          <wpc:script>
            <wpc:javaCode><![CDATA[DataObject tmpTempStore = null;
List lstTempStore = null;
String strInvariantId = null;

lstTempStore = SDP_ORDER_RequestProc.getList(SdpHelper.TEMP_STORE_LIST.replace('.','/'));

tmpTempStore = (DataObject)lstTempStore.get(intCounter.intValue());

currentTempStore = SdpHelper.copySpecificBO(tmpTempStore);
strInvariantId = currentTempStore.getString(SdpHelper.TEMP1);
currentMailbox = SdpHelper.getMailBox(SDP_ORDER_ProvProc,strInvariantId);
]]></wpc:javaCode>
          </wpc:script>
        </bpws:invoke>
        <bpws:switch name="NeedstoRollBackassociateMailboxTNs" wpc:displayName="Needs to RollBack associateMailboxTNs?" wpc:id="575">
          <bpws:case wpc:id="576">
            <bpws:condition><![CDATA[boolean proceed = false;
String strOperation = null;
String strInvariantId = null;
DataObject tmpMailbox = null;

if (currentTempStore != null && currentMailbox != null)
{
	strOperation = currentTempStore.getString(SdpHelper.TEMP2);
	
	if (strOperation != null && strOperation.equalsIgnoreCase("ASSOCIATE_MAILBOXTNS"))
	{
		// Check the mailbox updated already.
		strInvariantId = currentMailbox.getString(SdpHelper.CVOIP_MAILBOX_MAILBOXINVARIANTID);
		tmpMailbox = SdpHelper.getMailBox(SdpOrderUpdated,strInvariantId);
		if (tmpMailbox == null)
		{
			proceed = true;
		}
	}
}

return proceed;]]></bpws:condition>
            <bpws:sequence name="HiddenSequence14" wpc:id="1073742631">
              <bpws:invoke name="SetSdpOrderForUpdate1" operation="null" partnerLink="null" portType="wpc:null" wpc:displayName="Set SdpOrder For Update" wpc:id="606">
                <wpc:script>
                  <wpc:javaCode><![CDATA[DataObject tmpMailbox = null;
List lstMailboxes = null;

SDP_ORDER_ForUpdate = SdpHelper.copySpecificBO(SDP_ORDER_ProvProc);
tmpMailbox = SdpHelper.copySpecificBO(currentMailbox);

lstMailboxes = SDP_ORDER_ForUpdate.getList(SdpHelper.VOIP_ACCOUNTMAILBOXES_PATH.replace('.','/'));
lstMailboxes.clear();
lstMailboxes.add(tmpMailbox);
]]></wpc:javaCode>
                </wpc:script>
              </bpws:invoke>
              <bpws:assign name="PreInvokeAssigns6" wpc:displayName="Pre-Invoke Assigns" wpc:id="604">
                <bpws:copy>
                  <bpws:from>MPS.UpdateComponent.Request</bpws:from>
                  <bpws:to variable="Transaction_DetailPort">
                    <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/State]]></bpws:query>
                  </bpws:to>
                </bpws:copy>
                <bpws:copy>
                  <bpws:from>MPS</bpws:from>
                  <bpws:to variable="Transaction_DetailPort">
                    <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/errorDetails/Error/TargetSystem]]></bpws:query>
                  </bpws:to>
                </bpws:copy>
                <bpws:copy>
                  <bpws:from>UpdateComponent</bpws:from>
                  <bpws:to variable="Transaction_DetailPort">
                    <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/currentTargetOperation]]></bpws:query>
                  </bpws:to>
                </bpws:copy>
                <bpws:copy>
                  <bpws:from>MAILBOX</bpws:from>
                  <bpws:to variable="Transaction_DetailPort">
                    <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/currentProduct]]></bpws:query>
                  </bpws:to>
                </bpws:copy>
                <bpws:copy>
                  <bpws:from variable="Transaction_DetailPort"/>
                  <bpws:to variable="SDP_ORDER_ForUpdate">
                    <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/transactionDetail]]></bpws:query>
                  </bpws:to>
                </bpws:copy>
              </bpws:assign>
              <bpws:invoke name="SetMPSValues" operation="null" partnerLink="null" portType="wpc:null" wpc:displayName="Set MPS Values" wpc:id="619">
                <wpc:script>
                  <wpc:javaCode><![CDATA[/*
SdpLoggerHelper.logMessage("Setting up the values for MPS.updateComponent",
	PROCESS_NAME, processID,SdpLoggerHelper.DEBUG);
// R7 Filter setting not required
//Create WESM Content Filter 
ContentFilterCreator filterCreator = new ContentFilterCreator();

filterCreator.addSelectFilter(SdpHelper.PRODUCTTYPE, SdpHelper.CURRENT_PRODUCT_PATH);

//Create WESM Select Filter
filterCreator.addSelectFilter(SdpHelper.ACCT_OBJID, SdpHelper.ACCT_OBJID_PATH);

//Set the Filter for the MailBoxInvarintID
filterCreator.addSelectFilter(SdpHelper.CVOIP_MAILBOX_MAILBOXINVARIANTID, 
	SdpHelper.CVOIP_MAILBOX_MAILBOXINVARIANTID_PATH);
		
//Set the Content filter to the transaction detail object. 
SDP_ORDER_ForUpdate.getDataObject("transactionDetail").setDataObject( "contentFilter", filterCreator.createFilters() );

//Create WESM Update Filter for mailboxTNs

SdpHelper.setUpMemberTNs(SDP_ORDER_ForUpdate.getDataObject("transactionDetail"),
	currentMailbox.getList(SdpHelper.VOIP_MAILBOXTNS).size(),SdpHelper.MAILBOX_TN_TYPE);

SdpHelper.setUpMailboxMembers(SDP_ORDER_ForUpdate.getDataObject("transactionDetail"),
	currentMailbox.getList(SdpHelper.VOIP_MAILBOX_MEMBERS).size());
*/	

]]></wpc:javaCode>
                </wpc:script>
              </bpws:invoke>
              <bpws:invoke name="LogMPScompensateAssociateMailboxTNs3" operation="null" partnerLink="null" portType="wpc:null" wpc:displayName="Log - [MPS.compensateAssociateMailboxTNs]" wpc:id="582">
                <wpc:script>
                  <wpc:javaCode><![CDATA[SdpLoggerHelper.logMessage(SdpLoggerHelper.INVOKE_STR +" : MPS.compensateAssociateMailboxTNs",
	PROCESS_NAME,processID,SdpLoggerHelper.INFO);

SdpLoggerHelper.logMessage("Request BO:[SDP_ORDER_ForUpdate]",
	PROCESS_NAME,processID,SdpLoggerHelper.INFO);

SdpLoggerHelper.logBO(SDP_ORDER_ForUpdate,PROCESS_NAME,processID,SdpLoggerHelper.INFO);																		]]></wpc:javaCode>
                </wpc:script>
              </bpws:invoke>
              <bpws:invoke name="InvokeMPScompensateAssociateMailboxTNs" operation="associateMailboxTNs" partnerLink="MPSCompensableService2_InterfacePartner" portType="ns16:MPSCompensableService2_Interface" wpc:displayName="Invoke [MPS.compensateAssociateMailboxTNs]" wpc:id="583">
                <wpc:input>
                  <wpc:parameter name="order" variable="SDP_ORDER_ForUpdate"/>
                </wpc:input>
                <wpc:output/>
              </bpws:invoke>
              <bpws:invoke name="LogMPScompensateAssociateMailboxTNsSuccess2" operation="null" partnerLink="null" portType="wpc:null" wpc:displayName="Log - [MPS.compensateAssociateMailboxTNs -Success] " wpc:id="657">
                <wpc:script>
                  <wpc:javaCode><![CDATA[SdpLoggerHelper.logMessage("MPS.compensateAssociateMailboxTNs :-"+SdpLoggerHelper.SUCCESS_STR,
	PROCESS_NAME,processID,SdpLoggerHelper.INFO);

]]></wpc:javaCode>
                </wpc:script>
              </bpws:invoke>
              <bpws:invoke name="UpdatetheSdpOrderUpdate" operation="null" partnerLink="null" portType="wpc:null" wpc:displayName="Update the SdpOrderUpdate" wpc:id="787">
                <wpc:script>
                  <wpc:javaCode><![CDATA[DataObject tmpMailbox = null;
tmpMailbox = SdpHelper.copySpecificBO(currentMailbox);

SdpOrderUpdated.getList(SdpHelper.VOIP_ACCOUNTMAILBOXES_PATH.replace('.','/')).add(tmpMailbox);]]></wpc:javaCode>
                </wpc:script>
              </bpws:invoke>
            </bpws:sequence>
          </bpws:case>
        </bpws:switch>
        <bpws:assign name="PreInvokeAssigns8" wpc:displayName="Pre Invoke Assigns" wpc:id="660">
          <bpws:copy>
            <bpws:from variable="EmptyTransaction_Detail"/>
            <bpws:to variable="Transaction_DetailPort"/>
          </bpws:copy>
          <bpws:copy>
            <bpws:from>UCDCL.Login.Request</bpws:from>
            <bpws:to variable="Transaction_DetailPort">
              <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/State]]></bpws:query>
            </bpws:to>
          </bpws:copy>
          <bpws:copy>
            <bpws:from>UCDCL</bpws:from>
            <bpws:to variable="Transaction_DetailPort">
              <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/errorDetails/Error/TargetSystem]]></bpws:query>
            </bpws:to>
          </bpws:copy>
          <bpws:copy>
            <bpws:from>Login</bpws:from>
            <bpws:to variable="Transaction_DetailPort">
              <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/currentTargetOperation]]></bpws:query>
            </bpws:to>
          </bpws:copy>
        </bpws:assign>
        <bpws:invoke name="LogUCDCLLogin" operation="null" partnerLink="null" portType="wpc:null" wpc:displayName="Log - [UCDCL.Login]" wpc:id="662">
          <wpc:script>
            <wpc:javaCode><![CDATA[SdpLoggerHelper.logMessage(SdpLoggerHelper.INVOKE_STR +" : UCDCL.Login",
	PROCESS_NAME,processID,SdpLoggerHelper.INFO);
]]></wpc:javaCode>
          </wpc:script>
        </bpws:invoke>
        <bpws:invoke name="InvokeUCDCLLogin" operation="provisioningServiceLogin" partnerLink="UcdclCompensableService_InterfacePartner" portType="ns18:UCDCLCompensableService_Interface" wpc:displayName="Invoke - [UCDCL.Login]" wpc:id="663">
          <wpc:input>
            <wpc:parameter name="transactionDetail" variable="Transaction_DetailPort"/>
          </wpc:input>
          <wpc:output>
            <wpc:parameter name="transactionDetail" variable="Transaction_DetailPort"/>
          </wpc:output>
          <bpws:catch faultName="wpc:runtimeFailure" faultVariable="bpcFault" wpc:faultType="wpc:BPCStandardFaultType" wpc:id="934" wpc:variableId="664">
            <bpws:invoke name="Handleruntimefailures" operation="null" partnerLink="null" portType="wpc:null" wpc:displayName="handle runtime failures" wpc:id="666">
              <wpc:script>
                <wpc:javaCode><![CDATA[SdpErrorHelper.setErrDetInTransDet(Transaction_DetailPort,bpcFault,SdpErrorHelper.SEVERITY_FATAL);

SdpLoggerHelper.logMessage(SdpLoggerHelper.RUNTIME_FAILURE+"  UCDCL.Login",PROCESS_NAME,processID,SdpLoggerHelper.FATAL);]]></wpc:javaCode>
              </wpc:script>
            </bpws:invoke>
          </bpws:catch>
          <bpws:catch faultName="ns18:serviceCallFault" faultVariable="scFault" wpc:faultType="java:ServiceCallFault" wpc:id="935" wpc:variableId="667">
            <bpws:invoke name="SetErrorDetails" operation="null" partnerLink="null" portType="wpc:null" wpc:displayName="Set Error Details" wpc:id="669">
              <wpc:script>
                <wpc:javaCode><![CDATA[Transaction_DetailPort.setBoolean(SdpHelper.ERRORINDICATOR,true);

new att.lightspeed.sdp.helper.TransactionDetail(Transaction_DetailPort).setSDPErrorMessage(scFault);

Transaction_DetailPort.getDataObject("errorDetails").getDataObject("Error").setString("Severity",SdpErrorHelper.SEVERITY_FATAL);

 
SdpLoggerHelper.logMessage(SdpLoggerHelper.FAULT_FAILURE +"  UCDCL.Login",PROCESS_NAME,processID,SdpLoggerHelper.FATAL);
 ]]></wpc:javaCode>
              </wpc:script>
            </bpws:invoke>
          </bpws:catch>
          <bpws:catchAll wpc:id="933">
            <bpws:invoke name="Handleruntimefailures1" operation="null" partnerLink="null" portType="wpc:null" wpc:displayName="handle runtime failures" wpc:id="674">
              <wpc:script>
                <wpc:javaCode><![CDATA[SdpErrorHelper.setErrDetInTransDet(Transaction_DetailPort,null,SdpErrorHelper.SEVERITY_FATAL);

SdpLoggerHelper.logMessage(SdpLoggerHelper.UNKNOWN_FAILURE+"  UCDCL.Login",PROCESS_NAME,processID,SdpLoggerHelper.FATAL);]]></wpc:javaCode>
              </wpc:script>
            </bpws:invoke>
          </bpws:catchAll>
        </bpws:invoke>
        <bpws:switch name="UCDCLError" wpc:displayName="UCDCL Error?" wpc:id="675">
          <bpws:case wpc:id="676">
            <bpws:condition><![CDATA[boolean __result__1 = com.ibm.wbiservers.brules.core.codegen.NillableUtility.getBoolean(Transaction_DetailPort, "errorIndicator", "Transaction_DetailPort");
return __result__1;

//@generated:com.ibm.wbit.activity.ui
//<?xml version="1.0" encoding="UTF-8"?>
//<com.ibm.wbit.activity:CompositeActivity xmi:version="2.0" xmlns:xmi="http://www.omg.org/XMI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:com.ibm.wbit.activity="http:///com/ibm/wbit/activity.ecore" name="ActivityMethod">
//  <result name="Result">
//    <type xsi:type="com.ibm.wbit.activity:JavaElementType" name="boolean"/>
//  </result>
//  <exceptions>
//    <type xsi:type="com.ibm.wbit.activity:JavaElementType" name="com.ibm.bpe.api.ProcessException"/>
//  </exceptions>
//  <executableElements xsi:type="com.ibm.wbit.activity:Expression" value="Transaction_DetailPort.errorIndicator" field="true">
//    <dataOutputs target="//@executableElements.1"/>
//    <type xsi:type="com.ibm.wbit.activity:XSDElementType" name="boolean" namespace="http://www.w3.org/2001/XMLSchema" nillable="false"/>
//  </executableElements>
//  <executableElements xsi:type="com.ibm.wbit.activity:ReturnElement" dataInputs="//@executableElements.0/@dataOutputs.0"/>
//  <executableGroups executableElements="//@executableElements.0 //@executableElements.1"/>
//</com.ibm.wbit.activity:CompositeActivity>
//@generated:end
//!SMAP!*S WBIACTDBG
//!SMAP!*L
//!SMAP!1:1,1
//!SMAP!2:2,1
//!SMAP!1000000:26,1]]></bpws:condition>
            <bpws:sequence name="HiddenSequence12" wpc:id="1073742628">
              <bpws:invoke name="LogUCDCLLoginError" operation="null" partnerLink="null" portType="wpc:null" wpc:displayName="Log - [UCDCL.Login  - Error] " wpc:id="679">
                <wpc:script>
                  <wpc:javaCode><![CDATA[String strSeverity =Transaction_DetailPort.getString("errorDetails/Error/Severity");
int logLevel = SdpHelper.getLogLevel(strSeverity);
SdpLoggerHelper.logMessage(" UCDCL.Login- "+SdpLoggerHelper.ERROR_STR+"["+strSeverity+"]",PROCESS_NAME,processID,logLevel);]]></wpc:javaCode>
                </wpc:script>
              </bpws:invoke>
              <bpws:assign name="PrepareGBOForLogging3" wpc:displayName="Prepare GBO For Logging" wpc:id="680">
                <bpws:copy>
                  <bpws:from variable="Transaction_DetailPort">
                    <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/State]]></bpws:query>
                  </bpws:from>
                  <bpws:to variable="STATE"/>
                </bpws:copy>
                <bpws:copy>
                  <bpws:from variable="Transaction_DetailPort">
                    <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/errorDetails/Error/Severity]]></bpws:query>
                  </bpws:from>
                  <bpws:to variable="SEVERITY"/>
                </bpws:copy>
                <bpws:copy>
                  <bpws:from variable="Transaction_DetailPort">
                    <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/errorDetails/Error/Message]]></bpws:query>
                  </bpws:from>
                  <bpws:to variable="SDP_ERROR_OBJECT_MESSAGE"/>
                </bpws:copy>
                <bpws:copy>
                  <bpws:from variable="Transaction_DetailPort">
                    <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/errorDetails/Error/TargetSystem]]></bpws:query>
                  </bpws:from>
                  <bpws:to variable="TARGET_SYSTEM_NAME"/>
                </bpws:copy>
                <bpws:copy>
                  <bpws:from>true</bpws:from>
                  <bpws:to variable="MANUAL_INTERVENTION_FLAG"/>
                </bpws:copy>
                <bpws:copy>
                  <bpws:from variable="Transaction_DetailPort">
                    <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/currentTargetOperation]]></bpws:query>
                  </bpws:from>
                  <bpws:to variable="TARGET_OPERATION_NAME"/>
                </bpws:copy>
                <bpws:copy>
                  <bpws:from variable="Transaction_DetailPort">
                    <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/errorDetails/Error/Message]]></bpws:query>
                  </bpws:from>
                  <bpws:to variable="SDP_ORDER_RequestProc">
                    <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/transactionDetail/errorDetails/Error/Message]]></bpws:query>
                  </bpws:to>
                </bpws:copy>
              </bpws:assign>
              <bpws:invoke name="LogCommonErrorLogger4" operation="null" partnerLink="null" portType="wpc:null" wpc:displayName="Log - [CommonErrorLogger ] " wpc:id="682">
                <wpc:script>
                  <wpc:javaCode><![CDATA[SdpLoggerHelper.logMessage("Invoking CommonErrorLogger:",PROCESS_NAME,processID,SdpLoggerHelper.INFO);

SDP_ORDER_RequestProc.setString(SdpHelper.TEMPSTRING1_PATH.replace('.','/'),processID);	
										
																		]]></wpc:javaCode>
                </wpc:script>
              </bpws:invoke>
              <bpws:invoke name="InvokeLogError2" operation="logErrorDetails" partnerLink="FromSdp_CommonErrorLogger_Interface" portType="ns12:FromSdp_CommonErrorLogger_Interface" wpc:displayName="Invoke Log Error" wpc:id="683">
                <wpc:input>
                  <wpc:parameter name="transactionState" variable="STATE"/>
                  <wpc:parameter name="targetOperation" variable="TARGET_OPERATION_NAME"/>
                  <wpc:parameter name="parentProcessName" variable="PARENT_PROCESS_NAME"/>
                  <wpc:parameter name="sdpOrder" variable="SDP_ORDER_RequestProc"/>
                  <wpc:parameter name="manualInterventionInd" variable="MANUAL_INTERVENTION_FLAG"/>
                  <wpc:parameter name="severity" variable="SEVERITY"/>
                  <wpc:parameter name="targetSystem" variable="TARGET_SYSTEM_NAME"/>
                  <wpc:parameter name="sdpErrorObjectMessage" variable="SDP_ERROR_OBJECT_MESSAGE"/>
                </wpc:input>
                <wpc:output>
                  <wpc:parameter name="response" variable="Transaction_Error"/>
                </wpc:output>
              </bpws:invoke>
              <bpws:invoke name="LogCommonErrorLogger5" operation="null" partnerLink="null" portType="wpc:null" wpc:displayName="Log - [CommonErrorLogger ] " wpc:id="685">
                <wpc:script>
                  <wpc:javaCode><![CDATA[SdpLoggerHelper.logMessage(" CommonErrorLogger",PROCESS_NAME,processID,SdpLoggerHelper.INFO);]]></wpc:javaCode>
                </wpc:script>
              </bpws:invoke>
              <bpws:assign name="Copyproctotrigg4" wpc:displayName="copy proc to trigg" wpc:id="686">
                <bpws:copy>
                  <bpws:from variable="SDP_ORDER_RequestProc"/>
                  <bpws:to variable="SDP_ORDER_Request"/>
                </bpws:copy>
                <bpws:copy>
                  <bpws:from variable="SDP_ORDER_ProvProc"/>
                  <bpws:to variable="SDP_ORDER_Prov"/>
                </bpws:copy>
              </bpws:assign>
              <bpws:reply name="Reply4" operation="compensateUpdateMailBox" partnerLink="UpdateMailBox_Compensation_Interface" portType="ns11:UpdateMailBox_Compensation_Interface" wpc:displayName="Reply" wpc:id="687">
                <wpc:input>
                  <wpc:parameter name="SDP_ORDER_ProvPort" variable="SDP_ORDER_Prov"/>
                  <wpc:parameter name="Transaction_Detail" variable="Transaction_DetailPort"/>
                  <wpc:parameter name="SDP_ORDER_RequestPort" variable="SDP_ORDER_Request"/>
                </wpc:input>
              </bpws:reply>
              <bpws:terminate name="Terminate4" wpc:displayName="Terminate" wpc:id="688"/>
            </bpws:sequence>
          </bpws:case>
          <bpws:otherwise wpc:id="937">
            <bpws:sequence name="HiddenSequence" wpc:id="1073742634">
              <bpws:invoke name="LogUCDCLLoginSuccess" operation="null" partnerLink="null" portType="wpc:null" wpc:displayName="Log - [UCDCL.Login -Success] " wpc:id="690">
                <wpc:script>
                  <wpc:javaCode><![CDATA[SdpLoggerHelper.logMessage("UCDCL.Login -"+SdpLoggerHelper.SUCCESS_STR,PROCESS_NAME,processID,SdpLoggerHelper.INFO);]]></wpc:javaCode>
                </wpc:script>
              </bpws:invoke>
              <bpws:invoke name="SetUMSessionIDUMMessageCenterIP" operation="null" partnerLink="null" portType="wpc:null" wpc:continueOnError="inherit" wpc:displayName="Set UMSessionID &amp; UMMessageCenterIP" wpc:id="811">
                <wpc:script>
                  <wpc:javaCode><![CDATA[att.lightspeed.sdp.helper.WpsLogger logger = att.lightspeed.sdp.helper.WpsLogger.getLogger(processInstance());
String UMSessionID = null;
String UMMessageCenterIP = null;

UMSessionID = Transaction_DetailPort.getString(SdpHelper.TRANSDETAIL_UMSESSIONID);
UMMessageCenterIP = Transaction_DetailPort.getString(SdpHelper.TRANSDETAIL_UMMESSAGECENTERIP);

logger.debug("First UCDCL.Login called for this Transaction");
logger.debug("UMSessionID from the Login Response: " + UMSessionID);
logger.debug("UMMessageCenterIP from the Login Response: " + UMMessageCenterIP);

processBO.setString(SdpHelper.xPathify(SdpHelper.TRANSDETAIL_UMSESSIONID_PATH),UMSessionID);

processBO.setString(SdpHelper.xPathify(SdpHelper.TRANSDETAIL_UMMESSAGECENTERIP_PATH),UMMessageCenterIP);
]]></wpc:javaCode>
                </wpc:script>
              </bpws:invoke>
            </bpws:sequence>
          </bpws:otherwise>
        </bpws:switch>
        <bpws:switch name="NeedstoRollBackAddDevice" wpc:displayName="Needs to RollBack AddDevice?" wpc:id="577">
          <bpws:case wpc:id="578">
            <bpws:condition><![CDATA[boolean proceed = false;
String strOperation = null;

if (currentTempStore != null && currentMailbox != null)
{
	strOperation = currentTempStore.getString(SdpHelper.TEMP2);
	
	if (strOperation != null && strOperation.equalsIgnoreCase("ADD_DEVICE"))
	{
		proceed = true;
	}
}

return proceed;]]></bpws:condition>
            <bpws:sequence name="HiddenSequence19" wpc:id="1073742627">
              <bpws:assign name="PreInvokeAssigns7" wpc:displayName="Pre Invoke Assigns" wpc:id="624">
                <bpws:copy>
                  <bpws:from variable="currentMailbox">
                    <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/mailBoxInvariantId]]></bpws:query>
                  </bpws:from>
                  <bpws:to variable="ucdclEmailOrPhone"/>
                </bpws:copy>
                <bpws:copy>
                  <bpws:from variable="ADL_Line">
                    <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/tnInfo/tn]]></bpws:query>
                  </bpws:from>
                  <bpws:to variable="ucdclDeviceNumber"/>
                </bpws:copy>
                <bpws:copy>
                  <bpws:from>null</bpws:from>
                  <bpws:to variable="ucdclAuthentication"/>
                </bpws:copy>
                <bpws:copy>
                  <bpws:from variable="EmptyTransaction_Detail"/>
                  <bpws:to variable="Transaction_DetailPort"/>
                </bpws:copy>
                <bpws:copy>
                  <bpws:from>UCDCL.DeleteDevice.request</bpws:from>
                  <bpws:to variable="Transaction_DetailPort">
                    <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/State]]></bpws:query>
                  </bpws:to>
                </bpws:copy>
                <bpws:copy>
                  <bpws:from>UCDCL</bpws:from>
                  <bpws:to variable="Transaction_DetailPort">
                    <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/errorDetails/Error/TargetSystem]]></bpws:query>
                  </bpws:to>
                </bpws:copy>
                <bpws:copy>
                  <bpws:from>DeleteDevice</bpws:from>
                  <bpws:to variable="Transaction_DetailPort">
                    <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/currentTargetOperation]]></bpws:query>
                  </bpws:to>
                </bpws:copy>
                <bpws:copy>
                  <bpws:from variable="currentMailbox">
                    <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[mailBoxInvariantId]]></bpws:query>
                  </bpws:from>
                  <bpws:to variable="processBO">
                    <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[order/ReqService/product/cvoipProduct/accountMailBoxes[1]/mailBoxInvariantId]]></bpws:query>
                  </bpws:to>
                </bpws:copy>
                <bpws:copy>
                  <bpws:from variable="ADL_Line">
                    <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[tnInfo/tn]]></bpws:query>
                  </bpws:from>
                  <bpws:to variable="processBO">
                    <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[order/ReqService/product/cvoipProduct/cvoipLineSubComponent[1]/tnInfo/tn]]></bpws:query>
                  </bpws:to>
                </bpws:copy>
              </bpws:assign>
              <bpws:invoke name="LogUCDCLDeleteDevice1" operation="null" partnerLink="null" portType="wpc:null" wpc:displayName="Log - [UCDCL.DeleteDevice ] " wpc:id="626">
                <wpc:script>
                  <wpc:javaCode><![CDATA[SdpLoggerHelper.logMessage(SdpLoggerHelper.INVOKE_STR +" : UCDCL.DeleteDevice",PROCESS_NAME,processID,SdpLoggerHelper.INFO);
														
SdpLoggerHelper.logMessage("Request BO:[ucdclEmailOrPhone]",PROCESS_NAME,processID,SdpLoggerHelper.INFO);
														
SdpLoggerHelper.logMessage("ucdclEmailOrPhone :"+ucdclEmailOrPhone,PROCESS_NAME,processID,SdpLoggerHelper.INFO);
SdpLoggerHelper.logMessage("ucdclDeviceNumber :"+ucdclDeviceNumber,PROCESS_NAME,processID,SdpLoggerHelper.INFO);
SdpLoggerHelper.logMessage("ucdclAuthentication :"+ucdclAuthentication,PROCESS_NAME,processID,SdpLoggerHelper.INFO);
														]]></wpc:javaCode>
                </wpc:script>
              </bpws:invoke>
              <bpws:invoke name="InvokeUCDCLDeleteDevice" operation="deleteDevice" partnerLink="UcdclCompensableService_InterfacePartner" portType="ns18:UCDCLCompensableService_Interface" wpc:displayName="Invoke - [UCDCL.DeleteDevice]" wpc:id="627">
                <wpc:input>
                  <wpc:parameter name="order" variable="processBO"/>
                </wpc:input>
                <wpc:output>
                  <wpc:parameter name="transactionDetail" variable="Transaction_DetailPort"/>
                </wpc:output>
                <bpws:catch faultName="wpc:runtimeFailure" faultVariable="bpcFault" wpc:faultType="wpc:BPCStandardFaultType" wpc:id="939" wpc:variableId="628">
                  <bpws:invoke name="Handleruntimefailures" operation="null" partnerLink="null" portType="wpc:null" wpc:displayName="handle runtime failures" wpc:id="630">
                    <wpc:script>
                      <wpc:javaCode><![CDATA[SdpErrorHelper.setErrDetInTransDet(Transaction_DetailPort,bpcFault,SdpErrorHelper.SEVERITY_FATAL);

SdpLoggerHelper.logMessage(SdpLoggerHelper.RUNTIME_FAILURE+"  UCDCL.DeleteDevice",PROCESS_NAME,processID,SdpLoggerHelper.FATAL);]]></wpc:javaCode>
                    </wpc:script>
                  </bpws:invoke>
                </bpws:catch>
                <bpws:catch faultName="ns18:serviceCallFault" faultVariable="scFault" wpc:faultType="java:ServiceCallFault" wpc:id="940" wpc:variableId="631">
                  <bpws:invoke name="SetErrorDetails" operation="null" partnerLink="null" portType="wpc:null" wpc:displayName="Set Error Details" wpc:id="633">
                    <wpc:script>
                      <wpc:javaCode><![CDATA[Transaction_DetailPort.setBoolean(SdpHelper.ERRORINDICATOR,true);

new att.lightspeed.sdp.helper.TransactionDetail(Transaction_DetailPort).setSDPErrorMessage(scFault);

Transaction_DetailPort.getDataObject("errorDetails").getDataObject("Error").setString("Severity",SdpErrorHelper.SEVERITY_FATAL);

 
SdpLoggerHelper.logMessage(SdpLoggerHelper.FAULT_FAILURE +"  UCDCL.DeleteDevice",PROCESS_NAME,processID,SdpLoggerHelper.FATAL);
 ]]></wpc:javaCode>
                    </wpc:script>
                  </bpws:invoke>
                </bpws:catch>
                <bpws:catchAll wpc:id="938">
                  <bpws:invoke name="Handleruntimefailures1" operation="null" partnerLink="null" portType="wpc:null" wpc:displayName="handle runtime failures" wpc:id="638">
                    <wpc:script>
                      <wpc:javaCode><![CDATA[SdpErrorHelper.setErrDetInTransDet(Transaction_DetailPort,null,SdpErrorHelper.SEVERITY_FATAL);

SdpLoggerHelper.logMessage(SdpLoggerHelper.UNKNOWN_FAILURE+"  UCDCL.DeleteDevice",PROCESS_NAME,processID,SdpLoggerHelper.FATAL);]]></wpc:javaCode>
                    </wpc:script>
                  </bpws:invoke>
                </bpws:catchAll>
              </bpws:invoke>
              <bpws:switch name="UCDCLError2" wpc:displayName="UCDCL Error?" wpc:id="639">
                <bpws:case wpc:id="640">
                  <bpws:condition><![CDATA[boolean __result__1 = com.ibm.wbiservers.brules.core.codegen.NillableUtility.getBoolean(Transaction_DetailPort, "errorIndicator", "Transaction_DetailPort");
return __result__1;

//@generated:com.ibm.wbit.activity.ui
//<?xml version="1.0" encoding="UTF-8"?>
//<com.ibm.wbit.activity:CompositeActivity xmi:version="2.0" xmlns:xmi="http://www.omg.org/XMI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:com.ibm.wbit.activity="http:///com/ibm/wbit/activity.ecore" name="ActivityMethod">
//  <result name="Result">
//    <type xsi:type="com.ibm.wbit.activity:JavaElementType" name="boolean"/>
//  </result>
//  <exceptions>
//    <type xsi:type="com.ibm.wbit.activity:JavaElementType" name="com.ibm.bpe.api.ProcessException"/>
//  </exceptions>
//  <executableElements xsi:type="com.ibm.wbit.activity:Expression" value="Transaction_DetailPort.errorIndicator" field="true">
//    <dataOutputs target="//@executableElements.1"/>
//    <type xsi:type="com.ibm.wbit.activity:XSDElementType" name="boolean" namespace="http://www.w3.org/2001/XMLSchema" nillable="false"/>
//  </executableElements>
//  <executableElements xsi:type="com.ibm.wbit.activity:ReturnElement" dataInputs="//@executableElements.0/@dataOutputs.0"/>
//  <executableGroups executableElements="//@executableElements.0 //@executableElements.1"/>
//</com.ibm.wbit.activity:CompositeActivity>
//@generated:end
//!SMAP!*S WBIACTDBG
//!SMAP!*L
//!SMAP!1:1,1
//!SMAP!2:2,1
//!SMAP!1000000:26,1]]></bpws:condition>
                  <bpws:sequence name="HiddenSequence4" wpc:id="1073742626">
                    <bpws:invoke name="LogUCDCLDeleteDeviceError1" operation="null" partnerLink="null" portType="wpc:null" wpc:displayName="Log - [UCDCL.DeleteDevice - Error]" wpc:id="643">
                      <wpc:script>
                        <wpc:javaCode><![CDATA[String strSeverity =Transaction_DetailPort.getString("errorDetails/Error/Severity");
int logLevel = SdpHelper.getLogLevel(strSeverity);
SdpLoggerHelper.logMessage("UCDCL.DeleteDevice- "+SdpLoggerHelper.ERROR_STR+"["+strSeverity+"]",PROCESS_NAME,processID,logLevel);]]></wpc:javaCode>
                      </wpc:script>
                    </bpws:invoke>
                    <bpws:assign name="PrepareGBOForLogging3" wpc:displayName="Prepare GBO For Logging" wpc:id="644">
                      <bpws:copy>
                        <bpws:from variable="Transaction_DetailPort">
                          <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/State]]></bpws:query>
                        </bpws:from>
                        <bpws:to variable="STATE"/>
                      </bpws:copy>
                      <bpws:copy>
                        <bpws:from variable="Transaction_DetailPort">
                          <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/errorDetails/Error/Severity]]></bpws:query>
                        </bpws:from>
                        <bpws:to variable="SEVERITY"/>
                      </bpws:copy>
                      <bpws:copy>
                        <bpws:from variable="Transaction_DetailPort">
                          <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/errorDetails/Error/Message]]></bpws:query>
                        </bpws:from>
                        <bpws:to variable="SDP_ERROR_OBJECT_MESSAGE"/>
                      </bpws:copy>
                      <bpws:copy>
                        <bpws:from variable="Transaction_DetailPort">
                          <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/errorDetails/Error/TargetSystem]]></bpws:query>
                        </bpws:from>
                        <bpws:to variable="TARGET_SYSTEM_NAME"/>
                      </bpws:copy>
                      <bpws:copy>
                        <bpws:from>true</bpws:from>
                        <bpws:to variable="MANUAL_INTERVENTION_FLAG"/>
                      </bpws:copy>
                      <bpws:copy>
                        <bpws:from variable="Transaction_DetailPort">
                          <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/currentTargetOperation]]></bpws:query>
                        </bpws:from>
                        <bpws:to variable="TARGET_OPERATION_NAME"/>
                      </bpws:copy>
                      <bpws:copy>
                        <bpws:from variable="Transaction_DetailPort">
                          <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/errorDetails/Error/Message]]></bpws:query>
                        </bpws:from>
                        <bpws:to variable="SDP_ORDER_RequestProc">
                          <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/transactionDetail/errorDetails/Error/Message]]></bpws:query>
                        </bpws:to>
                      </bpws:copy>
                    </bpws:assign>
                    <bpws:invoke name="LogCommonErrorLogger4" operation="null" partnerLink="null" portType="wpc:null" wpc:displayName="Log - [CommonErrorLogger ] " wpc:id="646">
                      <wpc:script>
                        <wpc:javaCode><![CDATA[SdpLoggerHelper.logMessage("Invoking CommonErrorLogger:",PROCESS_NAME,processID,SdpLoggerHelper.INFO);

SDP_ORDER_RequestProc.setString(SdpHelper.TEMPSTRING1_PATH.replace('.','/'),processID);	
										
																		]]></wpc:javaCode>
                      </wpc:script>
                    </bpws:invoke>
                    <bpws:invoke name="InvokeLogError2" operation="logErrorDetails" partnerLink="FromSdp_CommonErrorLogger_Interface" portType="ns12:FromSdp_CommonErrorLogger_Interface" wpc:displayName="Invoke Log Error" wpc:id="647">
                      <wpc:input>
                        <wpc:parameter name="transactionState" variable="STATE"/>
                        <wpc:parameter name="targetOperation" variable="TARGET_OPERATION_NAME"/>
                        <wpc:parameter name="parentProcessName" variable="PARENT_PROCESS_NAME"/>
                        <wpc:parameter name="sdpOrder" variable="SDP_ORDER_RequestProc"/>
                        <wpc:parameter name="manualInterventionInd" variable="MANUAL_INTERVENTION_FLAG"/>
                        <wpc:parameter name="severity" variable="SEVERITY"/>
                        <wpc:parameter name="targetSystem" variable="TARGET_SYSTEM_NAME"/>
                        <wpc:parameter name="sdpErrorObjectMessage" variable="SDP_ERROR_OBJECT_MESSAGE"/>
                      </wpc:input>
                      <wpc:output>
                        <wpc:parameter name="response" variable="Transaction_Error"/>
                      </wpc:output>
                    </bpws:invoke>
                    <bpws:invoke name="LogCommonErrorLogger5" operation="null" partnerLink="null" portType="wpc:null" wpc:displayName="Log - [CommonErrorLogger ] " wpc:id="649">
                      <wpc:script>
                        <wpc:javaCode><![CDATA[SdpLoggerHelper.logMessage(" CommonErrorLogger",PROCESS_NAME,processID,SdpLoggerHelper.INFO);]]></wpc:javaCode>
                      </wpc:script>
                    </bpws:invoke>
                    <bpws:assign name="Copyproctotrigg4" wpc:displayName="copy proc to trigg" wpc:id="650">
                      <bpws:copy>
                        <bpws:from variable="SDP_ORDER_RequestProc"/>
                        <bpws:to variable="SDP_ORDER_Request"/>
                      </bpws:copy>
                      <bpws:copy>
                        <bpws:from variable="SDP_ORDER_ProvProc"/>
                        <bpws:to variable="SDP_ORDER_Prov"/>
                      </bpws:copy>
                    </bpws:assign>
                    <bpws:reply name="Reply6" operation="compensateUpdateMailBox" partnerLink="UpdateMailBox_Compensation_Interface" portType="ns11:UpdateMailBox_Compensation_Interface" wpc:displayName="Reply" wpc:id="651">
                      <wpc:input>
                        <wpc:parameter name="SDP_ORDER_ProvPort" variable="SDP_ORDER_Prov"/>
                        <wpc:parameter name="Transaction_Detail" variable="Transaction_DetailPort"/>
                        <wpc:parameter name="SDP_ORDER_RequestPort" variable="SDP_ORDER_Request"/>
                      </wpc:input>
                    </bpws:reply>
                    <bpws:terminate name="Terminate5" wpc:displayName="Terminate" wpc:id="652"/>
                  </bpws:sequence>
                </bpws:case>
                <bpws:otherwise wpc:id="941">
                  <bpws:sequence name="HiddenSequence1" wpc:id="1073742636">
                    <bpws:invoke name="LogUCDCLDeleteDeviceSuccess2" operation="null" partnerLink="null" portType="wpc:null" wpc:displayName="Log - [UCDCL.DeleteDevice - Success]" wpc:id="654">
                      <wpc:script>
                        <wpc:javaCode><![CDATA[SdpLoggerHelper.logMessage("UCDCL.DeleteDevice -"+SdpLoggerHelper.SUCCESS_STR,PROCESS_NAME,processID,SdpLoggerHelper.INFO);]]></wpc:javaCode>
                      </wpc:script>
                    </bpws:invoke>
                    <bpws:invoke name="SetUMSessionIDUMMessageCenterIP1" operation="null" partnerLink="null" portType="wpc:null" wpc:continueOnError="inherit" wpc:displayName="Set UMSessionID &amp; UMMessageCenterIP" wpc:id="813">
                      <wpc:script>
                        <wpc:javaCode><![CDATA[att.lightspeed.sdp.helper.WpsLogger logger = att.lightspeed.sdp.helper.WpsLogger.getLogger(processInstance());
String UMSessionID = null;
String UMMessageCenterIP = null;

UMSessionID = Transaction_DetailPort.getString(SdpHelper.TRANSDETAIL_UMSESSIONID);
UMMessageCenterIP = Transaction_DetailPort.getString(SdpHelper.TRANSDETAIL_UMMESSAGECENTERIP);

logger.debug("UMSessionID from the DeleteDevice Response: " + UMSessionID);
logger.debug("UMMessageCenterIP from the DeleteDevice Response: " + UMMessageCenterIP);

processBO.setString(SdpHelper.xPathify(SdpHelper.TRANSDETAIL_UMSESSIONID_PATH),UMSessionID);

processBO.setString(SdpHelper.xPathify(SdpHelper.TRANSDETAIL_UMMESSAGECENTERIP_PATH),UMMessageCenterIP);]]></wpc:javaCode>
                      </wpc:script>
                    </bpws:invoke>
                  </bpws:sequence>
                </bpws:otherwise>
              </bpws:switch>
            </bpws:sequence>
          </bpws:case>
        </bpws:switch>
        <bpws:switch name="NeedstoRollBackDeleteDevice" wpc:displayName="Needs to RollBack DeleteDevice" wpc:id="579">
          <bpws:case wpc:id="580">
            <bpws:condition><![CDATA[boolean proceed = false;
String strOperation = null;

if (currentTempStore != null && currentMailbox != null)
{
	strOperation = currentTempStore.getString(SdpHelper.TEMP2);
	
	if (strOperation != null && strOperation.equalsIgnoreCase("DELETE_DEVICE"))
	{
		proceed = true;
	}
}

return proceed;]]></bpws:condition>
            <bpws:sequence name="HiddenSequence8" wpc:id="1073742623">
              <bpws:assign name="PreInvokeAssigns10" wpc:displayName="Pre Invoke Assigns" wpc:id="750">
                <bpws:copy>
                  <bpws:from variable="currentMailbox">
                    <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/mailBoxInvariantId]]></bpws:query>
                  </bpws:from>
                  <bpws:to variable="ucdclEmailOrPhone"/>
                </bpws:copy>
                <bpws:copy>
                  <bpws:from variable="ADL_Line">
                    <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/tnInfo/tn]]></bpws:query>
                  </bpws:from>
                  <bpws:to variable="ucdclDeviceNumber"/>
                </bpws:copy>
                <bpws:copy>
                  <bpws:from>Landline</bpws:from>
                  <bpws:to variable="ucdclDeviceType"/>
                </bpws:copy>
                <bpws:copy>
                  <bpws:from variable="EmptyTransaction_Detail"/>
                  <bpws:to variable="Transaction_DetailPort"/>
                </bpws:copy>
                <bpws:copy>
                  <bpws:from>UCDCL.AddDevice.request</bpws:from>
                  <bpws:to variable="Transaction_DetailPort">
                    <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/State]]></bpws:query>
                  </bpws:to>
                </bpws:copy>
                <bpws:copy>
                  <bpws:from>UCDCL</bpws:from>
                  <bpws:to variable="Transaction_DetailPort">
                    <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/errorDetails/Error/TargetSystem]]></bpws:query>
                  </bpws:to>
                </bpws:copy>
                <bpws:copy>
                  <bpws:from>AddDevice</bpws:from>
                  <bpws:to variable="Transaction_DetailPort">
                    <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/currentTargetOperation]]></bpws:query>
                  </bpws:to>
                </bpws:copy>
                <bpws:copy>
                  <bpws:from variable="SDP_ORDER_ProvProc">
                    <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/order/ReqService/product/cvoipProduct/cfn]]></bpws:query>
                  </bpws:from>
                  <bpws:to variable="ucdclDeviceCFN"/>
                </bpws:copy>
                <bpws:copy>
                  <bpws:from>SIP</bpws:from>
                  <bpws:to variable="ucdclTransportMWI"/>
                </bpws:copy>
                <bpws:copy>
                  <bpws:from variable="currentMailbox">
                    <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[mailBoxInvariantId]]></bpws:query>
                  </bpws:from>
                  <bpws:to variable="processBO">
                    <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[order/ReqService/product/cvoipProduct/accountMailBoxes[1]/mailBoxInvariantId]]></bpws:query>
                  </bpws:to>
                </bpws:copy>
                <bpws:copy>
                  <bpws:from variable="ADL_Line">
                    <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[tnInfo/tn]]></bpws:query>
                  </bpws:from>
                  <bpws:to variable="processBO">
                    <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[order/ReqService/product/cvoipProduct/cvoipLineSubComponent[1]/tnInfo/tn]]></bpws:query>
                  </bpws:to>
                </bpws:copy>
                <bpws:copy>
                  <bpws:from variable="SDP_ORDER_ProvProc">
                    <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[order/ReqService/product/cvoipProduct/cfn]]></bpws:query>
                  </bpws:from>
                  <bpws:to variable="processBO">
                    <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[order/ReqService/product/cvoipProduct/cfn]]></bpws:query>
                  </bpws:to>
                </bpws:copy>
              </bpws:assign>
              <bpws:invoke name="LogUCDCLAddDevice1" operation="null" partnerLink="null" portType="wpc:null" wpc:displayName="Log - [UCDCL.AddDevice ] " wpc:id="752">
                <wpc:script>
                  <wpc:javaCode><![CDATA[SdpLoggerHelper.logMessage(SdpLoggerHelper.INVOKE_STR +" : UCDCL.AddDevice",PROCESS_NAME,processID,SdpLoggerHelper.INFO);
														
SdpLoggerHelper.logMessage("ucdclEmailOrPhone:"+ucdclEmailOrPhone,PROCESS_NAME,processID,SdpLoggerHelper.INFO);
														
SdpLoggerHelper.logMessage("ucdclDeviceNumber:"+ucdclDeviceNumber,PROCESS_NAME,processID,SdpLoggerHelper.INFO);
														
SdpLoggerHelper.logMessage("ucdclDeviceType:"+ucdclDeviceType,PROCESS_NAME,processID,SdpLoggerHelper.INFO);
														
SdpLoggerHelper.logMessage("ucdclDeviceCFN:"+ucdclDeviceCFN,PROCESS_NAME,processID,SdpLoggerHelper.INFO);
														
SdpLoggerHelper.logMessage("ucdclAuthentication:"+ucdclAuthentication,PROCESS_NAME,processID,SdpLoggerHelper.INFO);

SdpLoggerHelper.logMessage("ucdclTransportMWI:"+ucdclTransportMWI,PROCESS_NAME,processID,SdpLoggerHelper.INFO);]]></wpc:javaCode>
                </wpc:script>
              </bpws:invoke>
              <bpws:invoke name="InvokeUCDCLAddDevice" operation="addDevice" partnerLink="UcdclCompensableService_InterfacePartner" portType="ns18:UCDCLCompensableService_Interface" wpc:displayName="Invoke - [UCDCL.AddDevice]" wpc:id="753">
                <wpc:input>
                  <wpc:parameter name="order" variable="processBO"/>
                </wpc:input>
                <wpc:output>
                  <wpc:parameter name="transactionDetail" variable="Transaction_DetailPort"/>
                </wpc:output>
                <bpws:catch faultName="wpc:runtimeFailure" faultVariable="bpcFault" wpc:faultType="wpc:BPCStandardFaultType" wpc:id="943" wpc:variableId="754">
                  <bpws:invoke name="Handleruntimefailures2" operation="null" partnerLink="null" portType="wpc:null" wpc:displayName="handle runtime failures" wpc:id="756">
                    <wpc:script>
                      <wpc:javaCode><![CDATA[SdpErrorHelper.setErrDetInTransDet(Transaction_DetailPort,bpcFault,SdpErrorHelper.SEVERITY_FATAL);
SdpLoggerHelper.logMessage(SdpLoggerHelper.RUNTIME_FAILURE+"  UCDCL.AddDevice",PROCESS_NAME,processID,SdpLoggerHelper.FATAL);]]></wpc:javaCode>
                    </wpc:script>
                  </bpws:invoke>
                </bpws:catch>
                <bpws:catch faultName="ns18:serviceCallFault" faultVariable="scFault" wpc:faultType="java:ServiceCallFault" wpc:id="944" wpc:variableId="757">
                  <bpws:invoke name="SetErrorDetails2" operation="null" partnerLink="null" portType="wpc:null" wpc:displayName="Set Error Details" wpc:id="759">
                    <wpc:script>
                      <wpc:javaCode><![CDATA[Transaction_DetailPort.setBoolean(SdpHelper.ERRORINDICATOR,true);

new att.lightspeed.sdp.helper.TransactionDetail(Transaction_DetailPort).setSDPErrorMessage(scFault);

Transaction_DetailPort.getDataObject("errorDetails").getDataObject("Error").setString("Severity",SdpErrorHelper.SEVERITY_FATAL);

 
SdpLoggerHelper.logMessage(SdpLoggerHelper.FAULT_FAILURE +"  UCDCL.AddDevice",PROCESS_NAME,processID,SdpLoggerHelper.FATAL); 
 ]]></wpc:javaCode>
                    </wpc:script>
                  </bpws:invoke>
                </bpws:catch>
                <bpws:catchAll wpc:id="942">
                  <bpws:invoke name="Handleruntimefailures3" operation="null" partnerLink="null" portType="wpc:null" wpc:displayName="handle runtime failures" wpc:id="764">
                    <wpc:script>
                      <wpc:javaCode><![CDATA[SdpErrorHelper.setErrDetInTransDet(Transaction_DetailPort,null,SdpErrorHelper.SEVERITY_FATAL);
SdpLoggerHelper.logMessage(SdpLoggerHelper.FAULT_FAILURE +"  UCDCL.AddDevice",PROCESS_NAME,processID,SdpLoggerHelper.FATAL);]]></wpc:javaCode>
                    </wpc:script>
                  </bpws:invoke>
                </bpws:catchAll>
              </bpws:invoke>
              <bpws:switch name="UCDCLError3" wpc:displayName="UCDCL Error?" wpc:id="765">
                <bpws:case wpc:id="766">
                  <bpws:condition><![CDATA[boolean __result__1 = com.ibm.wbiservers.brules.core.codegen.NillableUtility.getBoolean(Transaction_DetailPort, "errorIndicator", "Transaction_DetailPort");
return __result__1;

//@generated:com.ibm.wbit.activity.ui
//<?xml version="1.0" encoding="UTF-8"?>
//<com.ibm.wbit.activity:CompositeActivity xmi:version="2.0" xmlns:xmi="http://www.omg.org/XMI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:com.ibm.wbit.activity="http:///com/ibm/wbit/activity.ecore" name="ActivityMethod">
//  <result name="Result">
//    <type xsi:type="com.ibm.wbit.activity:JavaElementType" name="boolean"/>
//  </result>
//  <exceptions>
//    <type xsi:type="com.ibm.wbit.activity:JavaElementType" name="com.ibm.bpe.api.ProcessException"/>
//  </exceptions>
//  <executableElements xsi:type="com.ibm.wbit.activity:Expression" value="Transaction_DetailPort.errorIndicator" field="true">
//    <dataOutputs target="//@executableElements.1"/>
//    <type xsi:type="com.ibm.wbit.activity:XSDElementType" name="boolean" namespace="http://www.w3.org/2001/XMLSchema" nillable="false"/>
//  </executableElements>
//  <executableElements xsi:type="com.ibm.wbit.activity:ReturnElement" dataInputs="//@executableElements.0/@dataOutputs.0"/>
//  <executableGroups executableElements="//@executableElements.0 //@executableElements.1"/>
//</com.ibm.wbit.activity:CompositeActivity>
//@generated:end
//!SMAP!*S WBIACTDBG
//!SMAP!*L
//!SMAP!1:1,1
//!SMAP!2:2,1
//!SMAP!1000000:26,1]]></bpws:condition>
                  <bpws:sequence name="HiddenSequence18" wpc:id="1073742625">
                    <bpws:invoke name="LogUCDCLAddDeviceError1" operation="null" partnerLink="null" portType="wpc:null" wpc:displayName="Log - [UCDCL.AddDevice - Error]" wpc:id="769">
                      <wpc:script>
                        <wpc:javaCode><![CDATA[String strSeverity =Transaction_DetailPort.getString("errorDetails/Error/Severity");
int logLevel = SdpHelper.getLogLevel(strSeverity);
SdpLoggerHelper.logMessage(" UCDCL.AddDevice- "+SdpLoggerHelper.ERROR_STR+"["+strSeverity+"]",PROCESS_NAME,processID,logLevel);]]></wpc:javaCode>
                      </wpc:script>
                    </bpws:invoke>
                    <bpws:assign name="PrepareGBOForLogging4" wpc:displayName="Prepare GBO For Logging" wpc:id="770">
                      <bpws:copy>
                        <bpws:from variable="Transaction_DetailPort">
                          <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/State]]></bpws:query>
                        </bpws:from>
                        <bpws:to variable="STATE"/>
                      </bpws:copy>
                      <bpws:copy>
                        <bpws:from variable="Transaction_DetailPort">
                          <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/errorDetails/Error/Severity]]></bpws:query>
                        </bpws:from>
                        <bpws:to variable="SEVERITY"/>
                      </bpws:copy>
                      <bpws:copy>
                        <bpws:from variable="Transaction_DetailPort">
                          <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/errorDetails/Error/Message]]></bpws:query>
                        </bpws:from>
                        <bpws:to variable="SDP_ERROR_OBJECT_MESSAGE"/>
                      </bpws:copy>
                      <bpws:copy>
                        <bpws:from variable="Transaction_DetailPort">
                          <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/errorDetails/Error/TargetSystem]]></bpws:query>
                        </bpws:from>
                        <bpws:to variable="TARGET_SYSTEM_NAME"/>
                      </bpws:copy>
                      <bpws:copy>
                        <bpws:from>true</bpws:from>
                        <bpws:to variable="MANUAL_INTERVENTION_FLAG"/>
                      </bpws:copy>
                      <bpws:copy>
                        <bpws:from variable="Transaction_DetailPort">
                          <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/currentTargetOperation]]></bpws:query>
                        </bpws:from>
                        <bpws:to variable="TARGET_OPERATION_NAME"/>
                      </bpws:copy>
                      <bpws:copy>
                        <bpws:from variable="Transaction_DetailPort">
                          <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/errorDetails/Error/Message]]></bpws:query>
                        </bpws:from>
                        <bpws:to variable="SDP_ORDER_RequestProc">
                          <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/transactionDetail/errorDetails/Error/Message]]></bpws:query>
                        </bpws:to>
                      </bpws:copy>
                    </bpws:assign>
                    <bpws:invoke name="LogCommonErrorLogger6" operation="null" partnerLink="null" portType="wpc:null" wpc:displayName="Log - [ CommonErrorLogger] " wpc:id="772">
                      <wpc:script>
                        <wpc:javaCode><![CDATA[SdpLoggerHelper.logMessage("Invoking CommonErrorLogger:",PROCESS_NAME,processID,SdpLoggerHelper.INFO);

SDP_ORDER_RequestProc.setString(SdpHelper.TEMPSTRING1_PATH.replace('.','/'),processID);	]]></wpc:javaCode>
                      </wpc:script>
                    </bpws:invoke>
                    <bpws:invoke name="InvokeLogError3" operation="logErrorDetails" partnerLink="FromSdp_CommonErrorLogger_Interface" portType="ns12:FromSdp_CommonErrorLogger_Interface" wpc:displayName="Invoke Log Error" wpc:id="773">
                      <wpc:input>
                        <wpc:parameter name="transactionState" variable="STATE"/>
                        <wpc:parameter name="targetOperation" variable="TARGET_OPERATION_NAME"/>
                        <wpc:parameter name="parentProcessName" variable="PARENT_PROCESS_NAME"/>
                        <wpc:parameter name="sdpOrder" variable="SDP_ORDER_RequestProc"/>
                        <wpc:parameter name="manualInterventionInd" variable="MANUAL_INTERVENTION_FLAG"/>
                        <wpc:parameter name="severity" variable="SEVERITY"/>
                        <wpc:parameter name="targetSystem" variable="TARGET_SYSTEM_NAME"/>
                        <wpc:parameter name="sdpErrorObjectMessage" variable="SDP_ERROR_OBJECT_MESSAGE"/>
                      </wpc:input>
                      <wpc:output>
                        <wpc:parameter name="response" variable="Transaction_Error"/>
                      </wpc:output>
                    </bpws:invoke>
                    <bpws:invoke name="LogCommonErrorLogger7" operation="null" partnerLink="null" portType="wpc:null" wpc:displayName="Log - [CommonErrorLogger ] " wpc:id="775">
                      <wpc:script>
                        <wpc:javaCode><![CDATA[SdpLoggerHelper.logMessage(" CommonErrorLogger",PROCESS_NAME,processID,SdpLoggerHelper.INFO);]]></wpc:javaCode>
                      </wpc:script>
                    </bpws:invoke>
                    <bpws:assign name="Copyproctotrigg3" wpc:displayName="copy proc to trigg" wpc:id="776">
                      <bpws:copy>
                        <bpws:from variable="SDP_ORDER_RequestProc"/>
                        <bpws:to variable="SDP_ORDER_Request"/>
                      </bpws:copy>
                      <bpws:copy>
                        <bpws:from variable="SDP_ORDER_ProvProc"/>
                        <bpws:to variable="SDP_ORDER_Prov"/>
                      </bpws:copy>
                    </bpws:assign>
                    <bpws:reply name="Reply7" operation="compensateUpdateMailBox" partnerLink="UpdateMailBox_Compensation_Interface" portType="ns11:UpdateMailBox_Compensation_Interface" wpc:displayName="Reply" wpc:id="777">
                      <wpc:input>
                        <wpc:parameter name="SDP_ORDER_ProvPort" variable="SDP_ORDER_Prov"/>
                        <wpc:parameter name="Transaction_Detail" variable="Transaction_DetailPort"/>
                        <wpc:parameter name="SDP_ORDER_RequestPort" variable="SDP_ORDER_Request"/>
                      </wpc:input>
                    </bpws:reply>
                    <bpws:terminate name="Terminate6" wpc:displayName="Terminate" wpc:id="778"/>
                  </bpws:sequence>
                </bpws:case>
                <bpws:otherwise wpc:id="945">
                  <bpws:sequence name="HiddenSequence2" wpc:id="1073742638">
                    <bpws:invoke name="LogUCDCLAddDeviceSuccess2" operation="null" partnerLink="null" portType="wpc:null" wpc:displayName="Log - [UCDCL.AddDevice - Success]" wpc:id="780">
                      <wpc:script>
                        <wpc:javaCode><![CDATA[SdpLoggerHelper.logMessage(" UCDCL.AddDevice -"+SdpLoggerHelper.SUCCESS_STR,PROCESS_NAME,processID,SdpLoggerHelper.INFO);]]></wpc:javaCode>
                      </wpc:script>
                    </bpws:invoke>
                    <bpws:invoke name="SetUMSessionIDUMMessageCenterIP2" operation="null" partnerLink="null" portType="wpc:null" wpc:continueOnError="inherit" wpc:displayName="Set UMSessionID &amp; UMMessageCenterIP" wpc:id="815">
                      <wpc:script>
                        <wpc:javaCode><![CDATA[att.lightspeed.sdp.helper.WpsLogger logger = att.lightspeed.sdp.helper.WpsLogger.getLogger(processInstance());
String UMSessionID = null;
String UMMessageCenterIP = null;

UMSessionID = Transaction_DetailPort.getString(SdpHelper.TRANSDETAIL_UMSESSIONID);
UMMessageCenterIP = Transaction_DetailPort.getString(SdpHelper.TRANSDETAIL_UMMESSAGECENTERIP);

logger.debug("UMSessionID from the addDevice Response: " + UMSessionID);
logger.debug("UMMessageCenterIP from the addDevice Response: " + UMMessageCenterIP);

processBO.setString(SdpHelper.xPathify(SdpHelper.TRANSDETAIL_UMSESSIONID_PATH),UMSessionID);

processBO.setString(SdpHelper.xPathify(SdpHelper.TRANSDETAIL_UMMESSAGECENTERIP_PATH),UMMessageCenterIP);]]></wpc:javaCode>
                      </wpc:script>
                    </bpws:invoke>
                  </bpws:sequence>
                </bpws:otherwise>
              </bpws:switch>
            </bpws:sequence>
          </bpws:case>
        </bpws:switch>
        <bpws:assign name="PreInvokeAssigns9" wpc:displayName="Pre Invoke Assigns" wpc:id="693">
          <bpws:copy>
            <bpws:from><![CDATA[UCDCL.Logout.Request]]></bpws:from>
            <bpws:to variable="Transaction_DetailPort">
              <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/State]]></bpws:query>
            </bpws:to>
          </bpws:copy>
          <bpws:copy>
            <bpws:from>UCDCL</bpws:from>
            <bpws:to variable="Transaction_DetailPort">
              <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/errorDetails/Error/TargetSystem]]></bpws:query>
            </bpws:to>
          </bpws:copy>
          <bpws:copy>
            <bpws:from><![CDATA[Logout]]></bpws:from>
            <bpws:to variable="Transaction_DetailPort">
              <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/currentTargetOperation]]></bpws:query>
            </bpws:to>
          </bpws:copy>
        </bpws:assign>
        <bpws:invoke name="LogUCDCLLogout" operation="null" partnerLink="null" portType="wpc:null" wpc:displayName="Log - [UCDCL.Logout]" wpc:id="696">
          <wpc:script>
            <wpc:javaCode><![CDATA[SdpLoggerHelper.logMessage(SdpLoggerHelper.INVOKE_STR +" : UCDCL.Logout",
	PROCESS_NAME,processID,SdpLoggerHelper.INFO);
]]></wpc:javaCode>
          </wpc:script>
        </bpws:invoke>
        <bpws:invoke name="InvokeUCDCLLogout" operation="provisioningServiceLogout" partnerLink="UcdclCompensableService_InterfacePartner" portType="ns18:UCDCLCompensableService_Interface" wpc:displayName="Invoke - [UCDCL.Logout]" wpc:id="705">
          <wpc:input>
            <wpc:parameter name="transactionDetail" variable="Transaction_DetailPort"/>
          </wpc:input>
          <wpc:output/>
          <bpws:catch faultName="wpc:runtimeFailure" faultVariable="bpcFault" wpc:faultType="wpc:BPCStandardFaultType" wpc:id="931" wpc:variableId="706">
            <bpws:invoke name="Handleruntimefailures" operation="null" partnerLink="null" portType="wpc:null" wpc:displayName="handle runtime failures" wpc:id="708">
              <wpc:script>
                <wpc:javaCode><![CDATA[SdpErrorHelper.setErrDetInTransDet(Transaction_DetailPort,bpcFault,SdpErrorHelper.SEVERITY_FATAL);

SdpLoggerHelper.logMessage(SdpLoggerHelper.RUNTIME_FAILURE+"  UCDCL.Logout",PROCESS_NAME,processID,SdpLoggerHelper.FATAL);]]></wpc:javaCode>
              </wpc:script>
            </bpws:invoke>
          </bpws:catch>
          <bpws:catch faultName="ns18:serviceCallFault" faultVariable="scFault" wpc:faultType="java:ServiceCallFault" wpc:id="932" wpc:variableId="709">
            <bpws:invoke name="SetErrorDetails" operation="null" partnerLink="null" portType="wpc:null" wpc:displayName="Set Error Details" wpc:id="711">
              <wpc:script>
                <wpc:javaCode><![CDATA[Transaction_DetailPort.setBoolean(SdpHelper.ERRORINDICATOR,true);

new att.lightspeed.sdp.helper.TransactionDetail(Transaction_DetailPort).setSDPErrorMessage(scFault);

Transaction_DetailPort.getDataObject("errorDetails").getDataObject("Error").setString("Severity",SdpErrorHelper.SEVERITY_FATAL);

 
SdpLoggerHelper.logMessage(SdpLoggerHelper.FAULT_FAILURE +"  UCDCL.Logout",PROCESS_NAME,processID,SdpLoggerHelper.FATAL);
 ]]></wpc:javaCode>
              </wpc:script>
            </bpws:invoke>
          </bpws:catch>
          <bpws:catchAll wpc:id="930">
            <bpws:invoke name="Handleruntimefailures1" operation="null" partnerLink="null" portType="wpc:null" wpc:displayName="handle runtime failures" wpc:id="716">
              <wpc:script>
                <wpc:javaCode><![CDATA[SdpErrorHelper.setErrDetInTransDet(Transaction_DetailPort,null,SdpErrorHelper.SEVERITY_FATAL);

SdpLoggerHelper.logMessage(SdpLoggerHelper.UNKNOWN_FAILURE+"  UCDCL.Logout",PROCESS_NAME,processID,SdpLoggerHelper.FATAL);]]></wpc:javaCode>
              </wpc:script>
            </bpws:invoke>
          </bpws:catchAll>
        </bpws:invoke>
        <bpws:switch name="UCDCLError1" wpc:displayName="UCDCL Error?" wpc:id="729">
          <bpws:case wpc:id="730">
            <bpws:condition><![CDATA[boolean __result__1 = com.ibm.wbiservers.brules.core.codegen.NillableUtility.getBoolean(Transaction_DetailPort, "errorIndicator", "Transaction_DetailPort");
return __result__1;

//@generated:com.ibm.wbit.activity.ui
//<?xml version="1.0" encoding="UTF-8"?>
//<com.ibm.wbit.activity:CompositeActivity xmi:version="2.0" xmlns:xmi="http://www.omg.org/XMI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:com.ibm.wbit.activity="http:///com/ibm/wbit/activity.ecore" name="ActivityMethod">
//  <result name="Result">
//    <type xsi:type="com.ibm.wbit.activity:JavaElementType" name="boolean"/>
//  </result>
//  <exceptions>
//    <type xsi:type="com.ibm.wbit.activity:JavaElementType" name="com.ibm.bpe.api.ProcessException"/>
//  </exceptions>
//  <executableElements xsi:type="com.ibm.wbit.activity:Expression" value="Transaction_DetailPort.errorIndicator" field="true">
//    <dataOutputs target="//@executableElements.1"/>
//    <type xsi:type="com.ibm.wbit.activity:XSDElementType" name="boolean" namespace="http://www.w3.org/2001/XMLSchema" nillable="false"/>
//  </executableElements>
//  <executableElements xsi:type="com.ibm.wbit.activity:ReturnElement" dataInputs="//@executableElements.0/@dataOutputs.0"/>
//  <executableGroups executableElements="//@executableElements.0 //@executableElements.1"/>
//</com.ibm.wbit.activity:CompositeActivity>
//@generated:end
//!SMAP!*S WBIACTDBG
//!SMAP!*L
//!SMAP!1:1,1
//!SMAP!2:2,1
//!SMAP!1000000:26,1]]></bpws:condition>
            <bpws:sequence name="HiddenSequence13" wpc:id="1073742624">
              <bpws:invoke name="LogUCDCLLogoutError" operation="null" partnerLink="null" portType="wpc:null" wpc:displayName="Log - [UCDCL.Logout - Error]" wpc:id="733">
                <wpc:script>
                  <wpc:javaCode><![CDATA[String strSeverity =Transaction_DetailPort.getString("errorDetails/Error/Severity");
int logLevel = SdpHelper.getLogLevel(strSeverity);
SdpLoggerHelper.logMessage(" UCDCL.Logout- "+SdpLoggerHelper.ERROR_STR+"["+strSeverity+"]",PROCESS_NAME,processID,logLevel);]]></wpc:javaCode>
                </wpc:script>
              </bpws:invoke>
              <bpws:assign name="PrepareGBOForLogging3" wpc:displayName="Prepare GBO For Logging" wpc:id="734">
                <bpws:copy>
                  <bpws:from variable="Transaction_DetailPort">
                    <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/State]]></bpws:query>
                  </bpws:from>
                  <bpws:to variable="STATE"/>
                </bpws:copy>
                <bpws:copy>
                  <bpws:from variable="Transaction_DetailPort">
                    <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/errorDetails/Error/Severity]]></bpws:query>
                  </bpws:from>
                  <bpws:to variable="SEVERITY"/>
                </bpws:copy>
                <bpws:copy>
                  <bpws:from variable="Transaction_DetailPort">
                    <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/errorDetails/Error/Message]]></bpws:query>
                  </bpws:from>
                  <bpws:to variable="SDP_ERROR_OBJECT_MESSAGE"/>
                </bpws:copy>
                <bpws:copy>
                  <bpws:from variable="Transaction_DetailPort">
                    <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/errorDetails/Error/TargetSystem]]></bpws:query>
                  </bpws:from>
                  <bpws:to variable="TARGET_SYSTEM_NAME"/>
                </bpws:copy>
                <bpws:copy>
                  <bpws:from>true</bpws:from>
                  <bpws:to variable="MANUAL_INTERVENTION_FLAG"/>
                </bpws:copy>
                <bpws:copy>
                  <bpws:from variable="Transaction_DetailPort">
                    <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/currentTargetOperation]]></bpws:query>
                  </bpws:from>
                  <bpws:to variable="TARGET_OPERATION_NAME"/>
                </bpws:copy>
                <bpws:copy>
                  <bpws:from variable="Transaction_DetailPort">
                    <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/errorDetails/Error/Message]]></bpws:query>
                  </bpws:from>
                  <bpws:to variable="SDP_ORDER_RequestProc">
                    <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/transactionDetail/errorDetails/Error/Message]]></bpws:query>
                  </bpws:to>
                </bpws:copy>
              </bpws:assign>
              <bpws:invoke name="LogCommonErrorLogger4" operation="null" partnerLink="null" portType="wpc:null" wpc:displayName="Log - [CommonErrorLogger ] " wpc:id="736">
                <wpc:script>
                  <wpc:javaCode><![CDATA[SdpLoggerHelper.logMessage("Invoking CommonErrorLogger:",PROCESS_NAME,processID,SdpLoggerHelper.INFO);

SDP_ORDER_RequestProc.setString(SdpHelper.TEMPSTRING1_PATH.replace('.','/'),processID);	
										
																		]]></wpc:javaCode>
                </wpc:script>
              </bpws:invoke>
              <bpws:invoke name="InvokeLogError2" operation="logErrorDetails" partnerLink="FromSdp_CommonErrorLogger_Interface" portType="ns12:FromSdp_CommonErrorLogger_Interface" wpc:displayName="Invoke Log Error" wpc:id="737">
                <wpc:input>
                  <wpc:parameter name="transactionState" variable="STATE"/>
                  <wpc:parameter name="targetOperation" variable="TARGET_OPERATION_NAME"/>
                  <wpc:parameter name="parentProcessName" variable="PARENT_PROCESS_NAME"/>
                  <wpc:parameter name="sdpOrder" variable="SDP_ORDER_RequestProc"/>
                  <wpc:parameter name="manualInterventionInd" variable="MANUAL_INTERVENTION_FLAG"/>
                  <wpc:parameter name="severity" variable="SEVERITY"/>
                  <wpc:parameter name="targetSystem" variable="TARGET_SYSTEM_NAME"/>
                  <wpc:parameter name="sdpErrorObjectMessage" variable="SDP_ERROR_OBJECT_MESSAGE"/>
                </wpc:input>
                <wpc:output>
                  <wpc:parameter name="response" variable="Transaction_Error"/>
                </wpc:output>
              </bpws:invoke>
              <bpws:invoke name="LogCommonErrorLogger5" operation="null" partnerLink="null" portType="wpc:null" wpc:displayName="Log - [CommonErrorLogger ] " wpc:id="739">
                <wpc:script>
                  <wpc:javaCode><![CDATA[SdpLoggerHelper.logMessage(" CommonErrorLogger",PROCESS_NAME,processID,SdpLoggerHelper.INFO);]]></wpc:javaCode>
                </wpc:script>
              </bpws:invoke>
              <bpws:assign name="Copyproctotrigg4" wpc:displayName="copy proc to trigg" wpc:id="740">
                <bpws:copy>
                  <bpws:from variable="SDP_ORDER_RequestProc"/>
                  <bpws:to variable="SDP_ORDER_Request"/>
                </bpws:copy>
                <bpws:copy>
                  <bpws:from variable="SDP_ORDER_ProvProc"/>
                  <bpws:to variable="SDP_ORDER_Prov"/>
                </bpws:copy>
              </bpws:assign>
              <bpws:reply name="Reply4" operation="compensateUpdateMailBox" partnerLink="UpdateMailBox_Compensation_Interface" portType="ns11:UpdateMailBox_Compensation_Interface" wpc:displayName="Reply" wpc:id="741">
                <wpc:input>
                  <wpc:parameter name="SDP_ORDER_ProvPort" variable="SDP_ORDER_Prov"/>
                  <wpc:parameter name="Transaction_Detail" variable="Transaction_DetailPort"/>
                  <wpc:parameter name="SDP_ORDER_RequestPort" variable="SDP_ORDER_Request"/>
                </wpc:input>
              </bpws:reply>
              <bpws:terminate name="Terminate4" wpc:displayName="Terminate" wpc:id="742"/>
            </bpws:sequence>
          </bpws:case>
          <bpws:otherwise wpc:id="936">
            <bpws:invoke name="LogUCDCLLogoutSuccess" operation="null" partnerLink="null" portType="wpc:null" wpc:displayName="Log - [UCDCL.Logout -Success] " wpc:id="744">
              <wpc:script>
                <wpc:javaCode><![CDATA[SdpLoggerHelper.logMessage("UCDCL.Logout -"+SdpLoggerHelper.SUCCESS_STR,PROCESS_NAME,processID,SdpLoggerHelper.INFO);]]></wpc:javaCode>
              </wpc:script>
            </bpws:invoke>
          </bpws:otherwise>
        </bpws:switch>
        <bpws:invoke name="IntCounterintCounter1" operation="null" partnerLink="null" portType="wpc:null" wpc:displayName="intCounter = intCounter - 1" wpc:id="610">
          <wpc:script>
            <wpc:javaCode><![CDATA[intCounter = new Integer(intCounter.intValue() - 1);]]></wpc:javaCode>
          </wpc:script>
        </bpws:invoke>
      </bpws:sequence>
    </bpws:while>
    <bpws:invoke name="SavetheRollBackState" operation="null" partnerLink="null" portType="wpc:null" wpc:displayName="Save the RollBack State" wpc:id="423">
      <wpc:script>
        <wpc:javaCode><![CDATA[int __result__1 = com.ibm.wbiservers.brules.core.codegen.NillableUtility.getInt(com.ibm.wbiservers.brules.core.codegen.NillableUtility.getDataObject(com.ibm.wbiservers.brules.core.codegen.NillableUtility.getDataObject(SDP_ORDER_RequestProc, "transactionDetail", "SDP_ORDER_RequestProc"), "tempStoreNonArray", "transactionDetail"), "temp11", "SDP_ORDER_RequestProc.transactionDetail.tempStoreNonArray");
RollbackState = new java.lang.Integer(__result__1);

//@generated:com.ibm.wbit.activity.ui
//<?xml version="1.0" encoding="UTF-8"?>
//<com.ibm.wbit.activity:CompositeActivity xmi:version="2.0" xmlns:xmi="http://www.omg.org/XMI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:com.ibm.wbit.activity="http:///com/ibm/wbit/activity.ecore" name="ActivityMethod">
//  <exceptions>
//    <type xsi:type="com.ibm.wbit.activity:JavaElementType" name="com.ibm.bpe.api.ProcessException"/>
//  </exceptions>
//  <executableElements xsi:type="com.ibm.wbit.activity:Expression" value="SDP_ORDER_RequestProc.transactionDetail.tempStoreNonArray.temp11" field="true">
//    <dataOutputs target="//@executableElements.1"/>
//    <type xsi:type="com.ibm.wbit.activity:XSDElementType" name="int" namespace="http://www.w3.org/2001/XMLSchema" nillable="false"/>
//  </executableElements>
//  <executableElements xsi:type="com.ibm.wbit.activity:Expression" dataInputs="//@executableElements.0/@dataOutputs.0" value="RollbackState" variable="true">
//    <type xsi:type="com.ibm.wbit.activity:XSDElementType" name="int" namespace="http://www.w3.org/2001/XMLSchema"/>
//  </executableElements>
//  <executableGroups executableElements="//@executableElements.0 //@executableElements.1"/>
//</com.ibm.wbit.activity:CompositeActivity>
//@generated:end
//!SMAP!*S WBIACTDBG
//!SMAP!*L
//!SMAP!1:1,1
//!SMAP!2:2,1
//!SMAP!1000000:25,1]]></wpc:javaCode>
      </wpc:script>
    </bpws:invoke>
    <bpws:invoke name="Initializecounter" operation="null" partnerLink="null" portType="wpc:null" wpc:displayName="initialize counter" wpc:id="426">
      <wpc:script>
        <wpc:javaCode><![CDATA[int __result__1 = com.ibm.wbiservers.brules.core.codegen.NillableUtility.getList(com.ibm.wbiservers.brules.core.codegen.NillableUtility.getDataObject(com.ibm.wbiservers.brules.core.codegen.NillableUtility.getDataObject(com.ibm.wbiservers.brules.core.codegen.NillableUtility.getDataObject(com.ibm.wbiservers.brules.core.codegen.NillableUtility.getDataObject(SDP_ORDER_RequestProc, "order", "SDP_ORDER_RequestProc"), "ReqService", "order"), "product", "ReqService"), "cvoipProduct", "product"), "accountMailBoxes", "SDP_ORDER_RequestProc.order.ReqService.product.cvoipProduct").size() - 1;
intReqSubMBoxCounter = new java.lang.Integer(__result__1);
com.ibm.wbiservers.brules.core.codegen.NillableUtility.getList(emptyMailBox, "mailBoxTNs", "emptyMailBox").clear();

//@generated:com.ibm.wbit.activity.ui
//<?xml version="1.0" encoding="UTF-8"?>
//<com.ibm.wbit.activity:CompositeActivity xmi:version="2.0" xmlns:xmi="http://www.omg.org/XMI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:com.ibm.wbit.activity="http:///com/ibm/wbit/activity.ecore" name="ActivityMethod">
//  <exceptions>
//    <type xsi:type="com.ibm.wbit.activity:JavaElementType" name="com.ibm.bpe.api.ProcessException"/>
//  </exceptions>
//  <executableElements xsi:type="com.ibm.wbit.activity:Expression" value="SDP_ORDER_RequestProc.order.ReqService.product.cvoipProduct.accountMailBoxes.size()-1" assignable="false">
//    <dataOutputs target="//@executableElements.1"/>
//    <type xsi:type="com.ibm.wbit.activity:JavaElementType" name="int"/>
//  </executableElements>
//  <executableElements xsi:type="com.ibm.wbit.activity:Expression" dataInputs="//@executableElements.0/@dataOutputs.0" value="intReqSubMBoxCounter" variable="true">
//    <type xsi:type="com.ibm.wbit.activity:XSDElementType" name="int" namespace="http://www.w3.org/2001/XMLSchema"/>
//  </executableElements>
//  <executableElements xsi:type="com.ibm.wbit.activity:Expression" value="emptyMailBox.mailBoxTNs.clear()" assignable="false">
//    <type xsi:type="com.ibm.wbit.activity:JavaElementType" name="void"/>
//  </executableElements>
//  <executableGroups executableElements="//@executableElements.0 //@executableElements.1"/>
//  <executableGroups executableElements="//@executableElements.2"/>
//</com.ibm.wbit.activity:CompositeActivity>
//@generated:end
//!SMAP!*S WBIACTDBG
//!SMAP!*L
//!SMAP!1:1,1
//!SMAP!2:2,1
//!SMAP!3:3,1
//!SMAP!1000000:31,1]]></wpc:javaCode>
      </wpc:script>
    </bpws:invoke>
    <bpws:while name="ForeachMailBoxinRequest" wpc:displayName="For each MailBox in Request" wpc:id="91">
      <bpws:condition><![CDATA[boolean __result__1 = intReqSubMBoxCounter.intValue() >= 0;
return __result__1;
]]></bpws:condition>
      <bpws:sequence name="HiddenSequence10" wpc:id="1073742621">
        <bpws:invoke name="GetSubMailBoxinRequest" operation="null" partnerLink="null" portType="wpc:null" wpc:displayName="Get Sub MailBox in Request" wpc:id="170">
          <wpc:script>
            <wpc:javaCode><![CDATA[java.lang.Object __result__1 = com.ibm.wbiservers.brules.core.codegen.NillableUtility.getList(com.ibm.wbiservers.brules.core.codegen.NillableUtility.getDataObject(com.ibm.wbiservers.brules.core.codegen.NillableUtility.getDataObject(com.ibm.wbiservers.brules.core.codegen.NillableUtility.getDataObject(com.ibm.wbiservers.brules.core.codegen.NillableUtility.getDataObject(SDP_ORDER_RequestProc, "order", "SDP_ORDER_RequestProc"), "ReqService", "order"), "product", "ReqService"), "cvoipProduct", "product"), "accountMailBoxes", "SDP_ORDER_RequestProc.order.ReqService.product.cvoipProduct").get(com.ibm.wbiservers.brules.core.codegen.NillableUtility.getInt(intReqSubMBoxCounter, "intReqSubMBoxCounter"));
reqSubMailBox = (commonj.sdo.DataObject)__result__1;

//@generated:com.ibm.wbit.activity.ui
//<?xml version="1.0" encoding="UTF-8"?>
//<com.ibm.wbit.activity:CompositeActivity xmi:version="2.0" xmlns:xmi="http://www.omg.org/XMI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:com.ibm.wbit.activity="http:///com/ibm/wbit/activity.ecore" name="ActivityMethod">
//  <exceptions>
//    <type xsi:type="com.ibm.wbit.activity:JavaElementType" name="com.ibm.bpe.api.ProcessException"/>
//  </exceptions>
//  <executableElements xsi:type="com.ibm.wbit.activity:Expression" value="SDP_ORDER_RequestProc.order.ReqService.product.cvoipProduct.accountMailBoxes.get(intReqSubMBoxCounter)" assignable="false">
//    <dataOutputs target="//@executableElements.1"/>
//    <type xsi:type="com.ibm.wbit.activity:JavaElementType" name="java.lang.Object"/>
//  </executableElements>
//  <executableElements xsi:type="com.ibm.wbit.activity:Expression" dataInputs="//@executableElements.0/@dataOutputs.0" value="reqSubMailBox" variable="true">
//    <type xsi:type="com.ibm.wbit.activity:XSDElementType" name="SDP_AccountMailBoxes" namespace="http://www.ibm.com/websphere/crossworlds/2002/BOSchema/SDP_AccountMailBoxes"/>
//  </executableElements>
//  <executableGroups executableElements="//@executableElements.0 //@executableElements.1"/>
//</com.ibm.wbit.activity:CompositeActivity>
//@generated:end
//!SMAP!*S WBIACTDBG
//!SMAP!*L
//!SMAP!1:1,1
//!SMAP!2:2,1
//!SMAP!1000000:25,1]]></wpc:javaCode>
          </wpc:script>
        </bpws:invoke>
        <bpws:invoke name="GetSubMailBoxinMPS" operation="null" partnerLink="null" portType="wpc:null" wpc:displayName="Get Sub MailBox in MPS" wpc:id="274">
          <wpc:script>
            <wpc:javaCode><![CDATA[boolean __result__1 = SDP_ORDER_ProvProc.getDataObject("order").getDataObject("ReqService").getDataObject("product").getDataObject("cvoipProduct").getList("accountMailBoxes").size() > intReqSubMBoxCounter.intValue();
if (__result__1){
	commonj.sdo.DataObject __result__4 = (commonj.sdo.DataObject)SDP_ORDER_ProvProc.getDataObject("order").getDataObject("ReqService").getDataObject("product").getDataObject("cvoipProduct").getList("accountMailBoxes").get(intReqSubMBoxCounter.intValue());
	provSubMailBox = __result__4;
}
else{
	provSubMailBox = emptyMailBox;
}
]]></wpc:javaCode>
          </wpc:script>
        </bpws:invoke>
        <bpws:invoke name="Initializecounter2" operation="null" partnerLink="null" portType="wpc:null" wpc:displayName="initialize counter" wpc:id="522">
          <wpc:script>
            <wpc:javaCode><![CDATA[int __result__1 = com.ibm.wbiservers.brules.core.codegen.NillableUtility.getList(reqSubMailBox, "mailBoxTNs", "reqSubMailBox").size() - 1;
intReqTNCounter = new java.lang.Integer(__result__1);

//@generated:com.ibm.wbit.activity.ui
//<?xml version="1.0" encoding="UTF-8"?>
//<com.ibm.wbit.activity:CompositeActivity xmi:version="2.0" xmlns:xmi="http://www.omg.org/XMI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:com.ibm.wbit.activity="http:///com/ibm/wbit/activity.ecore" name="ActivityMethod">
//  <exceptions>
//    <type xsi:type="com.ibm.wbit.activity:JavaElementType" name="com.ibm.bpe.api.ProcessException"/>
//  </exceptions>
//  <executableElements xsi:type="com.ibm.wbit.activity:Expression" value="reqSubMailBox.mailBoxTNs.size()-1" assignable="false">
//    <dataOutputs target="//@executableElements.1"/>
//    <type xsi:type="com.ibm.wbit.activity:JavaElementType" name="int"/>
//  </executableElements>
//  <executableElements xsi:type="com.ibm.wbit.activity:Expression" dataInputs="//@executableElements.0/@dataOutputs.0" value="intReqTNCounter" variable="true">
//    <type xsi:type="com.ibm.wbit.activity:XSDElementType" name="int" namespace="http://www.w3.org/2001/XMLSchema"/>
//  </executableElements>
//  <executableGroups executableElements="//@executableElements.0 //@executableElements.1"/>
//</com.ibm.wbit.activity:CompositeActivity>
//@generated:end
//!SMAP!*S WBIACTDBG
//!SMAP!*L
//!SMAP!1:1,1
//!SMAP!2:2,1
//!SMAP!1000000:25,1]]></wpc:javaCode>
          </wpc:script>
        </bpws:invoke>
        <bpws:while name="ForEachTNinReq" wpc:displayName="For Each TN in Req" wpc:id="516">
          <bpws:condition><![CDATA[boolean __result__1 = com.ibm.wbiservers.brules.core.codegen.NillableUtility.getInt(intReqTNCounter, "intReqTNCounter") >= 0;
return __result__1;

//@generated:com.ibm.wbit.activity.ui
//<?xml version="1.0" encoding="UTF-8"?>
//<com.ibm.wbit.activity:CompositeActivity xmi:version="2.0" xmlns:xmi="http://www.omg.org/XMI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:com.ibm.wbit.activity="http:///com/ibm/wbit/activity.ecore" name="ActivityMethod">
//  <result name="Result">
//    <type xsi:type="com.ibm.wbit.activity:JavaElementType" name="boolean"/>
//  </result>
//  <exceptions>
//    <type xsi:type="com.ibm.wbit.activity:JavaElementType" name="com.ibm.bpe.api.ProcessException"/>
//  </exceptions>
//  <executableElements xsi:type="com.ibm.wbit.activity:Expression" value="intReqTNCounter >=0" assignable="false">
//    <dataOutputs target="//@executableElements.1"/>
//    <type xsi:type="com.ibm.wbit.activity:JavaElementType" name="boolean"/>
//  </executableElements>
//  <executableElements xsi:type="com.ibm.wbit.activity:ReturnElement" dataInputs="//@executableElements.0/@dataOutputs.0"/>
//  <executableGroups executableElements="//@executableElements.0 //@executableElements.1"/>
//</com.ibm.wbit.activity:CompositeActivity>
//@generated:end
//!SMAP!*S WBIACTDBG
//!SMAP!*L
//!SMAP!1:1,1
//!SMAP!2:2,1
//!SMAP!1000000:26,1]]></bpws:condition>
          <bpws:sequence name="HiddenSequence7" wpc:id="1073742620">
            <bpws:invoke name="FinalizetheRollBackState" operation="null" partnerLink="null" portType="wpc:null" wpc:displayName="Finalize the RollBack State" wpc:id="428">
              <wpc:script>
                <wpc:javaCode><![CDATA[boolean __result__1 = (intReqSubMBoxCounter.intValue() < (SDP_ORDER_RequestProc.getDataObject("order").getDataObject("ReqService").getDataObject("product").getDataObject("cvoipProduct").getList("accountMailBoxes").size() - 1)) || (intReqTNCounter.intValue() < (reqSubMailBox.getList("mailBoxTNs").size() - 1));
if (__result__1){
	byte __result__4 = 100;
	SDP_ORDER_RequestProc.getDataObject("transactionDetail").getDataObject("tempStoreNonArray").setInt("temp11", __result__4);
}
else{
	int __local__8 = RollbackState.intValue();
	SDP_ORDER_RequestProc.getDataObject("transactionDetail").getDataObject("tempStoreNonArray").setInt("temp11", __local__8);
}
]]></wpc:javaCode>
              </wpc:script>
            </bpws:invoke>
            <bpws:invoke name="SetMPSValues1" operation="null" partnerLink="null" portType="wpc:null" wpc:displayName="Set MPS Values" wpc:id="371">
              <wpc:script>
                <wpc:javaCode><![CDATA[// R7 Filter setting not required.
/*
com.att.sdp.utility.ContentFilterCreator __result__1 = new com.att.sdp.utility.ContentFilterCreator();
com.att.sdp.utility.ContentFilterCreator tempContentFilter = __result__1;
java.lang.String __result__4 = sbc.lightspeed.sdp.wps.SdpHelper.ACCT_OBJID;
java.lang.String __result__5 = sbc.lightspeed.sdp.wps.SdpHelper.ACCT_OBJID_PATH;
tempContentFilter.addSelectFilter(__result__4, __result__5);
java.lang.String __result__8 = sbc.lightspeed.sdp.wps.SdpHelper.CVOIP_MAILBOX_MAILBOXINVARIANTID;
java.lang.String __result__9 = sbc.lightspeed.sdp.wps.SdpHelper.CVOIP_MAILBOX_MAILBOXINVARIANTID_PATH;
tempContentFilter.addSelectFilter(__result__8, __result__9);
java.lang.String __result__12 = sbc.lightspeed.sdp.wps.SdpHelper.CURRENT_PRODUCT;
java.lang.String __result__13 = sbc.lightspeed.sdp.wps.SdpHelper.CURRENT_PRODUCT_PATH;
tempContentFilter.addSelectFilter(__result__12, __result__13);
java.lang.String __result__16 = sbc.lightspeed.sdp.wps.SdpHelper.CVOIP_MAILBOX_TN;
java.lang.String __result__17 = sbc.lightspeed.sdp.wps.SdpHelper.CVOIP_MAILBOX_TN_PATH;
tempContentFilter.addUpdateFilter(__result__16, __result__17);
commonj.sdo.DataObject __result__20 = tempContentFilter.createFilters();
SDP_ORDER_ForUpdate.getDataObject("transactionDetail").set("contentFilter", __result__20);
*/
]]></wpc:javaCode>
              </wpc:script>
            </bpws:invoke>
            <bpws:assign name="PreInvokeassigns3" wpc:displayName="Pre Invoke assigns" wpc:id="254">
              <bpws:copy>
                <bpws:from variable="SDP_ORDER_RequestProc">
                  <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/transactionDetail]]></bpws:query>
                </bpws:from>
                <bpws:to variable="SDP_ORDER_ForUpdate">
                  <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/transactionDetail]]></bpws:query>
                </bpws:to>
              </bpws:copy>
              <bpws:copy>
                <bpws:from>4</bpws:from>
                <bpws:to variable="UMBState"/>
              </bpws:copy>
              <bpws:copy>
                <bpws:from variable="EmptyTransaction_Detail"/>
                <bpws:to variable="Transaction_DetailPort"/>
              </bpws:copy>
              <bpws:copy>
                <bpws:from>MPS.UpdateOrder.request</bpws:from>
                <bpws:to variable="Transaction_DetailPort">
                  <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/State]]></bpws:query>
                </bpws:to>
              </bpws:copy>
              <bpws:copy>
                <bpws:from>MPS</bpws:from>
                <bpws:to variable="Transaction_DetailPort">
                  <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/errorDetails/Error/TargetSystem]]></bpws:query>
                </bpws:to>
              </bpws:copy>
              <bpws:copy>
                <bpws:from>UpdateOrder</bpws:from>
                <bpws:to variable="Transaction_DetailPort">
                  <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/currentTargetOperation]]></bpws:query>
                </bpws:to>
              </bpws:copy>
              <bpws:copy>
                <bpws:from>MAILBOX</bpws:from>
                <bpws:to variable="SDP_ORDER_ForUpdate">
                  <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/transactionDetail/currentProduct]]></bpws:query>
                </bpws:to>
              </bpws:copy>
            </bpws:assign>
            <bpws:switch name="Choice" wpc:displayName="Choice" wpc:id="445">
              <bpws:case wpc:id="446">
                <bpws:condition><![CDATA[boolean __result__1 = SDP_ORDER_RequestProc.getDataObject("transactionDetail").getDataObject("tempStoreNonArray").getInt("temp11") > UMBState.intValue();
return __result__1;
]]></bpws:condition>
                <bpws:sequence name="HiddenSequence9" wpc:id="1073742619">
                  <bpws:invoke name="AddTNToSubMailBoxandPrepareforMPSUpdate" operation="null" partnerLink="null" portType="wpc:null" wpc:displayName="Add TN To Sub MailBox and Prepare for MPS Update" wpc:id="343">
                    <wpc:script>
                      <wpc:javaCode><![CDATA[commonj.sdo.DataObject __result__2;
{// copy BO
	com.ibm.websphere.bo.BOCopy _copyService = 
	   (com.ibm.websphere.bo.BOCopy) new com.ibm.websphere.sca.ServiceManager().locateService("com/ibm/websphere/bo/BOCopy"); 
	__result__2 = _copyService.copy(reqSubMailBox);
}
tmpSubMBox = __result__2;
SDP_ORDER_ForUpdate.getDataObject("order").getDataObject("ReqService").getDataObject("product").getDataObject("cvoipProduct").getList("accountMailBoxes").clear();
java.util.List __result__5 = SDP_ORDER_ForUpdate.getDataObject("order").getDataObject("ReqService").getDataObject("product").getDataObject("cvoipProduct").getList("accountMailBoxes");
boolean __result__7;
{// add item to list
	__result__7 = __result__5.add(tmpSubMBox);
}
]]></wpc:javaCode>
                    </wpc:script>
                  </bpws:invoke>
                  <bpws:invoke name="LogMPScompensateAssociateMailboxTNs" operation="null" partnerLink="null" portType="wpc:null" wpc:displayName="Log - [MPS.compensateAssociateMailboxTNs] " wpc:id="528">
                    <wpc:script>
                      <wpc:javaCode><![CDATA[SdpLoggerHelper.logMessage(SdpLoggerHelper.INVOKE_STR +" : MPS.compensateAssociateMailboxTNs",PROCESS_NAME,processID
														,SdpLoggerHelper.INFO);
														
SdpLoggerHelper.logMessage("Request BO:[sdpOrder]",PROCESS_NAME,processID
														,SdpLoggerHelper.INFO);
SdpLoggerHelper.logMessage("sdpOrderForUpdate:",PROCESS_NAME,processID
														,SdpLoggerHelper.INFO);

														
SdpLoggerHelper.logBO(SDP_ORDER_ForUpdate,PROCESS_NAME,processID,SdpLoggerHelper.INFO);
																		]]></wpc:javaCode>
                    </wpc:script>
                  </bpws:invoke>
                  <bpws:invoke name="MPScompensateAssociateMailboxTNs" operation="compensateAssociateMailboxTNs" partnerLink="MPSCompensableService2_InterfacePartner" portType="ns16:MPSCompensableService2_Interface" wpc:displayName="MPS compensateAssociateMailboxTNs" wpc:id="255">
                    <wpc:input>
                      <wpc:parameter name="order" variable="SDP_ORDER_ForUpdate"/>
                    </wpc:input>
                  </bpws:invoke>
                  <bpws:invoke name="LogMPScompensateAssociateMailboxTNsSuccess" operation="null" partnerLink="null" portType="wpc:null" wpc:displayName="Log - [MPS.compensateAssociateMailboxTNs -Success ] " wpc:id="565">
                    <wpc:script>
                      <wpc:javaCode><![CDATA[SdpLoggerHelper.logMessage("MPS.compensateAssociateMailboxTNs :-"+SdpLoggerHelper.SUCCESS_STR,PROCESS_NAME,processID
														,SdpLoggerHelper.INFO);
																		]]></wpc:javaCode>
                    </wpc:script>
                  </bpws:invoke>
                </bpws:sequence>
              </bpws:case>
            </bpws:switch>
            <bpws:invoke name="SetMPSValues2" operation="null" partnerLink="null" portType="wpc:null" wpc:displayName="Set MPS Values" wpc:id="366">
              <wpc:script>
                <wpc:javaCode><![CDATA[// R7 Filter setting not required
/*

com.att.sdp.utility.ContentFilterCreator __result__1 = new com.att.sdp.utility.ContentFilterCreator();
com.att.sdp.utility.ContentFilterCreator tempContentFilter = __result__1;
java.lang.String __result__4 = sbc.lightspeed.sdp.wps.SdpHelper.CVOIP_MAILBOX_MAILBOXINVARIANTID;
java.lang.String __result__5 = sbc.lightspeed.sdp.wps.SdpHelper.CVOIP_MAILBOX_MAILBOXINVARIANTID_PATH;
tempContentFilter.addSelectFilter(__result__4, __result__5);
java.lang.String __result__8 = sbc.lightspeed.sdp.wps.SdpHelper.CVOIP_MAILBOX_TN;
java.lang.String __result__9 = sbc.lightspeed.sdp.wps.SdpHelper.CVOIP_MAILBOX_TN_PATH;
tempContentFilter.addUpdateFilter(__result__8, __result__9);
commonj.sdo.DataObject __result__12 = tempContentFilter.createFilters();
SDP_ORDER_ForUpdate.getDataObject("transactionDetail").set("contentFilter", __result__12);
*/

]]></wpc:javaCode>
              </wpc:script>
            </bpws:invoke>
            <bpws:assign name="PreInvokeAssigns2" wpc:displayName="Pre-Invoke Assigns" wpc:id="239">
              <bpws:copy>
                <bpws:from variable="SDP_ORDER_RequestProc">
                  <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/transactionDetail]]></bpws:query>
                </bpws:from>
                <bpws:to variable="SDP_ORDER_ForUpdate">
                  <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/transactionDetail]]></bpws:query>
                </bpws:to>
              </bpws:copy>
              <bpws:copy>
                <bpws:from>3</bpws:from>
                <bpws:to variable="UMBState"/>
              </bpws:copy>
              <bpws:copy>
                <bpws:from variable="EmptyTransaction_Detail"/>
                <bpws:to variable="Transaction_DetailPort"/>
              </bpws:copy>
              <bpws:copy>
                <bpws:from>MPS.UpdateOrder.request</bpws:from>
                <bpws:to variable="Transaction_DetailPort">
                  <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/State]]></bpws:query>
                </bpws:to>
              </bpws:copy>
              <bpws:copy>
                <bpws:from>MPS</bpws:from>
                <bpws:to variable="Transaction_DetailPort">
                  <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/errorDetails/Error/TargetSystem]]></bpws:query>
                </bpws:to>
              </bpws:copy>
              <bpws:copy>
                <bpws:from>UpdateOrder</bpws:from>
                <bpws:to variable="Transaction_DetailPort">
                  <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/currentTargetOperation]]></bpws:query>
                </bpws:to>
              </bpws:copy>
            </bpws:assign>
            <bpws:switch name="Choice1" wpc:displayName="Choice1" wpc:id="448">
              <bpws:case wpc:id="449">
                <bpws:condition><![CDATA[boolean __result__1 = com.ibm.wbiservers.brules.core.codegen.NillableUtility.compareNillableValues(com.ibm.wbiservers.brules.core.codegen.NillableUtility.getDataObject(com.ibm.wbiservers.brules.core.codegen.NillableUtility.getDataObject(SDP_ORDER_RequestProc, "transactionDetail", "SDP_ORDER_RequestProc"), "tempStoreNonArray", "transactionDetail").get("temp11"), UMBState, com.ibm.wbiservers.brules.core.codegen.NillableUtility.GREATER_THAN_OPERATOR);
return __result__1;

//@generated:com.ibm.wbit.activity.ui
//<?xml version="1.0" encoding="UTF-8"?>
//<com.ibm.wbit.activity:CompositeActivity xmi:version="2.0" xmlns:xmi="http://www.omg.org/XMI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:com.ibm.wbit.activity="http:///com/ibm/wbit/activity.ecore" name="ActivityMethod">
//  <result name="Result">
//    <type xsi:type="com.ibm.wbit.activity:JavaElementType" name="boolean"/>
//  </result>
//  <exceptions>
//    <type xsi:type="com.ibm.wbit.activity:JavaElementType" name="com.ibm.bpe.api.ProcessException"/>
//  </exceptions>
//  <executableElements xsi:type="com.ibm.wbit.activity:Expression" value="SDP_ORDER_RequestProc.transactionDetail.tempStoreNonArray.temp11> UMBState" assignable="false">
//    <dataOutputs target="//@executableElements.1"/>
//    <type xsi:type="com.ibm.wbit.activity:JavaElementType" name="boolean"/>
//  </executableElements>
//  <executableElements xsi:type="com.ibm.wbit.activity:ReturnElement" dataInputs="//@executableElements.0/@dataOutputs.0"/>
//  <executableGroups executableElements="//@executableElements.0 //@executableElements.1"/>
//</com.ibm.wbit.activity:CompositeActivity>
//@generated:end
//!SMAP!*S WBIACTDBG
//!SMAP!*L
//!SMAP!1:1,1
//!SMAP!2:2,1
//!SMAP!1000000:26,1]]></bpws:condition>
                <bpws:sequence name="HiddenSequence5" wpc:id="1073742618">
                  <bpws:invoke name="RemoveTNFromSubMailBoxandPrepareforMPSUpdate" operation="null" partnerLink="null" portType="wpc:null" wpc:displayName="Remove TN From Sub MailBox and Prepare for MPS Update" wpc:id="288">
                    <wpc:script>
                      <wpc:javaCode><![CDATA[commonj.sdo.DataObject __result__2;
{// copy BO
	com.ibm.websphere.bo.BOCopy _copyService = 
	   (com.ibm.websphere.bo.BOCopy) new com.ibm.websphere.sca.ServiceManager().locateService("com/ibm/websphere/bo/BOCopy"); 
	__result__2 = _copyService.copy(provSubMailBox);
}
tmpSubMBox = __result__2;
com.ibm.wbiservers.brules.core.codegen.NillableUtility.getList(com.ibm.wbiservers.brules.core.codegen.NillableUtility.getDataObject(com.ibm.wbiservers.brules.core.codegen.NillableUtility.getDataObject(com.ibm.wbiservers.brules.core.codegen.NillableUtility.getDataObject(com.ibm.wbiservers.brules.core.codegen.NillableUtility.getDataObject(SDP_ORDER_ForUpdate, "order", "SDP_ORDER_ForUpdate"), "ReqService", "order"), "product", "ReqService"), "cvoipProduct", "product"), "accountMailBoxes", "SDP_ORDER_ForUpdate.order.ReqService.product.cvoipProduct").clear();
java.util.List __result__5 = com.ibm.wbiservers.brules.core.codegen.NillableUtility.getList(com.ibm.wbiservers.brules.core.codegen.NillableUtility.getDataObject(com.ibm.wbiservers.brules.core.codegen.NillableUtility.getDataObject(com.ibm.wbiservers.brules.core.codegen.NillableUtility.getDataObject(com.ibm.wbiservers.brules.core.codegen.NillableUtility.getDataObject(SDP_ORDER_ForUpdate, "order", "SDP_ORDER_ForUpdate"), "ReqService", "order"), "product", "ReqService"), "cvoipProduct", "product"), "accountMailBoxes", "SDP_ORDER_ForUpdate.order.ReqService.product.cvoipProduct");
boolean __result__7;
{// add item to list
	__result__7 = __result__5.add(tmpSubMBox);
}

//@generated:com.ibm.wbit.activity.ui
//<?xml version="1.0" encoding="UTF-8"?>
//<com.ibm.wbit.activity:CompositeActivity xmi:version="2.0" xmlns:xmi="http://www.omg.org/XMI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:com.ibm.wbit.activity="http:///com/ibm/wbit/activity.ecore" name="ActivityMethod">
//  <exceptions>
//    <type xsi:type="com.ibm.wbit.activity:JavaElementType" name="com.ibm.bpe.api.ProcessException"/>
//  </exceptions>
//  <executableElements xsi:type="com.ibm.wbit.activity:Expression" value="provSubMailBox" variable="true">
//    <dataOutputs target="//@executableElements.1/@parameters.0"/>
//    <type xsi:type="com.ibm.wbit.activity:XSDElementType" name="SDP_AccountMailBoxes" namespace="http://www.ibm.com/websphere/crossworlds/2002/BOSchema/SDP_AccountMailBoxes"/>
//  </executableElements>
//  <executableElements xsi:type="com.ibm.wbit.activity:LibraryActivity" name="copy BO" description="Copy a Business Object" category="SCA services" template="com.ibm.websphere.bo.BOCopy _copyService = &#xA;   (com.ibm.websphere.bo.BOCopy) new com.ibm.websphere.sca.ServiceManager().locateService(&quot;com/ibm/websphere/bo/BOCopy&quot;); &#xA;&lt;%return%> _copyService.copy(&lt;%bo%>);">
//    <parameters name="bo" dataInputs="//@executableElements.0/@dataOutputs.0" displayName="BO">
//      <type xsi:type="com.ibm.wbit.activity:JavaElementType" name="commonj.sdo.DataObject"/>
//    </parameters>
//    <result name="copy" displayName="copy">
//      <dataOutputs target="//@executableElements.2"/>
//      <type xsi:type="com.ibm.wbit.activity:JavaElementType" name="commonj.sdo.DataObject"/>
//    </result>
//  </executableElements>
//  <executableElements xsi:type="com.ibm.wbit.activity:Expression" dataInputs="//@executableElements.1/@result/@dataOutputs.0" value="tmpSubMBox" variable="true">
//    <type xsi:type="com.ibm.wbit.activity:XSDElementType" name="SDP_AccountMailBoxes" namespace="http://www.ibm.com/websphere/crossworlds/2002/BOSchema/SDP_AccountMailBoxes"/>
//  </executableElements>
//  <executableElements xsi:type="com.ibm.wbit.activity:Expression" value="SDP_ORDER_ForUpdate.order.ReqService.product.cvoipProduct.accountMailBoxes.clear()" assignable="false">
//    <type xsi:type="com.ibm.wbit.activity:JavaElementType" name="void"/>
//  </executableElements>
//  <executableElements xsi:type="com.ibm.wbit.activity:Expression" value="SDP_ORDER_ForUpdate.order.ReqService.product.cvoipProduct.accountMailBoxes" field="true">
//    <dataOutputs target="//@executableElements.6/@parameters.0"/>
//    <type xsi:type="com.ibm.wbit.activity:JavaElementType" name="java.util.List"/>
//  </executableElements>
//  <executableElements xsi:type="com.ibm.wbit.activity:Expression" value="tmpSubMBox" variable="true">
//    <dataOutputs target="//@executableElements.6/@parameters.1"/>
//    <type xsi:type="com.ibm.wbit.activity:XSDElementType" name="SDP_AccountMailBoxes" namespace="http://www.ibm.com/websphere/crossworlds/2002/BOSchema/SDP_AccountMailBoxes"/>
//  </executableElements>
//  <executableElements xsi:type="com.ibm.wbit.activity:LibraryActivity" name="add item to list" description="Add the provided Object at the end of the list" category="list" template="&lt;%return%> &lt;%list%>.add(&lt;%object%>);">
//    <parameters name="list" dataInputs="//@executableElements.4/@dataOutputs.0" displayName="list">
//      <type xsi:type="com.ibm.wbit.activity:JavaElementType" name="java.util.List"/>
//    </parameters>
//    <parameters name="object" dataInputs="//@executableElements.5/@dataOutputs.0" displayName="object">
//      <type xsi:type="com.ibm.wbit.activity:JavaElementType" name="java.lang.Object"/>
//    </parameters>
//    <result name="added" displayName="added">
//      <type xsi:type="com.ibm.wbit.activity:JavaElementType" name="boolean"/>
//    </result>
//  </executableElements>
//  <executableGroups executableElements="//@executableElements.0 //@executableElements.1 //@executableElements.2"/>
//  <executableGroups executableElements="//@executableElements.3"/>
//  <executableGroups executableElements="//@executableElements.4 //@executableElements.5 //@executableElements.6"/>
//</com.ibm.wbit.activity:CompositeActivity>
//@generated:end
//!SMAP!*S WBIACTDBG
//!SMAP!*L
//!SMAP!2:1,6
//!SMAP!3:7,1
//!SMAP!4:8,1
//!SMAP!5:9,1
//!SMAP!7:10,4
//!SMAP!1000000:72,1]]></wpc:javaCode>
                    </wpc:script>
                  </bpws:invoke>
                  <bpws:invoke name="LogMPScompensateAssociateMailboxTNs1" operation="null" partnerLink="null" portType="wpc:null" wpc:displayName="Log - [MPS.compensateAssociateMailboxTNs] " wpc:id="536">
                    <wpc:script>
                      <wpc:javaCode><![CDATA[SdpLoggerHelper.logMessage(SdpLoggerHelper.INVOKE_STR +" : MPS.compensateAssociateMailboxTNs",PROCESS_NAME,processID
														,SdpLoggerHelper.INFO);
														
SdpLoggerHelper.logMessage("Request BO:[sdpOrder]",PROCESS_NAME,processID
														,SdpLoggerHelper.INFO);
SdpLoggerHelper.logMessage("sdpOrderForUpdate:",PROCESS_NAME,processID
														,SdpLoggerHelper.INFO);

														
SdpLoggerHelper.logBO(SDP_ORDER_ForUpdate,PROCESS_NAME,processID,SdpLoggerHelper.INFO);
																		]]></wpc:javaCode>
                    </wpc:script>
                  </bpws:invoke>
                  <bpws:invoke name="MPScompensateAssociateMailboxTNs1" operation="compensateAssociateMailboxTNs" partnerLink="MPSCompensableService2_InterfacePartner" portType="ns16:MPSCompensableService2_Interface" wpc:displayName="MPS compensateAssociateMailboxTNs" wpc:id="240">
                    <wpc:input>
                      <wpc:parameter name="order" variable="SDP_ORDER_ForUpdate"/>
                    </wpc:input>
                  </bpws:invoke>
                  <bpws:invoke name="LogMPSassociateMailboxTNsSuccess" operation="null" partnerLink="null" portType="wpc:null" wpc:displayName="Log - [MPS.associateMailboxTNs - Success] " wpc:id="568">
                    <wpc:script>
                      <wpc:javaCode><![CDATA[SdpLoggerHelper.logMessage("MPS.compensateAssociateMailboxTNs :-"+SdpLoggerHelper.SUCCESS_STR,PROCESS_NAME,processID
														,SdpLoggerHelper.INFO);
																		]]></wpc:javaCode>
                    </wpc:script>
                  </bpws:invoke>
                </bpws:sequence>
              </bpws:case>
            </bpws:switch>
            <bpws:assign name="Preinvokeassigns4" wpc:displayName="pre invoke assigns" wpc:id="465">
              <bpws:copy>
                <bpws:from>2</bpws:from>
                <bpws:to variable="UMBState"/>
              </bpws:copy>
            </bpws:assign>
            <bpws:switch name="Choice2" wpc:displayName="Choice2" wpc:id="451">
              <bpws:case wpc:id="452">
                <bpws:condition><![CDATA[boolean __result__1 = (com.ibm.wbiservers.brules.core.codegen.NillableUtility.compareNillableValues(com.ibm.wbiservers.brules.core.codegen.NillableUtility.getDataObject(com.ibm.wbiservers.brules.core.codegen.NillableUtility.getDataObject(SDP_ORDER_RequestProc, "transactionDetail", "SDP_ORDER_RequestProc"), "tempStoreNonArray", "transactionDetail").get("temp11"), UMBState, com.ibm.wbiservers.brules.core.codegen.NillableUtility.GREATER_THAN_OPERATOR));
return __result__1;

//@generated:com.ibm.wbit.activity.ui
//<?xml version="1.0" encoding="UTF-8"?>
//<com.ibm.wbit.activity:CompositeActivity xmi:version="2.0" xmlns:xmi="http://www.omg.org/XMI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:com.ibm.wbit.activity="http:///com/ibm/wbit/activity.ecore" name="ActivityMethod">
//  <result name="Result">
//    <type xsi:type="com.ibm.wbit.activity:JavaElementType" name="boolean"/>
//  </result>
//  <exceptions>
//    <type xsi:type="com.ibm.wbit.activity:JavaElementType" name="com.ibm.bpe.api.ProcessException"/>
//  </exceptions>
//  <executableElements xsi:type="com.ibm.wbit.activity:Expression" value="(SDP_ORDER_RequestProc.transactionDetail.tempStoreNonArray.temp11 > UMBState)">
//    <dataOutputs target="//@executableElements.1"/>
//    <type xsi:type="com.ibm.wbit.activity:JavaElementType" name="boolean"/>
//  </executableElements>
//  <executableElements xsi:type="com.ibm.wbit.activity:ReturnElement" dataInputs="//@executableElements.0/@dataOutputs.0"/>
//  <executableGroups executableElements="//@executableElements.0 //@executableElements.1"/>
//</com.ibm.wbit.activity:CompositeActivity>
//@generated:end
//!SMAP!*S WBIACTDBG
//!SMAP!*L
//!SMAP!1:1,1
//!SMAP!2:2,1
//!SMAP!1000000:26,1]]></bpws:condition>
                <bpws:sequence name="HiddenSequence17" wpc:id="1073742616">
                  <bpws:assign name="PreInvokeAssigns12" wpc:displayName="Pre Invoke Assigns" wpc:id="861">
                    <bpws:copy>
                      <bpws:from variable="EmptyTransaction_Detail"/>
                      <bpws:to variable="Transaction_DetailPort"/>
                    </bpws:copy>
                    <bpws:copy>
                      <bpws:from>UCDCL.Login.Request</bpws:from>
                      <bpws:to variable="Transaction_DetailPort">
                        <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/State]]></bpws:query>
                      </bpws:to>
                    </bpws:copy>
                    <bpws:copy>
                      <bpws:from>UCDCL</bpws:from>
                      <bpws:to variable="Transaction_DetailPort">
                        <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/errorDetails/Error/TargetSystem]]></bpws:query>
                      </bpws:to>
                    </bpws:copy>
                    <bpws:copy>
                      <bpws:from>Login</bpws:from>
                      <bpws:to variable="Transaction_DetailPort">
                        <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/currentTargetOperation]]></bpws:query>
                      </bpws:to>
                    </bpws:copy>
                  </bpws:assign>
                  <bpws:invoke name="LogUCDCLLogin1" operation="null" partnerLink="null" portType="wpc:null" wpc:displayName="Log - [UCDCL.Login]" wpc:id="882">
                    <wpc:script>
                      <wpc:javaCode><![CDATA[SdpLoggerHelper.logMessage(SdpLoggerHelper.INVOKE_STR +" : UCDCL.Login",
	PROCESS_NAME,processID,SdpLoggerHelper.INFO);
]]></wpc:javaCode>
                    </wpc:script>
                  </bpws:invoke>
                  <bpws:invoke name="InvokeUCDCLLogin1" operation="provisioningServiceLogin" partnerLink="UcdclCompensableService_InterfacePartner" portType="ns18:UCDCLCompensableService_Interface" wpc:displayName="Invoke - [UCDCL.Login]" wpc:id="883">
                    <wpc:input>
                      <wpc:parameter name="transactionDetail" variable="Transaction_DetailPort"/>
                    </wpc:input>
                    <wpc:output>
                      <wpc:parameter name="transactionDetail" variable="Transaction_DetailPort"/>
                    </wpc:output>
                    <bpws:catch faultName="wpc:runtimeFailure" faultVariable="bpcFault" wpc:faultType="wpc:BPCStandardFaultType" wpc:id="923" wpc:variableId="885">
                      <bpws:invoke name="Handleruntimefailures" operation="null" partnerLink="null" portType="wpc:null" wpc:displayName="handle runtime failures" wpc:id="886">
                        <wpc:script>
                          <wpc:javaCode><![CDATA[SdpErrorHelper.setErrDetInTransDet(Transaction_DetailPort,bpcFault,SdpErrorHelper.SEVERITY_FATAL);

SdpLoggerHelper.logMessage(SdpLoggerHelper.RUNTIME_FAILURE+"  UCDCL.Login",PROCESS_NAME,processID,SdpLoggerHelper.FATAL);]]></wpc:javaCode>
                        </wpc:script>
                      </bpws:invoke>
                    </bpws:catch>
                    <bpws:catch faultName="ns18:serviceCallFault" faultVariable="scFault" wpc:faultType="java:ServiceCallFault" wpc:id="924" wpc:variableId="887">
                      <bpws:invoke name="SetErrorDetails" operation="null" partnerLink="null" portType="wpc:null" wpc:displayName="Set Error Details" wpc:id="888">
                        <wpc:script>
                          <wpc:javaCode><![CDATA[Transaction_DetailPort.setBoolean(SdpHelper.ERRORINDICATOR,true);

new att.lightspeed.sdp.helper.TransactionDetail(Transaction_DetailPort).setSDPErrorMessage(scFault);

Transaction_DetailPort.getDataObject("errorDetails").getDataObject("Error").setString("Severity",SdpErrorHelper.SEVERITY_FATAL);

 
SdpLoggerHelper.logMessage(SdpLoggerHelper.FAULT_FAILURE +"  UCDCL.Login",PROCESS_NAME,processID,SdpLoggerHelper.FATAL);
 ]]></wpc:javaCode>
                        </wpc:script>
                      </bpws:invoke>
                    </bpws:catch>
                    <bpws:catchAll wpc:id="922">
                      <bpws:invoke name="Handleruntimefailures1" operation="null" partnerLink="null" portType="wpc:null" wpc:displayName="handle runtime failures" wpc:id="884">
                        <wpc:script>
                          <wpc:javaCode><![CDATA[SdpErrorHelper.setErrDetInTransDet(Transaction_DetailPort,null,SdpErrorHelper.SEVERITY_FATAL);

SdpLoggerHelper.logMessage(SdpLoggerHelper.UNKNOWN_FAILURE+"  UCDCL.Login",PROCESS_NAME,processID,SdpLoggerHelper.FATAL);]]></wpc:javaCode>
                        </wpc:script>
                      </bpws:invoke>
                    </bpws:catchAll>
                  </bpws:invoke>
                  <bpws:switch name="UCDCLError4" wpc:displayName="UCDCL Error?" wpc:id="889">
                    <bpws:case wpc:id="893">
                      <bpws:condition><![CDATA[boolean __result__1 = com.ibm.wbiservers.brules.core.codegen.NillableUtility.getBoolean(Transaction_DetailPort, "errorIndicator", "Transaction_DetailPort");
return __result__1;

//@generated:com.ibm.wbit.activity.ui
//<?xml version="1.0" encoding="UTF-8"?>
//<com.ibm.wbit.activity:CompositeActivity xmi:version="2.0" xmlns:xmi="http://www.omg.org/XMI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:com.ibm.wbit.activity="http:///com/ibm/wbit/activity.ecore" name="ActivityMethod">
//  <result name="Result">
//    <type xsi:type="com.ibm.wbit.activity:JavaElementType" name="boolean"/>
//  </result>
//  <exceptions>
//    <type xsi:type="com.ibm.wbit.activity:JavaElementType" name="com.ibm.bpe.api.ProcessException"/>
//  </exceptions>
//  <executableElements xsi:type="com.ibm.wbit.activity:Expression" value="Transaction_DetailPort.errorIndicator" field="true">
//    <dataOutputs target="//@executableElements.1"/>
//    <type xsi:type="com.ibm.wbit.activity:XSDElementType" name="boolean" namespace="http://www.w3.org/2001/XMLSchema" nillable="false"/>
//  </executableElements>
//  <executableElements xsi:type="com.ibm.wbit.activity:ReturnElement" dataInputs="//@executableElements.0/@dataOutputs.0"/>
//  <executableGroups executableElements="//@executableElements.0 //@executableElements.1"/>
//</com.ibm.wbit.activity:CompositeActivity>
//@generated:end
//!SMAP!*S WBIACTDBG
//!SMAP!*L
//!SMAP!1:1,1
//!SMAP!2:2,1
//!SMAP!1000000:26,1]]></bpws:condition>
                      <bpws:sequence name="HiddenSequence12" wpc:id="1073742718">
                        <bpws:invoke name="LogUCDCLLoginError" operation="null" partnerLink="null" portType="wpc:null" wpc:displayName="Log - [UCDCL.Login  - Error] " wpc:id="895">
                          <wpc:script>
                            <wpc:javaCode><![CDATA[String strSeverity =Transaction_DetailPort.getString("errorDetails/Error/Severity");
int logLevel = SdpHelper.getLogLevel(strSeverity);
SdpLoggerHelper.logMessage(" UCDCL.Login- "+SdpLoggerHelper.ERROR_STR+"["+strSeverity+"]",PROCESS_NAME,processID,logLevel);]]></wpc:javaCode>
                          </wpc:script>
                        </bpws:invoke>
                        <bpws:assign name="PrepareGBOForLogging3" wpc:displayName="Prepare GBO For Logging" wpc:id="896">
                          <bpws:copy>
                            <bpws:from variable="Transaction_DetailPort">
                              <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/State]]></bpws:query>
                            </bpws:from>
                            <bpws:to variable="STATE"/>
                          </bpws:copy>
                          <bpws:copy>
                            <bpws:from variable="Transaction_DetailPort">
                              <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/errorDetails/Error/Severity]]></bpws:query>
                            </bpws:from>
                            <bpws:to variable="SEVERITY"/>
                          </bpws:copy>
                          <bpws:copy>
                            <bpws:from variable="Transaction_DetailPort">
                              <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/errorDetails/Error/Message]]></bpws:query>
                            </bpws:from>
                            <bpws:to variable="SDP_ERROR_OBJECT_MESSAGE"/>
                          </bpws:copy>
                          <bpws:copy>
                            <bpws:from variable="Transaction_DetailPort">
                              <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/errorDetails/Error/TargetSystem]]></bpws:query>
                            </bpws:from>
                            <bpws:to variable="TARGET_SYSTEM_NAME"/>
                          </bpws:copy>
                          <bpws:copy>
                            <bpws:from>true</bpws:from>
                            <bpws:to variable="MANUAL_INTERVENTION_FLAG"/>
                          </bpws:copy>
                          <bpws:copy>
                            <bpws:from variable="Transaction_DetailPort">
                              <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/currentTargetOperation]]></bpws:query>
                            </bpws:from>
                            <bpws:to variable="TARGET_OPERATION_NAME"/>
                          </bpws:copy>
                          <bpws:copy>
                            <bpws:from variable="Transaction_DetailPort">
                              <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/errorDetails/Error/Message]]></bpws:query>
                            </bpws:from>
                            <bpws:to variable="SDP_ORDER_RequestProc">
                              <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/transactionDetail/errorDetails/Error/Message]]></bpws:query>
                            </bpws:to>
                          </bpws:copy>
                        </bpws:assign>
                        <bpws:invoke name="LogCommonErrorLogger4" operation="null" partnerLink="null" portType="wpc:null" wpc:displayName="Log - [CommonErrorLogger ] " wpc:id="897">
                          <wpc:script>
                            <wpc:javaCode><![CDATA[SdpLoggerHelper.logMessage("Invoking CommonErrorLogger:",PROCESS_NAME,processID,SdpLoggerHelper.INFO);

SDP_ORDER_RequestProc.setString(SdpHelper.TEMPSTRING1_PATH.replace('.','/'),processID);	
										
																		]]></wpc:javaCode>
                          </wpc:script>
                        </bpws:invoke>
                        <bpws:invoke name="InvokeLogError2" operation="logErrorDetails" partnerLink="FromSdp_CommonErrorLogger_Interface" portType="ns12:FromSdp_CommonErrorLogger_Interface" wpc:displayName="Invoke Log Error" wpc:id="898">
                          <wpc:input>
                            <wpc:parameter name="transactionState" variable="STATE"/>
                            <wpc:parameter name="targetOperation" variable="TARGET_OPERATION_NAME"/>
                            <wpc:parameter name="parentProcessName" variable="PARENT_PROCESS_NAME"/>
                            <wpc:parameter name="sdpOrder" variable="SDP_ORDER_RequestProc"/>
                            <wpc:parameter name="manualInterventionInd" variable="MANUAL_INTERVENTION_FLAG"/>
                            <wpc:parameter name="severity" variable="SEVERITY"/>
                            <wpc:parameter name="targetSystem" variable="TARGET_SYSTEM_NAME"/>
                            <wpc:parameter name="sdpErrorObjectMessage" variable="SDP_ERROR_OBJECT_MESSAGE"/>
                          </wpc:input>
                          <wpc:output>
                            <wpc:parameter name="response" variable="Transaction_Error"/>
                          </wpc:output>
                        </bpws:invoke>
                        <bpws:invoke name="LogCommonErrorLogger5" operation="null" partnerLink="null" portType="wpc:null" wpc:displayName="Log - [CommonErrorLogger ] " wpc:id="899">
                          <wpc:script>
                            <wpc:javaCode><![CDATA[SdpLoggerHelper.logMessage(" CommonErrorLogger",PROCESS_NAME,processID,SdpLoggerHelper.INFO);]]></wpc:javaCode>
                          </wpc:script>
                        </bpws:invoke>
                        <bpws:assign name="Copyproctotrigg4" wpc:displayName="copy proc to trigg" wpc:id="900">
                          <bpws:copy>
                            <bpws:from variable="SDP_ORDER_RequestProc"/>
                            <bpws:to variable="SDP_ORDER_Request"/>
                          </bpws:copy>
                          <bpws:copy>
                            <bpws:from variable="SDP_ORDER_ProvProc"/>
                            <bpws:to variable="SDP_ORDER_Prov"/>
                          </bpws:copy>
                        </bpws:assign>
                        <bpws:reply name="Reply4" operation="compensateUpdateMailBox" partnerLink="UpdateMailBox_Compensation_Interface" portType="ns11:UpdateMailBox_Compensation_Interface" wpc:displayName="Reply" wpc:id="901">
                          <wpc:input>
                            <wpc:parameter name="SDP_ORDER_ProvPort" variable="SDP_ORDER_Prov"/>
                            <wpc:parameter name="Transaction_Detail" variable="Transaction_DetailPort"/>
                            <wpc:parameter name="SDP_ORDER_RequestPort" variable="SDP_ORDER_Request"/>
                          </wpc:input>
                        </bpws:reply>
                        <bpws:terminate name="Terminate4" wpc:displayName="Terminate" wpc:id="902"/>
                      </bpws:sequence>
                    </bpws:case>
                    <bpws:otherwise wpc:id="929">
                      <bpws:sequence name="HiddenSequence" wpc:id="1073742714">
                        <bpws:invoke name="LogUCDCLLoginSuccess" operation="null" partnerLink="null" portType="wpc:null" wpc:displayName="Log - [UCDCL.Login -Success] " wpc:id="891">
                          <wpc:script>
                            <wpc:javaCode><![CDATA[SdpLoggerHelper.logMessage("UCDCL.Login -"+SdpLoggerHelper.SUCCESS_STR,PROCESS_NAME,processID,SdpLoggerHelper.INFO);]]></wpc:javaCode>
                          </wpc:script>
                        </bpws:invoke>
                        <bpws:invoke name="SetUMSessionIDUMMessageCenterIP" operation="null" partnerLink="null" portType="wpc:null" wpc:continueOnError="inherit" wpc:displayName="Set UMSessionID &amp; UMMessageCenterIP" wpc:id="892">
                          <wpc:script>
                            <wpc:javaCode><![CDATA[att.lightspeed.sdp.helper.WpsLogger logger = att.lightspeed.sdp.helper.WpsLogger.getLogger(processInstance());
String UMSessionID = null;
String UMMessageCenterIP = null;

UMSessionID = Transaction_DetailPort.getString(SdpHelper.TRANSDETAIL_UMSESSIONID);
UMMessageCenterIP = Transaction_DetailPort.getString(SdpHelper.TRANSDETAIL_UMMESSAGECENTERIP);

logger.debug("First UCDCL.Login called for this Transaction");
logger.debug("UMSessionID from the Login Response: " + UMSessionID);
logger.debug("UMMessageCenterIP from the Login Response: " + UMMessageCenterIP);

processBO.setString(SdpHelper.xPathify(SdpHelper.TRANSDETAIL_UMSESSIONID_PATH),UMSessionID);

processBO.setString(SdpHelper.xPathify(SdpHelper.TRANSDETAIL_UMMESSAGECENTERIP_PATH),UMMessageCenterIP);
]]></wpc:javaCode>
                          </wpc:script>
                        </bpws:invoke>
                      </bpws:sequence>
                    </bpws:otherwise>
                  </bpws:switch>
                  <bpws:invoke name="GetTNinMPS" operation="null" partnerLink="null" portType="wpc:null" wpc:displayName="Get TN in MPS" wpc:id="285">
                    <wpc:script>
                      <wpc:javaCode><![CDATA[java.lang.Object __result__1 = com.ibm.wbiservers.brules.core.codegen.NillableUtility.getList(provSubMailBox, "mailBoxTNs", "provSubMailBox").get(com.ibm.wbiservers.brules.core.codegen.NillableUtility.getInt(intReqTNCounter, "intReqTNCounter"));
provTN = (commonj.sdo.DataObject)__result__1;

//@generated:com.ibm.wbit.activity.ui
//<?xml version="1.0" encoding="UTF-8"?>
//<com.ibm.wbit.activity:CompositeActivity xmi:version="2.0" xmlns:xmi="http://www.omg.org/XMI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:com.ibm.wbit.activity="http:///com/ibm/wbit/activity.ecore" name="ActivityMethod">
//  <exceptions>
//    <type xsi:type="com.ibm.wbit.activity:JavaElementType" name="com.ibm.bpe.api.ProcessException"/>
//  </exceptions>
//  <executableElements xsi:type="com.ibm.wbit.activity:Expression" value="provSubMailBox.mailBoxTNs.get( intReqTNCounter)" assignable="false">
//    <dataOutputs target="//@executableElements.1"/>
//    <type xsi:type="com.ibm.wbit.activity:JavaElementType" name="java.lang.Object"/>
//  </executableElements>
//  <executableElements xsi:type="com.ibm.wbit.activity:Expression" dataInputs="//@executableElements.0/@dataOutputs.0" value="provTN" variable="true">
//    <type xsi:type="com.ibm.wbit.activity:XSDElementType" name="SDP_MemberTNS" namespace="http://www.ibm.com/websphere/crossworlds/2002/BOSchema/SDP_MemberTNS"/>
//  </executableElements>
//  <executableGroups executableElements="//@executableElements.0 //@executableElements.1"/>
//</com.ibm.wbit.activity:CompositeActivity>
//@generated:end
//!SMAP!*S WBIACTDBG
//!SMAP!*L
//!SMAP!1:1,1
//!SMAP!2:2,1
//!SMAP!1000000:25,1]]></wpc:javaCode>
                    </wpc:script>
                  </bpws:invoke>
                  <bpws:assign name="PreInvokeAssigns" wpc:displayName="Pre Invoke Assigns" wpc:id="207">
                    <bpws:copy>
                      <bpws:from variable="provSubMailBox">
                        <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/mailBoxInvariantId]]></bpws:query>
                      </bpws:from>
                      <bpws:to variable="ucdclEmailOrPhone"/>
                    </bpws:copy>
                    <bpws:copy>
                      <bpws:from variable="provTN">
                        <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/tn]]></bpws:query>
                      </bpws:from>
                      <bpws:to variable="ucdclDeviceNumber"/>
                    </bpws:copy>
                    <bpws:copy>
                      <bpws:from>null</bpws:from>
                      <bpws:to variable="ucdclAuthentication"/>
                    </bpws:copy>
                    <bpws:copy>
                      <bpws:from variable="EmptyTransaction_Detail"/>
                      <bpws:to variable="Transaction_DetailPort"/>
                    </bpws:copy>
                    <bpws:copy>
                      <bpws:from>UCDCL.DeleteDevice.request</bpws:from>
                      <bpws:to variable="Transaction_DetailPort">
                        <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/State]]></bpws:query>
                      </bpws:to>
                    </bpws:copy>
                    <bpws:copy>
                      <bpws:from>UCDCL</bpws:from>
                      <bpws:to variable="Transaction_DetailPort">
                        <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/errorDetails/Error/TargetSystem]]></bpws:query>
                      </bpws:to>
                    </bpws:copy>
                    <bpws:copy>
                      <bpws:from>DeleteDevice</bpws:from>
                      <bpws:to variable="Transaction_DetailPort">
                        <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/currentTargetOperation]]></bpws:query>
                      </bpws:to>
                    </bpws:copy>
                    <bpws:copy>
                      <bpws:from variable="provSubMailBox">
                        <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[mailBoxInvariantId]]></bpws:query>
                      </bpws:from>
                      <bpws:to variable="processBO">
                        <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[order/ReqService/product/cvoipProduct/accountMailBoxes[1]/mailBoxInvariantId]]></bpws:query>
                      </bpws:to>
                    </bpws:copy>
                    <bpws:copy>
                      <bpws:from variable="provTN">
                        <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[tn]]></bpws:query>
                      </bpws:from>
                      <bpws:to variable="processBO">
                        <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[order/ReqService/product/cvoipProduct/cvoipLineSubComponent[1]/tnInfo/tn]]></bpws:query>
                      </bpws:to>
                    </bpws:copy>
                  </bpws:assign>
                  <bpws:invoke name="LogUCDCLDeleteDevice" operation="null" partnerLink="null" portType="wpc:null" wpc:displayName="Log - [UCDCL.DeleteDevice ] " wpc:id="544">
                    <wpc:script>
                      <wpc:javaCode><![CDATA[SdpLoggerHelper.logMessage(SdpLoggerHelper.INVOKE_STR +" : UCDCL.DeleteDevice",PROCESS_NAME,processID,SdpLoggerHelper.INFO);
														
SdpLoggerHelper.logMessage("Request BO:[ucdclEmailOrPhone]",PROCESS_NAME,processID,SdpLoggerHelper.INFO);
														
SdpLoggerHelper.logMessage("ucdclEmailOrPhone :"+ucdclEmailOrPhone,PROCESS_NAME,processID,SdpLoggerHelper.INFO);
SdpLoggerHelper.logMessage("ucdclDeviceNumber :"+ucdclDeviceNumber,PROCESS_NAME,processID,SdpLoggerHelper.INFO);
SdpLoggerHelper.logMessage("ucdclAuthentication :"+ucdclAuthentication,PROCESS_NAME,processID,SdpLoggerHelper.INFO);
														]]></wpc:javaCode>
                    </wpc:script>
                  </bpws:invoke>
                  <bpws:invoke name="UCDCLDeleteDevice" operation="deleteDevice" partnerLink="UcdclCompensableService_InterfacePartner" portType="ns18:UCDCLCompensableService_Interface" wpc:displayName="UCDCL Delete Device" wpc:id="208">
                    <wpc:input>
                      <wpc:parameter name="order" variable="processBO"/>
                    </wpc:input>
                    <wpc:output>
                      <wpc:parameter name="transactionDetail" variable="Transaction_DetailPort"/>
                    </wpc:output>
                    <bpws:catch faultName="wpc:runtimeFailure" faultVariable="bpcFault" wpc:faultType="wpc:BPCStandardFaultType" wpc:id="926" wpc:variableId="209">
                      <bpws:invoke name="Handleruntimefailures" operation="null" partnerLink="null" portType="wpc:null" wpc:displayName="handle runtime failures" wpc:id="401">
                        <wpc:script>
                          <wpc:javaCode><![CDATA[SdpErrorHelper.setErrDetInTransDet(Transaction_DetailPort,bpcFault,SdpErrorHelper.SEVERITY_FATAL);

SdpLoggerHelper.logMessage(SdpLoggerHelper.RUNTIME_FAILURE+"  UCDCL.DeleteDevice",PROCESS_NAME,processID,SdpLoggerHelper.FATAL);]]></wpc:javaCode>
                        </wpc:script>
                      </bpws:invoke>
                    </bpws:catch>
                    <bpws:catch faultName="ns18:serviceCallFault" faultVariable="scFault" wpc:faultType="java:ServiceCallFault" wpc:id="927" wpc:variableId="212">
                      <bpws:invoke name="SetErrorDetails" operation="null" partnerLink="null" portType="wpc:null" wpc:displayName="Set Error Details" wpc:id="469">
                        <wpc:script>
                          <wpc:javaCode><![CDATA[Transaction_DetailPort.setBoolean(SdpHelper.ERRORINDICATOR,true);

new att.lightspeed.sdp.helper.TransactionDetail(Transaction_DetailPort).setSDPErrorMessage(scFault);

Transaction_DetailPort.getDataObject("errorDetails").getDataObject("Error").setString("Severity",SdpErrorHelper.SEVERITY_FATAL);

 
SdpLoggerHelper.logMessage(SdpLoggerHelper.FAULT_FAILURE +"  UCDCL.DeleteDevice",PROCESS_NAME,processID,SdpLoggerHelper.FATAL);
 ]]></wpc:javaCode>
                        </wpc:script>
                      </bpws:invoke>
                    </bpws:catch>
                    <bpws:catchAll wpc:id="925">
                      <bpws:invoke name="Handleruntimefailures1" operation="null" partnerLink="null" portType="wpc:null" wpc:displayName="handle runtime failures" wpc:id="404">
                        <wpc:script>
                          <wpc:javaCode><![CDATA[SdpErrorHelper.setErrDetInTransDet(Transaction_DetailPort,null,SdpErrorHelper.SEVERITY_FATAL);

SdpLoggerHelper.logMessage(SdpLoggerHelper.UNKNOWN_FAILURE+"  UCDCL.DeleteDevice",PROCESS_NAME,processID,SdpLoggerHelper.FATAL);]]></wpc:javaCode>
                        </wpc:script>
                      </bpws:invoke>
                    </bpws:catchAll>
                  </bpws:invoke>
                  <bpws:switch name="CheckUCDCLError" wpc:displayName="check UCDCL Error" wpc:id="216">
                    <bpws:case wpc:id="217">
                      <bpws:condition><![CDATA[boolean __result__1 = com.ibm.wbiservers.brules.core.codegen.NillableUtility.getBoolean(Transaction_DetailPort, "errorIndicator", "Transaction_DetailPort");
return __result__1;

//@generated:com.ibm.wbit.activity.ui
//<?xml version="1.0" encoding="UTF-8"?>
//<com.ibm.wbit.activity:CompositeActivity xmi:version="2.0" xmlns:xmi="http://www.omg.org/XMI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:com.ibm.wbit.activity="http:///com/ibm/wbit/activity.ecore" name="ActivityMethod">
//  <result name="Result">
//    <type xsi:type="com.ibm.wbit.activity:JavaElementType" name="boolean"/>
//  </result>
//  <exceptions>
//    <type xsi:type="com.ibm.wbit.activity:JavaElementType" name="com.ibm.bpe.api.ProcessException"/>
//  </exceptions>
//  <executableElements xsi:type="com.ibm.wbit.activity:Expression" value="Transaction_DetailPort.errorIndicator" field="true">
//    <dataOutputs target="//@executableElements.1"/>
//    <type xsi:type="com.ibm.wbit.activity:XSDElementType" name="boolean" namespace="http://www.w3.org/2001/XMLSchema" nillable="false"/>
//  </executableElements>
//  <executableElements xsi:type="com.ibm.wbit.activity:ReturnElement" dataInputs="//@executableElements.0/@dataOutputs.0"/>
//  <executableGroups executableElements="//@executableElements.0 //@executableElements.1"/>
//</com.ibm.wbit.activity:CompositeActivity>
//@generated:end
//!SMAP!*S WBIACTDBG
//!SMAP!*L
//!SMAP!1:1,1
//!SMAP!2:2,1
//!SMAP!1000000:26,1]]></bpws:condition>
                      <bpws:sequence name="HiddenSequence3" wpc:id="1073742615">
                        <bpws:invoke name="LogUCDCLDeleteDeviceError" operation="null" partnerLink="null" portType="wpc:null" wpc:displayName="Log - [UCDCL.DeleteDevice  - Error] " wpc:id="546">
                          <wpc:script>
                            <wpc:javaCode><![CDATA[String strSeverity =Transaction_DetailPort.getString("errorDetails/Error/Severity");
int logLevel = SdpHelper.getLogLevel(strSeverity);
SdpLoggerHelper.logMessage(" UCDCL.DeleteDevice- "+SdpLoggerHelper.ERROR_STR+"["+strSeverity+"]",PROCESS_NAME,processID,logLevel);]]></wpc:javaCode>
                          </wpc:script>
                        </bpws:invoke>
                        <bpws:assign name="PrepareGBOForLogging3" wpc:displayName="Prepare GBO For Logging" wpc:id="497">
                          <bpws:copy>
                            <bpws:from variable="Transaction_DetailPort">
                              <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/State]]></bpws:query>
                            </bpws:from>
                            <bpws:to variable="STATE"/>
                          </bpws:copy>
                          <bpws:copy>
                            <bpws:from variable="Transaction_DetailPort">
                              <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/errorDetails/Error/Severity]]></bpws:query>
                            </bpws:from>
                            <bpws:to variable="SEVERITY"/>
                          </bpws:copy>
                          <bpws:copy>
                            <bpws:from variable="Transaction_DetailPort">
                              <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/errorDetails/Error/Message]]></bpws:query>
                            </bpws:from>
                            <bpws:to variable="SDP_ERROR_OBJECT_MESSAGE"/>
                          </bpws:copy>
                          <bpws:copy>
                            <bpws:from variable="Transaction_DetailPort">
                              <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/errorDetails/Error/TargetSystem]]></bpws:query>
                            </bpws:from>
                            <bpws:to variable="TARGET_SYSTEM_NAME"/>
                          </bpws:copy>
                          <bpws:copy>
                            <bpws:from>true</bpws:from>
                            <bpws:to variable="MANUAL_INTERVENTION_FLAG"/>
                          </bpws:copy>
                          <bpws:copy>
                            <bpws:from variable="Transaction_DetailPort">
                              <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/currentTargetOperation]]></bpws:query>
                            </bpws:from>
                            <bpws:to variable="TARGET_OPERATION_NAME"/>
                          </bpws:copy>
                          <bpws:copy>
                            <bpws:from variable="Transaction_DetailPort">
                              <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/errorDetails/Error/Message]]></bpws:query>
                            </bpws:from>
                            <bpws:to variable="SDP_ORDER_RequestProc">
                              <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/transactionDetail/errorDetails/Error/Message]]></bpws:query>
                            </bpws:to>
                          </bpws:copy>
                        </bpws:assign>
                        <bpws:invoke name="LogCommonErrorLogger4" operation="null" partnerLink="null" portType="wpc:null" wpc:displayName="Log - [CommonErrorLogger ] " wpc:id="548">
                          <wpc:script>
                            <wpc:javaCode><![CDATA[SdpLoggerHelper.logMessage("Invoking CommonErrorLogger:",PROCESS_NAME,processID,SdpLoggerHelper.INFO);

SDP_ORDER_RequestProc.setString(SdpHelper.TEMPSTRING1_PATH.replace('.','/'),processID);	
										
																		]]></wpc:javaCode>
                          </wpc:script>
                        </bpws:invoke>
                        <bpws:invoke name="InvokeLogError2" operation="logErrorDetails" partnerLink="FromSdp_CommonErrorLogger_Interface" portType="ns12:FromSdp_CommonErrorLogger_Interface" wpc:displayName="Invoke Log Error" wpc:id="492">
                          <wpc:input>
                            <wpc:parameter name="transactionState" variable="STATE"/>
                            <wpc:parameter name="targetOperation" variable="TARGET_OPERATION_NAME"/>
                            <wpc:parameter name="parentProcessName" variable="PARENT_PROCESS_NAME"/>
                            <wpc:parameter name="sdpOrder" variable="SDP_ORDER_RequestProc"/>
                            <wpc:parameter name="manualInterventionInd" variable="MANUAL_INTERVENTION_FLAG"/>
                            <wpc:parameter name="severity" variable="SEVERITY"/>
                            <wpc:parameter name="targetSystem" variable="TARGET_SYSTEM_NAME"/>
                            <wpc:parameter name="sdpErrorObjectMessage" variable="SDP_ERROR_OBJECT_MESSAGE"/>
                          </wpc:input>
                          <wpc:output>
                            <wpc:parameter name="response" variable="Transaction_Error"/>
                          </wpc:output>
                        </bpws:invoke>
                        <bpws:invoke name="LogCommonErrorLogger5" operation="null" partnerLink="null" portType="wpc:null" wpc:displayName="Log - [CommonErrorLogger ] " wpc:id="550">
                          <wpc:script>
                            <wpc:javaCode><![CDATA[SdpLoggerHelper.logMessage(" CommonErrorLogger",PROCESS_NAME,processID,SdpLoggerHelper.INFO);]]></wpc:javaCode>
                          </wpc:script>
                        </bpws:invoke>
                        <bpws:assign name="Copyproctotrigg4" wpc:displayName="copy proc to trigg" wpc:id="387">
                          <bpws:copy>
                            <bpws:from variable="SDP_ORDER_RequestProc"/>
                            <bpws:to variable="SDP_ORDER_Request"/>
                          </bpws:copy>
                          <bpws:copy>
                            <bpws:from variable="SDP_ORDER_ProvProc"/>
                            <bpws:to variable="SDP_ORDER_Prov"/>
                          </bpws:copy>
                        </bpws:assign>
                        <bpws:reply name="Reply1" operation="compensateUpdateMailBox" partnerLink="UpdateMailBox_Compensation_Interface" portType="ns11:UpdateMailBox_Compensation_Interface" wpc:displayName="Reply1" wpc:id="513">
                          <wpc:input>
                            <wpc:parameter name="SDP_ORDER_ProvPort" variable="SDP_ORDER_Prov"/>
                            <wpc:parameter name="Transaction_Detail" variable="Transaction_DetailPort"/>
                            <wpc:parameter name="SDP_ORDER_RequestPort" variable="SDP_ORDER_Request"/>
                          </wpc:input>
                        </bpws:reply>
                        <bpws:terminate name="Terminate2" wpc:displayName="Terminate2" wpc:id="502"/>
                      </bpws:sequence>
                    </bpws:case>
                  </bpws:switch>
                  <bpws:invoke name="LogUCDCLDeleteDeviceSuccess" operation="null" partnerLink="null" portType="wpc:null" wpc:displayName="Log - [UCDCL.DeleteDevice -Success ] " wpc:id="571">
                    <wpc:script>
                      <wpc:javaCode><![CDATA[SdpLoggerHelper.logMessage(" UCDCL.DeleteDevice -"+SdpLoggerHelper.SUCCESS_STR,PROCESS_NAME,processID,SdpLoggerHelper.INFO);]]></wpc:javaCode>
                    </wpc:script>
                  </bpws:invoke>
                  <bpws:invoke name="SetUMSessionIDUMMessageIP" operation="null" partnerLink="null" portType="wpc:null" wpc:continueOnError="inherit" wpc:displayName="Set UMSessionID &amp; UMMessageIP" wpc:id="818">
                    <wpc:script>
                      <wpc:javaCode><![CDATA[att.lightspeed.sdp.helper.WpsLogger logger = att.lightspeed.sdp.helper.WpsLogger.getLogger(processInstance());
String UMSessionID = null;
String UMMessageCenterIP = null;

UMSessionID = Transaction_DetailPort.getString(SdpHelper.TRANSDETAIL_UMSESSIONID);
UMMessageCenterIP = Transaction_DetailPort.getString(SdpHelper.TRANSDETAIL_UMMESSAGECENTERIP);

logger.debug("UMSessionID from the DeleteDevice Response: " + UMSessionID);
logger.debug("UMMessageCenterIP from the DeleteDevice Response: " + UMMessageCenterIP);

processBO.setString(SdpHelper.xPathify(SdpHelper.TRANSDETAIL_UMSESSIONID_PATH),UMSessionID);

processBO.setString(SdpHelper.xPathify(SdpHelper.TRANSDETAIL_UMMESSAGECENTERIP_PATH),UMMessageCenterIP);
]]></wpc:javaCode>
                    </wpc:script>
                  </bpws:invoke>
                  <bpws:assign name="PreInvokeAssigns13" wpc:displayName="Pre Invoke Assigns" wpc:id="862">
                    <bpws:copy>
                      <bpws:from><![CDATA[UCDCL.Logout.Request]]></bpws:from>
                      <bpws:to variable="Transaction_DetailPort">
                        <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/State]]></bpws:query>
                      </bpws:to>
                    </bpws:copy>
                    <bpws:copy>
                      <bpws:from>UCDCL</bpws:from>
                      <bpws:to variable="Transaction_DetailPort">
                        <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/errorDetails/Error/TargetSystem]]></bpws:query>
                      </bpws:to>
                    </bpws:copy>
                    <bpws:copy>
                      <bpws:from><![CDATA[Logout]]></bpws:from>
                      <bpws:to variable="Transaction_DetailPort">
                        <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/currentTargetOperation]]></bpws:query>
                      </bpws:to>
                    </bpws:copy>
                  </bpws:assign>
                  <bpws:invoke name="LogUCDCLLogout1" operation="null" partnerLink="null" portType="wpc:null" wpc:displayName="Log - [UCDCL.Logout]" wpc:id="863">
                    <wpc:script>
                      <wpc:javaCode><![CDATA[SdpLoggerHelper.logMessage(SdpLoggerHelper.INVOKE_STR +" : UCDCL.Logout",
	PROCESS_NAME,processID,SdpLoggerHelper.INFO);
]]></wpc:javaCode>
                    </wpc:script>
                  </bpws:invoke>
                  <bpws:invoke name="InvokeUCDCLLogout1" operation="provisioningServiceLogout" partnerLink="UcdclCompensableService_InterfacePartner" portType="ns18:UCDCLCompensableService_Interface" wpc:displayName="Invoke - [UCDCL.Logout]" wpc:id="864">
                    <wpc:input>
                      <wpc:parameter name="transactionDetail" variable="Transaction_DetailPort"/>
                    </wpc:input>
                    <wpc:output/>
                    <bpws:catch faultName="wpc:runtimeFailure" faultVariable="bpcFault" wpc:faultType="wpc:BPCStandardFaultType" wpc:id="920" wpc:variableId="866">
                      <bpws:invoke name="Handleruntimefailures" operation="null" partnerLink="null" portType="wpc:null" wpc:displayName="handle runtime failures" wpc:id="867">
                        <wpc:script>
                          <wpc:javaCode><![CDATA[SdpErrorHelper.setErrDetInTransDet(Transaction_DetailPort,bpcFault,SdpErrorHelper.SEVERITY_FATAL);

SdpLoggerHelper.logMessage(SdpLoggerHelper.RUNTIME_FAILURE+"  UCDCL.Logout",PROCESS_NAME,processID,SdpLoggerHelper.FATAL);]]></wpc:javaCode>
                        </wpc:script>
                      </bpws:invoke>
                    </bpws:catch>
                    <bpws:catch faultName="ns18:serviceCallFault" faultVariable="scFault" wpc:faultType="java:ServiceCallFault" wpc:id="921" wpc:variableId="868">
                      <bpws:invoke name="SetErrorDetails" operation="null" partnerLink="null" portType="wpc:null" wpc:displayName="Set Error Details" wpc:id="869">
                        <wpc:script>
                          <wpc:javaCode><![CDATA[Transaction_DetailPort.setBoolean(SdpHelper.ERRORINDICATOR,true);

new att.lightspeed.sdp.helper.TransactionDetail(Transaction_DetailPort).setSDPErrorMessage(scFault);

Transaction_DetailPort.getDataObject("errorDetails").getDataObject("Error").setString("Severity",SdpErrorHelper.SEVERITY_FATAL);

 
SdpLoggerHelper.logMessage(SdpLoggerHelper.FAULT_FAILURE +"  UCDCL.Logout",PROCESS_NAME,processID,SdpLoggerHelper.FATAL);
 ]]></wpc:javaCode>
                        </wpc:script>
                      </bpws:invoke>
                    </bpws:catch>
                    <bpws:catchAll wpc:id="919">
                      <bpws:invoke name="Handleruntimefailures1" operation="null" partnerLink="null" portType="wpc:null" wpc:displayName="handle runtime failures" wpc:id="865">
                        <wpc:script>
                          <wpc:javaCode><![CDATA[SdpErrorHelper.setErrDetInTransDet(Transaction_DetailPort,null,SdpErrorHelper.SEVERITY_FATAL);

SdpLoggerHelper.logMessage(SdpLoggerHelper.UNKNOWN_FAILURE+"  UCDCL.Logout",PROCESS_NAME,processID,SdpLoggerHelper.FATAL);]]></wpc:javaCode>
                        </wpc:script>
                      </bpws:invoke>
                    </bpws:catchAll>
                  </bpws:invoke>
                  <bpws:switch name="UCDCLError5" wpc:displayName="UCDCL Error?" wpc:id="870">
                    <bpws:case wpc:id="872">
                      <bpws:condition><![CDATA[boolean __result__1 = com.ibm.wbiservers.brules.core.codegen.NillableUtility.getBoolean(Transaction_DetailPort, "errorIndicator", "Transaction_DetailPort");
return __result__1;

//@generated:com.ibm.wbit.activity.ui
//<?xml version="1.0" encoding="UTF-8"?>
//<com.ibm.wbit.activity:CompositeActivity xmi:version="2.0" xmlns:xmi="http://www.omg.org/XMI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:com.ibm.wbit.activity="http:///com/ibm/wbit/activity.ecore" name="ActivityMethod">
//  <result name="Result">
//    <type xsi:type="com.ibm.wbit.activity:JavaElementType" name="boolean"/>
//  </result>
//  <exceptions>
//    <type xsi:type="com.ibm.wbit.activity:JavaElementType" name="com.ibm.bpe.api.ProcessException"/>
//  </exceptions>
//  <executableElements xsi:type="com.ibm.wbit.activity:Expression" value="Transaction_DetailPort.errorIndicator" field="true">
//    <dataOutputs target="//@executableElements.1"/>
//    <type xsi:type="com.ibm.wbit.activity:XSDElementType" name="boolean" namespace="http://www.w3.org/2001/XMLSchema" nillable="false"/>
//  </executableElements>
//  <executableElements xsi:type="com.ibm.wbit.activity:ReturnElement" dataInputs="//@executableElements.0/@dataOutputs.0"/>
//  <executableGroups executableElements="//@executableElements.0 //@executableElements.1"/>
//</com.ibm.wbit.activity:CompositeActivity>
//@generated:end
//!SMAP!*S WBIACTDBG
//!SMAP!*L
//!SMAP!1:1,1
//!SMAP!2:2,1
//!SMAP!1000000:26,1]]></bpws:condition>
                      <bpws:sequence name="HiddenSequence13" wpc:id="1073742697">
                        <bpws:invoke name="LogUCDCLLogoutError" operation="null" partnerLink="null" portType="wpc:null" wpc:displayName="Log - [UCDCL.Logout - Error]" wpc:id="874">
                          <wpc:script>
                            <wpc:javaCode><![CDATA[String strSeverity =Transaction_DetailPort.getString("errorDetails/Error/Severity");
int logLevel = SdpHelper.getLogLevel(strSeverity);
SdpLoggerHelper.logMessage(" UCDCL.Logout- "+SdpLoggerHelper.ERROR_STR+"["+strSeverity+"]",PROCESS_NAME,processID,logLevel);]]></wpc:javaCode>
                          </wpc:script>
                        </bpws:invoke>
                        <bpws:assign name="PrepareGBOForLogging3" wpc:displayName="Prepare GBO For Logging" wpc:id="875">
                          <bpws:copy>
                            <bpws:from variable="Transaction_DetailPort">
                              <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/State]]></bpws:query>
                            </bpws:from>
                            <bpws:to variable="STATE"/>
                          </bpws:copy>
                          <bpws:copy>
                            <bpws:from variable="Transaction_DetailPort">
                              <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/errorDetails/Error/Severity]]></bpws:query>
                            </bpws:from>
                            <bpws:to variable="SEVERITY"/>
                          </bpws:copy>
                          <bpws:copy>
                            <bpws:from variable="Transaction_DetailPort">
                              <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/errorDetails/Error/Message]]></bpws:query>
                            </bpws:from>
                            <bpws:to variable="SDP_ERROR_OBJECT_MESSAGE"/>
                          </bpws:copy>
                          <bpws:copy>
                            <bpws:from variable="Transaction_DetailPort">
                              <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/errorDetails/Error/TargetSystem]]></bpws:query>
                            </bpws:from>
                            <bpws:to variable="TARGET_SYSTEM_NAME"/>
                          </bpws:copy>
                          <bpws:copy>
                            <bpws:from>true</bpws:from>
                            <bpws:to variable="MANUAL_INTERVENTION_FLAG"/>
                          </bpws:copy>
                          <bpws:copy>
                            <bpws:from variable="Transaction_DetailPort">
                              <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/currentTargetOperation]]></bpws:query>
                            </bpws:from>
                            <bpws:to variable="TARGET_OPERATION_NAME"/>
                          </bpws:copy>
                          <bpws:copy>
                            <bpws:from variable="Transaction_DetailPort">
                              <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/errorDetails/Error/Message]]></bpws:query>
                            </bpws:from>
                            <bpws:to variable="SDP_ORDER_RequestProc">
                              <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/transactionDetail/errorDetails/Error/Message]]></bpws:query>
                            </bpws:to>
                          </bpws:copy>
                        </bpws:assign>
                        <bpws:invoke name="LogCommonErrorLogger4" operation="null" partnerLink="null" portType="wpc:null" wpc:displayName="Log - [CommonErrorLogger ] " wpc:id="876">
                          <wpc:script>
                            <wpc:javaCode><![CDATA[SdpLoggerHelper.logMessage("Invoking CommonErrorLogger:",PROCESS_NAME,processID,SdpLoggerHelper.INFO);

SDP_ORDER_RequestProc.setString(SdpHelper.TEMPSTRING1_PATH.replace('.','/'),processID);	
										
																		]]></wpc:javaCode>
                          </wpc:script>
                        </bpws:invoke>
                        <bpws:invoke name="InvokeLogError2" operation="logErrorDetails" partnerLink="FromSdp_CommonErrorLogger_Interface" portType="ns12:FromSdp_CommonErrorLogger_Interface" wpc:displayName="Invoke Log Error" wpc:id="877">
                          <wpc:input>
                            <wpc:parameter name="transactionState" variable="STATE"/>
                            <wpc:parameter name="targetOperation" variable="TARGET_OPERATION_NAME"/>
                            <wpc:parameter name="parentProcessName" variable="PARENT_PROCESS_NAME"/>
                            <wpc:parameter name="sdpOrder" variable="SDP_ORDER_RequestProc"/>
                            <wpc:parameter name="manualInterventionInd" variable="MANUAL_INTERVENTION_FLAG"/>
                            <wpc:parameter name="severity" variable="SEVERITY"/>
                            <wpc:parameter name="targetSystem" variable="TARGET_SYSTEM_NAME"/>
                            <wpc:parameter name="sdpErrorObjectMessage" variable="SDP_ERROR_OBJECT_MESSAGE"/>
                          </wpc:input>
                          <wpc:output>
                            <wpc:parameter name="response" variable="Transaction_Error"/>
                          </wpc:output>
                        </bpws:invoke>
                        <bpws:invoke name="LogCommonErrorLogger5" operation="null" partnerLink="null" portType="wpc:null" wpc:displayName="Log - [CommonErrorLogger ] " wpc:id="878">
                          <wpc:script>
                            <wpc:javaCode><![CDATA[SdpLoggerHelper.logMessage(" CommonErrorLogger",PROCESS_NAME,processID,SdpLoggerHelper.INFO);]]></wpc:javaCode>
                          </wpc:script>
                        </bpws:invoke>
                        <bpws:assign name="Copyproctotrigg4" wpc:displayName="copy proc to trigg" wpc:id="879">
                          <bpws:copy>
                            <bpws:from variable="SDP_ORDER_RequestProc"/>
                            <bpws:to variable="SDP_ORDER_Request"/>
                          </bpws:copy>
                          <bpws:copy>
                            <bpws:from variable="SDP_ORDER_ProvProc"/>
                            <bpws:to variable="SDP_ORDER_Prov"/>
                          </bpws:copy>
                        </bpws:assign>
                        <bpws:reply name="Reply4" operation="compensateUpdateMailBox" partnerLink="UpdateMailBox_Compensation_Interface" portType="ns11:UpdateMailBox_Compensation_Interface" wpc:displayName="Reply" wpc:id="880">
                          <wpc:input>
                            <wpc:parameter name="SDP_ORDER_ProvPort" variable="SDP_ORDER_Prov"/>
                            <wpc:parameter name="Transaction_Detail" variable="Transaction_DetailPort"/>
                            <wpc:parameter name="SDP_ORDER_RequestPort" variable="SDP_ORDER_Request"/>
                          </wpc:input>
                        </bpws:reply>
                        <bpws:terminate name="Terminate4" wpc:displayName="Terminate" wpc:id="881"/>
                      </bpws:sequence>
                    </bpws:case>
                    <bpws:otherwise wpc:id="928">
                      <bpws:invoke name="LogUCDCLLogoutSuccess" operation="null" partnerLink="null" portType="wpc:null" wpc:displayName="Log - [UCDCL.Logout -Success] " wpc:id="871">
                        <wpc:script>
                          <wpc:javaCode><![CDATA[SdpLoggerHelper.logMessage("UCDCL.Logout -"+SdpLoggerHelper.SUCCESS_STR,PROCESS_NAME,processID,SdpLoggerHelper.INFO);]]></wpc:javaCode>
                        </wpc:script>
                      </bpws:invoke>
                    </bpws:otherwise>
                  </bpws:switch>
                </bpws:sequence>
              </bpws:case>
            </bpws:switch>
            <bpws:assign name="Preinvokeassigns5" wpc:displayName="pre invoke assigns" wpc:id="466">
              <bpws:copy>
                <bpws:from>1</bpws:from>
                <bpws:to variable="UMBState"/>
              </bpws:copy>
            </bpws:assign>
            <bpws:switch name="Choice3" wpc:displayName="Choice3" wpc:id="454">
              <bpws:case wpc:id="455">
                <bpws:condition><![CDATA[boolean __result__1 = (com.ibm.wbiservers.brules.core.codegen.NillableUtility.compareNillableValues(com.ibm.wbiservers.brules.core.codegen.NillableUtility.getDataObject(com.ibm.wbiservers.brules.core.codegen.NillableUtility.getDataObject(SDP_ORDER_RequestProc, "transactionDetail", "SDP_ORDER_RequestProc"), "tempStoreNonArray", "transactionDetail").get("temp11"), UMBState, com.ibm.wbiservers.brules.core.codegen.NillableUtility.GREATER_THAN_OPERATOR));
return __result__1;

//@generated:com.ibm.wbit.activity.ui
//<?xml version="1.0" encoding="UTF-8"?>
//<com.ibm.wbit.activity:CompositeActivity xmi:version="2.0" xmlns:xmi="http://www.omg.org/XMI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:com.ibm.wbit.activity="http:///com/ibm/wbit/activity.ecore" name="ActivityMethod">
//  <result name="Result">
//    <type xsi:type="com.ibm.wbit.activity:JavaElementType" name="boolean"/>
//  </result>
//  <exceptions>
//    <type xsi:type="com.ibm.wbit.activity:JavaElementType" name="com.ibm.bpe.api.ProcessException"/>
//  </exceptions>
//  <executableElements xsi:type="com.ibm.wbit.activity:Expression" value="(SDP_ORDER_RequestProc.transactionDetail.tempStoreNonArray.temp11 > UMBState)">
//    <dataOutputs target="//@executableElements.1"/>
//    <type xsi:type="com.ibm.wbit.activity:JavaElementType" name="boolean"/>
//  </executableElements>
//  <executableElements xsi:type="com.ibm.wbit.activity:ReturnElement" dataInputs="//@executableElements.0/@dataOutputs.0"/>
//  <executableGroups executableElements="//@executableElements.0 //@executableElements.1"/>
//</com.ibm.wbit.activity:CompositeActivity>
//@generated:end
//!SMAP!*S WBIACTDBG
//!SMAP!*L
//!SMAP!1:1,1
//!SMAP!2:2,1
//!SMAP!1000000:26,1]]></bpws:condition>
                <bpws:sequence name="HiddenSequence16" wpc:id="1073742614">
                  <bpws:assign name="PreInvokeAssigns11" wpc:displayName="Pre Invoke Assigns" wpc:id="819">
                    <bpws:copy>
                      <bpws:from variable="EmptyTransaction_Detail"/>
                      <bpws:to variable="Transaction_DetailPort"/>
                    </bpws:copy>
                    <bpws:copy>
                      <bpws:from>UCDCL.Login.Request</bpws:from>
                      <bpws:to variable="Transaction_DetailPort">
                        <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/State]]></bpws:query>
                      </bpws:to>
                    </bpws:copy>
                    <bpws:copy>
                      <bpws:from>UCDCL</bpws:from>
                      <bpws:to variable="Transaction_DetailPort">
                        <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/errorDetails/Error/TargetSystem]]></bpws:query>
                      </bpws:to>
                    </bpws:copy>
                    <bpws:copy>
                      <bpws:from>Login</bpws:from>
                      <bpws:to variable="Transaction_DetailPort">
                        <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/currentTargetOperation]]></bpws:query>
                      </bpws:to>
                    </bpws:copy>
                  </bpws:assign>
                  <bpws:invoke name="LogUCDCLLogin2" operation="null" partnerLink="null" portType="wpc:null" wpc:displayName="Log - [UCDCL.Login]" wpc:id="840">
                    <wpc:script>
                      <wpc:javaCode><![CDATA[SdpLoggerHelper.logMessage(SdpLoggerHelper.INVOKE_STR +" : UCDCL.Login",
	PROCESS_NAME,processID,SdpLoggerHelper.INFO);
]]></wpc:javaCode>
                    </wpc:script>
                  </bpws:invoke>
                  <bpws:invoke name="InvokeUCDCLLogin2" operation="provisioningServiceLogin" partnerLink="UcdclCompensableService_InterfacePartner" portType="ns18:UCDCLCompensableService_Interface" wpc:displayName="Invoke - [UCDCL.Login]" wpc:id="841">
                    <wpc:input>
                      <wpc:parameter name="transactionDetail" variable="Transaction_DetailPort"/>
                    </wpc:input>
                    <wpc:output>
                      <wpc:parameter name="transactionDetail" variable="Transaction_DetailPort"/>
                    </wpc:output>
                    <bpws:catch faultName="wpc:runtimeFailure" faultVariable="bpcFault" wpc:faultType="wpc:BPCStandardFaultType" wpc:id="912" wpc:variableId="843">
                      <bpws:invoke name="Handleruntimefailures" operation="null" partnerLink="null" portType="wpc:null" wpc:displayName="handle runtime failures" wpc:id="844">
                        <wpc:script>
                          <wpc:javaCode><![CDATA[SdpErrorHelper.setErrDetInTransDet(Transaction_DetailPort,bpcFault,SdpErrorHelper.SEVERITY_FATAL);

SdpLoggerHelper.logMessage(SdpLoggerHelper.RUNTIME_FAILURE+"  UCDCL.Login",PROCESS_NAME,processID,SdpLoggerHelper.FATAL);]]></wpc:javaCode>
                        </wpc:script>
                      </bpws:invoke>
                    </bpws:catch>
                    <bpws:catch faultName="ns18:serviceCallFault" faultVariable="scFault" wpc:faultType="java:ServiceCallFault" wpc:id="913" wpc:variableId="845">
                      <bpws:invoke name="SetErrorDetails" operation="null" partnerLink="null" portType="wpc:null" wpc:displayName="Set Error Details" wpc:id="846">
                        <wpc:script>
                          <wpc:javaCode><![CDATA[Transaction_DetailPort.setBoolean(SdpHelper.ERRORINDICATOR,true);

new att.lightspeed.sdp.helper.TransactionDetail(Transaction_DetailPort).setSDPErrorMessage(scFault);

Transaction_DetailPort.getDataObject("errorDetails").getDataObject("Error").setString("Severity",SdpErrorHelper.SEVERITY_FATAL);

 
SdpLoggerHelper.logMessage(SdpLoggerHelper.FAULT_FAILURE +"  UCDCL.Login",PROCESS_NAME,processID,SdpLoggerHelper.FATAL);
 ]]></wpc:javaCode>
                        </wpc:script>
                      </bpws:invoke>
                    </bpws:catch>
                    <bpws:catchAll wpc:id="911">
                      <bpws:invoke name="Handleruntimefailures1" operation="null" partnerLink="null" portType="wpc:null" wpc:displayName="handle runtime failures" wpc:id="842">
                        <wpc:script>
                          <wpc:javaCode><![CDATA[SdpErrorHelper.setErrDetInTransDet(Transaction_DetailPort,null,SdpErrorHelper.SEVERITY_FATAL);

SdpLoggerHelper.logMessage(SdpLoggerHelper.UNKNOWN_FAILURE+"  UCDCL.Login",PROCESS_NAME,processID,SdpLoggerHelper.FATAL);]]></wpc:javaCode>
                        </wpc:script>
                      </bpws:invoke>
                    </bpws:catchAll>
                  </bpws:invoke>
                  <bpws:switch name="UCDCLError6" wpc:displayName="UCDCL Error?" wpc:id="847">
                    <bpws:case wpc:id="851">
                      <bpws:condition><![CDATA[boolean __result__1 = com.ibm.wbiservers.brules.core.codegen.NillableUtility.getBoolean(Transaction_DetailPort, "errorIndicator", "Transaction_DetailPort");
return __result__1;

//@generated:com.ibm.wbit.activity.ui
//<?xml version="1.0" encoding="UTF-8"?>
//<com.ibm.wbit.activity:CompositeActivity xmi:version="2.0" xmlns:xmi="http://www.omg.org/XMI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:com.ibm.wbit.activity="http:///com/ibm/wbit/activity.ecore" name="ActivityMethod">
//  <result name="Result">
//    <type xsi:type="com.ibm.wbit.activity:JavaElementType" name="boolean"/>
//  </result>
//  <exceptions>
//    <type xsi:type="com.ibm.wbit.activity:JavaElementType" name="com.ibm.bpe.api.ProcessException"/>
//  </exceptions>
//  <executableElements xsi:type="com.ibm.wbit.activity:Expression" value="Transaction_DetailPort.errorIndicator" field="true">
//    <dataOutputs target="//@executableElements.1"/>
//    <type xsi:type="com.ibm.wbit.activity:XSDElementType" name="boolean" namespace="http://www.w3.org/2001/XMLSchema" nillable="false"/>
//  </executableElements>
//  <executableElements xsi:type="com.ibm.wbit.activity:ReturnElement" dataInputs="//@executableElements.0/@dataOutputs.0"/>
//  <executableGroups executableElements="//@executableElements.0 //@executableElements.1"/>
//</com.ibm.wbit.activity:CompositeActivity>
//@generated:end
//!SMAP!*S WBIACTDBG
//!SMAP!*L
//!SMAP!1:1,1
//!SMAP!2:2,1
//!SMAP!1000000:26,1]]></bpws:condition>
                      <bpws:sequence name="HiddenSequence12" wpc:id="1073742676">
                        <bpws:invoke name="LogUCDCLLoginError" operation="null" partnerLink="null" portType="wpc:null" wpc:displayName="Log - [UCDCL.Login  - Error] " wpc:id="853">
                          <wpc:script>
                            <wpc:javaCode><![CDATA[String strSeverity =Transaction_DetailPort.getString("errorDetails/Error/Severity");
int logLevel = SdpHelper.getLogLevel(strSeverity);
SdpLoggerHelper.logMessage(" UCDCL.Login- "+SdpLoggerHelper.ERROR_STR+"["+strSeverity+"]",PROCESS_NAME,processID,logLevel);]]></wpc:javaCode>
                          </wpc:script>
                        </bpws:invoke>
                        <bpws:assign name="PrepareGBOForLogging3" wpc:displayName="Prepare GBO For Logging" wpc:id="854">
                          <bpws:copy>
                            <bpws:from variable="Transaction_DetailPort">
                              <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/State]]></bpws:query>
                            </bpws:from>
                            <bpws:to variable="STATE"/>
                          </bpws:copy>
                          <bpws:copy>
                            <bpws:from variable="Transaction_DetailPort">
                              <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/errorDetails/Error/Severity]]></bpws:query>
                            </bpws:from>
                            <bpws:to variable="SEVERITY"/>
                          </bpws:copy>
                          <bpws:copy>
                            <bpws:from variable="Transaction_DetailPort">
                              <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/errorDetails/Error/Message]]></bpws:query>
                            </bpws:from>
                            <bpws:to variable="SDP_ERROR_OBJECT_MESSAGE"/>
                          </bpws:copy>
                          <bpws:copy>
                            <bpws:from variable="Transaction_DetailPort">
                              <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/errorDetails/Error/TargetSystem]]></bpws:query>
                            </bpws:from>
                            <bpws:to variable="TARGET_SYSTEM_NAME"/>
                          </bpws:copy>
                          <bpws:copy>
                            <bpws:from>true</bpws:from>
                            <bpws:to variable="MANUAL_INTERVENTION_FLAG"/>
                          </bpws:copy>
                          <bpws:copy>
                            <bpws:from variable="Transaction_DetailPort">
                              <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/currentTargetOperation]]></bpws:query>
                            </bpws:from>
                            <bpws:to variable="TARGET_OPERATION_NAME"/>
                          </bpws:copy>
                          <bpws:copy>
                            <bpws:from variable="Transaction_DetailPort">
                              <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/errorDetails/Error/Message]]></bpws:query>
                            </bpws:from>
                            <bpws:to variable="SDP_ORDER_RequestProc">
                              <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/transactionDetail/errorDetails/Error/Message]]></bpws:query>
                            </bpws:to>
                          </bpws:copy>
                        </bpws:assign>
                        <bpws:invoke name="LogCommonErrorLogger4" operation="null" partnerLink="null" portType="wpc:null" wpc:displayName="Log - [CommonErrorLogger ] " wpc:id="855">
                          <wpc:script>
                            <wpc:javaCode><![CDATA[SdpLoggerHelper.logMessage("Invoking CommonErrorLogger:",PROCESS_NAME,processID,SdpLoggerHelper.INFO);

SDP_ORDER_RequestProc.setString(SdpHelper.TEMPSTRING1_PATH.replace('.','/'),processID);	
										
																		]]></wpc:javaCode>
                          </wpc:script>
                        </bpws:invoke>
                        <bpws:invoke name="InvokeLogError2" operation="logErrorDetails" partnerLink="FromSdp_CommonErrorLogger_Interface" portType="ns12:FromSdp_CommonErrorLogger_Interface" wpc:displayName="Invoke Log Error" wpc:id="856">
                          <wpc:input>
                            <wpc:parameter name="transactionState" variable="STATE"/>
                            <wpc:parameter name="targetOperation" variable="TARGET_OPERATION_NAME"/>
                            <wpc:parameter name="parentProcessName" variable="PARENT_PROCESS_NAME"/>
                            <wpc:parameter name="sdpOrder" variable="SDP_ORDER_RequestProc"/>
                            <wpc:parameter name="manualInterventionInd" variable="MANUAL_INTERVENTION_FLAG"/>
                            <wpc:parameter name="severity" variable="SEVERITY"/>
                            <wpc:parameter name="targetSystem" variable="TARGET_SYSTEM_NAME"/>
                            <wpc:parameter name="sdpErrorObjectMessage" variable="SDP_ERROR_OBJECT_MESSAGE"/>
                          </wpc:input>
                          <wpc:output>
                            <wpc:parameter name="response" variable="Transaction_Error"/>
                          </wpc:output>
                        </bpws:invoke>
                        <bpws:invoke name="LogCommonErrorLogger5" operation="null" partnerLink="null" portType="wpc:null" wpc:displayName="Log - [CommonErrorLogger ] " wpc:id="857">
                          <wpc:script>
                            <wpc:javaCode><![CDATA[SdpLoggerHelper.logMessage(" CommonErrorLogger",PROCESS_NAME,processID,SdpLoggerHelper.INFO);]]></wpc:javaCode>
                          </wpc:script>
                        </bpws:invoke>
                        <bpws:assign name="Copyproctotrigg4" wpc:displayName="copy proc to trigg" wpc:id="858">
                          <bpws:copy>
                            <bpws:from variable="SDP_ORDER_RequestProc"/>
                            <bpws:to variable="SDP_ORDER_Request"/>
                          </bpws:copy>
                          <bpws:copy>
                            <bpws:from variable="SDP_ORDER_ProvProc"/>
                            <bpws:to variable="SDP_ORDER_Prov"/>
                          </bpws:copy>
                        </bpws:assign>
                        <bpws:reply name="Reply4" operation="compensateUpdateMailBox" partnerLink="UpdateMailBox_Compensation_Interface" portType="ns11:UpdateMailBox_Compensation_Interface" wpc:displayName="Reply" wpc:id="859">
                          <wpc:input>
                            <wpc:parameter name="SDP_ORDER_ProvPort" variable="SDP_ORDER_Prov"/>
                            <wpc:parameter name="Transaction_Detail" variable="Transaction_DetailPort"/>
                            <wpc:parameter name="SDP_ORDER_RequestPort" variable="SDP_ORDER_Request"/>
                          </wpc:input>
                        </bpws:reply>
                        <bpws:terminate name="Terminate4" wpc:displayName="Terminate" wpc:id="860"/>
                      </bpws:sequence>
                    </bpws:case>
                    <bpws:otherwise wpc:id="918">
                      <bpws:sequence name="HiddenSequence" wpc:id="1073742672">
                        <bpws:invoke name="LogUCDCLLoginSuccess" operation="null" partnerLink="null" portType="wpc:null" wpc:displayName="Log - [UCDCL.Login -Success] " wpc:id="849">
                          <wpc:script>
                            <wpc:javaCode><![CDATA[SdpLoggerHelper.logMessage("UCDCL.Login -"+SdpLoggerHelper.SUCCESS_STR,PROCESS_NAME,processID,SdpLoggerHelper.INFO);]]></wpc:javaCode>
                          </wpc:script>
                        </bpws:invoke>
                        <bpws:invoke name="SetUMSessionIDUMMessageCenterIP" operation="null" partnerLink="null" portType="wpc:null" wpc:continueOnError="inherit" wpc:displayName="Set UMSessionID &amp; UMMessageCenterIP" wpc:id="850">
                          <wpc:script>
                            <wpc:javaCode><![CDATA[att.lightspeed.sdp.helper.WpsLogger logger = att.lightspeed.sdp.helper.WpsLogger.getLogger(processInstance());
String UMSessionID = null;
String UMMessageCenterIP = null;

UMSessionID = Transaction_DetailPort.getString(SdpHelper.TRANSDETAIL_UMSESSIONID);
UMMessageCenterIP = Transaction_DetailPort.getString(SdpHelper.TRANSDETAIL_UMMESSAGECENTERIP);

logger.debug("First UCDCL.Login called for this Transaction");
logger.debug("UMSessionID from the Login Response: " + UMSessionID);
logger.debug("UMMessageCenterIP from the Login Response: " + UMMessageCenterIP);

processBO.setString(SdpHelper.xPathify(SdpHelper.TRANSDETAIL_UMSESSIONID_PATH),UMSessionID);

processBO.setString(SdpHelper.xPathify(SdpHelper.TRANSDETAIL_UMMESSAGECENTERIP_PATH),UMMessageCenterIP);
]]></wpc:javaCode>
                          </wpc:script>
                        </bpws:invoke>
                      </bpws:sequence>
                    </bpws:otherwise>
                  </bpws:switch>
                  <bpws:invoke name="GetTNinRequest" operation="null" partnerLink="null" portType="wpc:null" wpc:displayName="Get TN in Request" wpc:id="432">
                    <wpc:script>
                      <wpc:javaCode><![CDATA[java.lang.Object __result__1 = com.ibm.wbiservers.brules.core.codegen.NillableUtility.getList(reqSubMailBox, "mailBoxTNs", "reqSubMailBox").get(com.ibm.wbiservers.brules.core.codegen.NillableUtility.getInt(intReqTNCounter, "intReqTNCounter"));
reqTN = (commonj.sdo.DataObject)__result__1;

//@generated:com.ibm.wbit.activity.ui
//<?xml version="1.0" encoding="UTF-8"?>
//<com.ibm.wbit.activity:CompositeActivity xmi:version="2.0" xmlns:xmi="http://www.omg.org/XMI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:com.ibm.wbit.activity="http:///com/ibm/wbit/activity.ecore" name="ActivityMethod">
//  <exceptions>
//    <type xsi:type="com.ibm.wbit.activity:JavaElementType" name="com.ibm.bpe.api.ProcessException"/>
//  </exceptions>
//  <executableElements xsi:type="com.ibm.wbit.activity:Expression" value="reqSubMailBox.mailBoxTNs.get(intReqTNCounter)" assignable="false">
//    <dataOutputs target="//@executableElements.1"/>
//    <type xsi:type="com.ibm.wbit.activity:JavaElementType" name="java.lang.Object"/>
//  </executableElements>
//  <executableElements xsi:type="com.ibm.wbit.activity:Expression" dataInputs="//@executableElements.0/@dataOutputs.0" value="reqTN" variable="true">
//    <type xsi:type="com.ibm.wbit.activity:XSDElementType" name="SDP_MemberTNS" namespace="http://www.ibm.com/websphere/crossworlds/2002/BOSchema/SDP_MemberTNS"/>
//  </executableElements>
//  <executableGroups executableElements="//@executableElements.0 //@executableElements.1"/>
//</com.ibm.wbit.activity:CompositeActivity>
//@generated:end
//!SMAP!*S WBIACTDBG
//!SMAP!*L
//!SMAP!1:1,1
//!SMAP!2:2,1
//!SMAP!1000000:25,1]]></wpc:javaCode>
                    </wpc:script>
                  </bpws:invoke>
                  <bpws:assign name="PreInvokeAssigns1" wpc:displayName="Pre Invoke Assigns" wpc:id="223">
                    <bpws:copy>
                      <bpws:from variable="reqSubMailBox">
                        <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/mailBoxInvariantId]]></bpws:query>
                      </bpws:from>
                      <bpws:to variable="ucdclEmailOrPhone"/>
                    </bpws:copy>
                    <bpws:copy>
                      <bpws:from variable="reqTN">
                        <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/tn]]></bpws:query>
                      </bpws:from>
                      <bpws:to variable="ucdclDeviceNumber"/>
                    </bpws:copy>
                    <bpws:copy>
                      <bpws:from>null</bpws:from>
                      <bpws:to variable="ucdclDeviceType"/>
                    </bpws:copy>
                    <bpws:copy>
                      <bpws:from variable="EmptyTransaction_Detail"/>
                      <bpws:to variable="Transaction_DetailPort"/>
                    </bpws:copy>
                    <bpws:copy>
                      <bpws:from>UCDCL.AddDevice.request</bpws:from>
                      <bpws:to variable="Transaction_DetailPort">
                        <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/State]]></bpws:query>
                      </bpws:to>
                    </bpws:copy>
                    <bpws:copy>
                      <bpws:from>UCDCL</bpws:from>
                      <bpws:to variable="Transaction_DetailPort">
                        <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/errorDetails/Error/TargetSystem]]></bpws:query>
                      </bpws:to>
                    </bpws:copy>
                    <bpws:copy>
                      <bpws:from>AddDevice</bpws:from>
                      <bpws:to variable="Transaction_DetailPort">
                        <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/currentTargetOperation]]></bpws:query>
                      </bpws:to>
                    </bpws:copy>
                    <bpws:copy>
                      <bpws:from variable="reqSubMailBox">
                        <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[mailBoxInvariantId]]></bpws:query>
                      </bpws:from>
                      <bpws:to variable="processBO">
                        <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[order/ReqService/product/cvoipProduct/accountMailBoxes[1]/mailBoxInvariantId]]></bpws:query>
                      </bpws:to>
                    </bpws:copy>
                    <bpws:copy>
                      <bpws:from variable="reqTN">
                        <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[tn]]></bpws:query>
                      </bpws:from>
                      <bpws:to variable="processBO">
                        <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[order/ReqService/product/cvoipProduct/cvoipLineSubComponent[1]/tnInfo/tn]]></bpws:query>
                      </bpws:to>
                    </bpws:copy>
                    <bpws:copy>
                      <bpws:from variable="SDP_ORDER_ProvProc">
                        <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[order/ReqService/product/cvoipProduct/cfn]]></bpws:query>
                      </bpws:from>
                      <bpws:to variable="processBO">
                        <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[order/ReqService/product/cvoipProduct/cfn]]></bpws:query>
                      </bpws:to>
                    </bpws:copy>
                  </bpws:assign>
                  <bpws:invoke name="LogUCDCLAddDevice" operation="null" partnerLink="null" portType="wpc:null" wpc:displayName="Log - [UCDCL.AddDevice ] " wpc:id="552">
                    <wpc:script>
                      <wpc:javaCode><![CDATA[SdpLoggerHelper.logMessage(SdpLoggerHelper.INVOKE_STR +" : UCDCL.AddDevice",PROCESS_NAME,processID,SdpLoggerHelper.INFO);
														
														
SdpLoggerHelper.logMessage("Request BO:[ucdclEmailOrPhone]",PROCESS_NAME,processID,SdpLoggerHelper.INFO);
														
													
SdpLoggerHelper.logMessage("ucdclEmailOrPhone:"+ucdclEmailOrPhone,PROCESS_NAME,processID,SdpLoggerHelper.INFO);
														
SdpLoggerHelper.logMessage("ucdclDeviceNumber:"+ucdclDeviceNumber,PROCESS_NAME,processID,SdpLoggerHelper.INFO);
														
SdpLoggerHelper.logMessage("ucdclDeviceType:"+ucdclDeviceType,PROCESS_NAME,processID,SdpLoggerHelper.INFO);
														
SdpLoggerHelper.logMessage("ucdclDeviceCFN:"+ucdclDeviceCFN,PROCESS_NAME,processID,SdpLoggerHelper.INFO);
														
SdpLoggerHelper.logMessage("ucdclAuthentication:"+ucdclAuthentication,PROCESS_NAME,processID,SdpLoggerHelper.INFO);

SdpLoggerHelper.logMessage("ucdclTransportMWI:"+ucdclTransportMWI,PROCESS_NAME,processID,SdpLoggerHelper.INFO);

																															]]></wpc:javaCode>
                    </wpc:script>
                  </bpws:invoke>
                  <bpws:invoke name="UCDCLAddDevice" operation="addDevice" partnerLink="UcdclCompensableService_InterfacePartner" portType="ns18:UCDCLCompensableService_Interface" wpc:displayName="UCDCL Add Device" wpc:id="224">
                    <wpc:input>
                      <wpc:parameter name="order" variable="processBO"/>
                    </wpc:input>
                    <wpc:output>
                      <wpc:parameter name="transactionDetail" variable="Transaction_DetailPort"/>
                    </wpc:output>
                    <bpws:catch faultName="wpc:runtimeFailure" faultVariable="bpcFault" wpc:faultType="wpc:BPCStandardFaultType" wpc:id="915" wpc:variableId="225">
                      <bpws:invoke name="Handleruntimefailures2" operation="null" partnerLink="null" portType="wpc:null" wpc:displayName="handle runtime failures" wpc:id="407">
                        <wpc:script>
                          <wpc:javaCode><![CDATA[SdpErrorHelper.setErrDetInTransDet(Transaction_DetailPort,bpcFault,SdpErrorHelper.SEVERITY_FATAL);
SdpLoggerHelper.logMessage(SdpLoggerHelper.RUNTIME_FAILURE+"  UCDCL.AddDevice",PROCESS_NAME,processID,SdpLoggerHelper.FATAL);]]></wpc:javaCode>
                        </wpc:script>
                      </bpws:invoke>
                    </bpws:catch>
                    <bpws:catch faultName="ns18:serviceCallFault" faultVariable="scFault" wpc:faultType="java:ServiceCallFault" wpc:id="916" wpc:variableId="228">
                      <bpws:invoke name="SetErrorDetails2" operation="null" partnerLink="null" portType="wpc:null" wpc:displayName="Set Error Details" wpc:id="475">
                        <wpc:script>
                          <wpc:javaCode><![CDATA[Transaction_DetailPort.setBoolean(SdpHelper.ERRORINDICATOR,true);

new att.lightspeed.sdp.helper.TransactionDetail(Transaction_DetailPort).setSDPErrorMessage(scFault);

Transaction_DetailPort.getDataObject("errorDetails").getDataObject("Error").setString("Severity",SdpErrorHelper.SEVERITY_FATAL);

 
SdpLoggerHelper.logMessage(SdpLoggerHelper.FAULT_FAILURE +"  UCDCL.AddDevice",PROCESS_NAME,processID,SdpLoggerHelper.FATAL); 
 ]]></wpc:javaCode>
                        </wpc:script>
                      </bpws:invoke>
                    </bpws:catch>
                    <bpws:catchAll wpc:id="914">
                      <bpws:invoke name="Handleruntimefailures3" operation="null" partnerLink="null" portType="wpc:null" wpc:displayName="handle runtime failures" wpc:id="410">
                        <wpc:script>
                          <wpc:javaCode><![CDATA[SdpErrorHelper.setErrDetInTransDet(Transaction_DetailPort,null,SdpErrorHelper.SEVERITY_FATAL);
SdpLoggerHelper.logMessage(SdpLoggerHelper.FAULT_FAILURE +"  UCDCL.AddDevice",PROCESS_NAME,processID,SdpLoggerHelper.FATAL);]]></wpc:javaCode>
                        </wpc:script>
                      </bpws:invoke>
                    </bpws:catchAll>
                  </bpws:invoke>
                  <bpws:switch name="CheckUCDCLError1" wpc:displayName="Check UCDCL Error" wpc:id="232">
                    <bpws:case wpc:id="233">
                      <bpws:condition><![CDATA[boolean __result__1 = com.ibm.wbiservers.brules.core.codegen.NillableUtility.getBoolean(Transaction_DetailPort, "errorIndicator", "Transaction_DetailPort");
return __result__1;

//@generated:com.ibm.wbit.activity.ui
//<?xml version="1.0" encoding="UTF-8"?>
//<com.ibm.wbit.activity:CompositeActivity xmi:version="2.0" xmlns:xmi="http://www.omg.org/XMI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:com.ibm.wbit.activity="http:///com/ibm/wbit/activity.ecore" name="ActivityMethod">
//  <result name="Result">
//    <type xsi:type="com.ibm.wbit.activity:JavaElementType" name="boolean"/>
//  </result>
//  <exceptions>
//    <type xsi:type="com.ibm.wbit.activity:JavaElementType" name="com.ibm.bpe.api.ProcessException"/>
//  </exceptions>
//  <executableElements xsi:type="com.ibm.wbit.activity:Expression" value="Transaction_DetailPort.errorIndicator" field="true">
//    <dataOutputs target="//@executableElements.1"/>
//    <type xsi:type="com.ibm.wbit.activity:XSDElementType" name="boolean" namespace="http://www.w3.org/2001/XMLSchema" nillable="false"/>
//  </executableElements>
//  <executableElements xsi:type="com.ibm.wbit.activity:ReturnElement" dataInputs="//@executableElements.0/@dataOutputs.0"/>
//  <executableGroups executableElements="//@executableElements.0 //@executableElements.1"/>
//</com.ibm.wbit.activity:CompositeActivity>
//@generated:end
//!SMAP!*S WBIACTDBG
//!SMAP!*L
//!SMAP!1:1,1
//!SMAP!2:2,1
//!SMAP!1000000:26,1]]></bpws:condition>
                      <bpws:sequence name="HiddenSequence15" wpc:id="1073742613">
                        <bpws:invoke name="LogUCDCLAddDeviceError" operation="null" partnerLink="null" portType="wpc:null" wpc:displayName="Log - [UCDCL.AddDevice  - Error] " wpc:id="554">
                          <wpc:script>
                            <wpc:javaCode><![CDATA[String strSeverity =Transaction_DetailPort.getString("errorDetails/Error/Severity");
int logLevel = SdpHelper.getLogLevel(strSeverity);
SdpLoggerHelper.logMessage(" UCDCL.AddDevice- "+SdpLoggerHelper.ERROR_STR+"["+strSeverity+"]",PROCESS_NAME,processID,logLevel);]]></wpc:javaCode>
                          </wpc:script>
                        </bpws:invoke>
                        <bpws:assign name="PrepareGBOForLogging4" wpc:displayName="Prepare GBO For Logging" wpc:id="499">
                          <bpws:copy>
                            <bpws:from variable="Transaction_DetailPort">
                              <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/State]]></bpws:query>
                            </bpws:from>
                            <bpws:to variable="STATE"/>
                          </bpws:copy>
                          <bpws:copy>
                            <bpws:from variable="Transaction_DetailPort">
                              <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/errorDetails/Error/Severity]]></bpws:query>
                            </bpws:from>
                            <bpws:to variable="SEVERITY"/>
                          </bpws:copy>
                          <bpws:copy>
                            <bpws:from variable="Transaction_DetailPort">
                              <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/errorDetails/Error/Message]]></bpws:query>
                            </bpws:from>
                            <bpws:to variable="SDP_ERROR_OBJECT_MESSAGE"/>
                          </bpws:copy>
                          <bpws:copy>
                            <bpws:from variable="Transaction_DetailPort">
                              <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/errorDetails/Error/TargetSystem]]></bpws:query>
                            </bpws:from>
                            <bpws:to variable="TARGET_SYSTEM_NAME"/>
                          </bpws:copy>
                          <bpws:copy>
                            <bpws:from>true</bpws:from>
                            <bpws:to variable="MANUAL_INTERVENTION_FLAG"/>
                          </bpws:copy>
                          <bpws:copy>
                            <bpws:from variable="Transaction_DetailPort">
                              <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/currentTargetOperation]]></bpws:query>
                            </bpws:from>
                            <bpws:to variable="TARGET_OPERATION_NAME"/>
                          </bpws:copy>
                          <bpws:copy>
                            <bpws:from variable="Transaction_DetailPort">
                              <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/errorDetails/Error/Message]]></bpws:query>
                            </bpws:from>
                            <bpws:to variable="SDP_ORDER_RequestProc">
                              <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/transactionDetail/errorDetails/Error/Message]]></bpws:query>
                            </bpws:to>
                          </bpws:copy>
                        </bpws:assign>
                        <bpws:invoke name="LogCommonErrorLogger6" operation="null" partnerLink="null" portType="wpc:null" wpc:displayName="Log - [ CommonErrorLogger] " wpc:id="556">
                          <wpc:script>
                            <wpc:javaCode><![CDATA[SdpLoggerHelper.logMessage("Invoking CommonErrorLogger:",PROCESS_NAME,processID,SdpLoggerHelper.INFO);

SDP_ORDER_RequestProc.setString(SdpHelper.TEMPSTRING1_PATH.replace('.','/'),processID);	]]></wpc:javaCode>
                          </wpc:script>
                        </bpws:invoke>
                        <bpws:invoke name="InvokeLogError3" operation="logErrorDetails" partnerLink="FromSdp_CommonErrorLogger_Interface" portType="ns12:FromSdp_CommonErrorLogger_Interface" wpc:displayName="Invoke Log Error" wpc:id="493">
                          <wpc:input>
                            <wpc:parameter name="transactionState" variable="STATE"/>
                            <wpc:parameter name="targetOperation" variable="TARGET_OPERATION_NAME"/>
                            <wpc:parameter name="parentProcessName" variable="PARENT_PROCESS_NAME"/>
                            <wpc:parameter name="sdpOrder" variable="SDP_ORDER_RequestProc"/>
                            <wpc:parameter name="manualInterventionInd" variable="MANUAL_INTERVENTION_FLAG"/>
                            <wpc:parameter name="severity" variable="SEVERITY"/>
                            <wpc:parameter name="targetSystem" variable="TARGET_SYSTEM_NAME"/>
                            <wpc:parameter name="sdpErrorObjectMessage" variable="SDP_ERROR_OBJECT_MESSAGE"/>
                          </wpc:input>
                          <wpc:output>
                            <wpc:parameter name="response" variable="Transaction_Error"/>
                          </wpc:output>
                        </bpws:invoke>
                        <bpws:invoke name="LogCommonErrorLogger7" operation="null" partnerLink="null" portType="wpc:null" wpc:displayName="Log - [CommonErrorLogger ] " wpc:id="558">
                          <wpc:script>
                            <wpc:javaCode><![CDATA[SdpLoggerHelper.logMessage(" CommonErrorLogger",PROCESS_NAME,processID,SdpLoggerHelper.INFO);]]></wpc:javaCode>
                          </wpc:script>
                        </bpws:invoke>
                        <bpws:assign name="Copyproctotrigg3" wpc:displayName="copy proc to trigg" wpc:id="389">
                          <bpws:copy>
                            <bpws:from variable="SDP_ORDER_RequestProc"/>
                            <bpws:to variable="SDP_ORDER_Request"/>
                          </bpws:copy>
                          <bpws:copy>
                            <bpws:from variable="SDP_ORDER_ProvProc"/>
                            <bpws:to variable="SDP_ORDER_Prov"/>
                          </bpws:copy>
                        </bpws:assign>
                        <bpws:reply name="Reply2" operation="compensateUpdateMailBox" partnerLink="UpdateMailBox_Compensation_Interface" portType="ns11:UpdateMailBox_Compensation_Interface" wpc:displayName="Reply2" wpc:id="514">
                          <wpc:input>
                            <wpc:parameter name="SDP_ORDER_ProvPort" variable="SDP_ORDER_Prov"/>
                            <wpc:parameter name="Transaction_Detail" variable="Transaction_DetailPort"/>
                            <wpc:parameter name="SDP_ORDER_RequestPort" variable="SDP_ORDER_Request"/>
                          </wpc:input>
                        </bpws:reply>
                        <bpws:terminate name="Terminate3" wpc:displayName="Terminate3" wpc:id="503"/>
                      </bpws:sequence>
                    </bpws:case>
                  </bpws:switch>
                  <bpws:invoke name="LogUCDCLAddDeviceSuccess" operation="null" partnerLink="null" portType="wpc:null" wpc:displayName="Log - [UCDCL.AddDevice  -Success] " wpc:id="574">
                    <wpc:script>
                      <wpc:javaCode><![CDATA[SdpLoggerHelper.logMessage(" UCDCL.AddDevice -"+SdpLoggerHelper.SUCCESS_STR,PROCESS_NAME,processID,SdpLoggerHelper.INFO);]]></wpc:javaCode>
                    </wpc:script>
                  </bpws:invoke>
                  <bpws:invoke name="SetUMSessionIDUMMessageCenterIP3" operation="null" partnerLink="null" portType="wpc:null" wpc:continueOnError="inherit" wpc:displayName="Set UMSessionID &amp; UMMessageCenterIP" wpc:id="817">
                    <wpc:script>
                      <wpc:javaCode><![CDATA[att.lightspeed.sdp.helper.WpsLogger logger = att.lightspeed.sdp.helper.WpsLogger.getLogger(processInstance());
String UMSessionID = null;
String UMMessageCenterIP = null;

UMSessionID = Transaction_DetailPort.getString(SdpHelper.TRANSDETAIL_UMSESSIONID);
UMMessageCenterIP = Transaction_DetailPort.getString(SdpHelper.TRANSDETAIL_UMMESSAGECENTERIP);

logger.debug("UMSessionID from the addDevice Response: " + UMSessionID);
logger.debug("UMMessageCenterIP from the AddDevice Response: " + UMMessageCenterIP);

processBO.setString(SdpHelper.xPathify(SdpHelper.TRANSDETAIL_UMSESSIONID_PATH),UMSessionID);

processBO.setString(SdpHelper.xPathify(SdpHelper.TRANSDETAIL_UMMESSAGECENTERIP_PATH),UMMessageCenterIP);
]]></wpc:javaCode>
                    </wpc:script>
                  </bpws:invoke>
                  <bpws:assign name="PreInvokeAssigns14" wpc:displayName="Pre Invoke Assigns" wpc:id="820">
                    <bpws:copy>
                      <bpws:from><![CDATA[UCDCL.Logout.Request]]></bpws:from>
                      <bpws:to variable="Transaction_DetailPort">
                        <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/State]]></bpws:query>
                      </bpws:to>
                    </bpws:copy>
                    <bpws:copy>
                      <bpws:from>UCDCL</bpws:from>
                      <bpws:to variable="Transaction_DetailPort">
                        <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/errorDetails/Error/TargetSystem]]></bpws:query>
                      </bpws:to>
                    </bpws:copy>
                    <bpws:copy>
                      <bpws:from><![CDATA[Logout]]></bpws:from>
                      <bpws:to variable="Transaction_DetailPort">
                        <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/currentTargetOperation]]></bpws:query>
                      </bpws:to>
                    </bpws:copy>
                  </bpws:assign>
                  <bpws:invoke name="LogUCDCLLogout2" operation="null" partnerLink="null" portType="wpc:null" wpc:displayName="Log - [UCDCL.Logout]" wpc:id="821">
                    <wpc:script>
                      <wpc:javaCode><![CDATA[SdpLoggerHelper.logMessage(SdpLoggerHelper.INVOKE_STR +" : UCDCL.Logout",
	PROCESS_NAME,processID,SdpLoggerHelper.INFO);
]]></wpc:javaCode>
                    </wpc:script>
                  </bpws:invoke>
                  <bpws:invoke name="InvokeUCDCLLogout2" operation="provisioningServiceLogout" partnerLink="UcdclCompensableService_InterfacePartner" portType="ns18:UCDCLCompensableService_Interface" wpc:displayName="Invoke - [UCDCL.Logout]" wpc:id="822">
                    <wpc:input>
                      <wpc:parameter name="transactionDetail" variable="Transaction_DetailPort"/>
                    </wpc:input>
                    <wpc:output/>
                    <bpws:catch faultName="wpc:runtimeFailure" faultVariable="bpcFault" wpc:faultType="wpc:BPCStandardFaultType" wpc:id="909" wpc:variableId="824">
                      <bpws:invoke name="Handleruntimefailures" operation="null" partnerLink="null" portType="wpc:null" wpc:displayName="handle runtime failures" wpc:id="825">
                        <wpc:script>
                          <wpc:javaCode><![CDATA[SdpErrorHelper.setErrDetInTransDet(Transaction_DetailPort,bpcFault,SdpErrorHelper.SEVERITY_FATAL);

SdpLoggerHelper.logMessage(SdpLoggerHelper.RUNTIME_FAILURE+"  UCDCL.Logout",PROCESS_NAME,processID,SdpLoggerHelper.FATAL);]]></wpc:javaCode>
                        </wpc:script>
                      </bpws:invoke>
                    </bpws:catch>
                    <bpws:catch faultName="ns18:serviceCallFault" faultVariable="scFault" wpc:faultType="java:ServiceCallFault" wpc:id="910" wpc:variableId="826">
                      <bpws:invoke name="SetErrorDetails" operation="null" partnerLink="null" portType="wpc:null" wpc:displayName="Set Error Details" wpc:id="827">
                        <wpc:script>
                          <wpc:javaCode><![CDATA[Transaction_DetailPort.setBoolean(SdpHelper.ERRORINDICATOR,true);

new att.lightspeed.sdp.helper.TransactionDetail(Transaction_DetailPort).setSDPErrorMessage(scFault);

Transaction_DetailPort.getDataObject("errorDetails").getDataObject("Error").setString("Severity",SdpErrorHelper.SEVERITY_FATAL);

 
SdpLoggerHelper.logMessage(SdpLoggerHelper.FAULT_FAILURE +"  UCDCL.Logout",PROCESS_NAME,processID,SdpLoggerHelper.FATAL);
 ]]></wpc:javaCode>
                        </wpc:script>
                      </bpws:invoke>
                    </bpws:catch>
                    <bpws:catchAll wpc:id="908">
                      <bpws:invoke name="Handleruntimefailures1" operation="null" partnerLink="null" portType="wpc:null" wpc:displayName="handle runtime failures" wpc:id="823">
                        <wpc:script>
                          <wpc:javaCode><![CDATA[SdpErrorHelper.setErrDetInTransDet(Transaction_DetailPort,null,SdpErrorHelper.SEVERITY_FATAL);

SdpLoggerHelper.logMessage(SdpLoggerHelper.UNKNOWN_FAILURE+"  UCDCL.Logout",PROCESS_NAME,processID,SdpLoggerHelper.FATAL);]]></wpc:javaCode>
                        </wpc:script>
                      </bpws:invoke>
                    </bpws:catchAll>
                  </bpws:invoke>
                  <bpws:switch name="UCDCLError7" wpc:displayName="UCDCL Error?" wpc:id="828">
                    <bpws:case wpc:id="830">
                      <bpws:condition><![CDATA[boolean __result__1 = com.ibm.wbiservers.brules.core.codegen.NillableUtility.getBoolean(Transaction_DetailPort, "errorIndicator", "Transaction_DetailPort");
return __result__1;

//@generated:com.ibm.wbit.activity.ui
//<?xml version="1.0" encoding="UTF-8"?>
//<com.ibm.wbit.activity:CompositeActivity xmi:version="2.0" xmlns:xmi="http://www.omg.org/XMI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:com.ibm.wbit.activity="http:///com/ibm/wbit/activity.ecore" name="ActivityMethod">
//  <result name="Result">
//    <type xsi:type="com.ibm.wbit.activity:JavaElementType" name="boolean"/>
//  </result>
//  <exceptions>
//    <type xsi:type="com.ibm.wbit.activity:JavaElementType" name="com.ibm.bpe.api.ProcessException"/>
//  </exceptions>
//  <executableElements xsi:type="com.ibm.wbit.activity:Expression" value="Transaction_DetailPort.errorIndicator" field="true">
//    <dataOutputs target="//@executableElements.1"/>
//    <type xsi:type="com.ibm.wbit.activity:XSDElementType" name="boolean" namespace="http://www.w3.org/2001/XMLSchema" nillable="false"/>
//  </executableElements>
//  <executableElements xsi:type="com.ibm.wbit.activity:ReturnElement" dataInputs="//@executableElements.0/@dataOutputs.0"/>
//  <executableGroups executableElements="//@executableElements.0 //@executableElements.1"/>
//</com.ibm.wbit.activity:CompositeActivity>
//@generated:end
//!SMAP!*S WBIACTDBG
//!SMAP!*L
//!SMAP!1:1,1
//!SMAP!2:2,1
//!SMAP!1000000:26,1]]></bpws:condition>
                      <bpws:sequence name="HiddenSequence13" wpc:id="1073742655">
                        <bpws:invoke name="LogUCDCLLogoutError" operation="null" partnerLink="null" portType="wpc:null" wpc:displayName="Log - [UCDCL.Logout - Error]" wpc:id="832">
                          <wpc:script>
                            <wpc:javaCode><![CDATA[String strSeverity =Transaction_DetailPort.getString("errorDetails/Error/Severity");
int logLevel = SdpHelper.getLogLevel(strSeverity);
SdpLoggerHelper.logMessage(" UCDCL.Logout- "+SdpLoggerHelper.ERROR_STR+"["+strSeverity+"]",PROCESS_NAME,processID,logLevel);]]></wpc:javaCode>
                          </wpc:script>
                        </bpws:invoke>
                        <bpws:assign name="PrepareGBOForLogging3" wpc:displayName="Prepare GBO For Logging" wpc:id="833">
                          <bpws:copy>
                            <bpws:from variable="Transaction_DetailPort">
                              <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/State]]></bpws:query>
                            </bpws:from>
                            <bpws:to variable="STATE"/>
                          </bpws:copy>
                          <bpws:copy>
                            <bpws:from variable="Transaction_DetailPort">
                              <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/errorDetails/Error/Severity]]></bpws:query>
                            </bpws:from>
                            <bpws:to variable="SEVERITY"/>
                          </bpws:copy>
                          <bpws:copy>
                            <bpws:from variable="Transaction_DetailPort">
                              <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/errorDetails/Error/Message]]></bpws:query>
                            </bpws:from>
                            <bpws:to variable="SDP_ERROR_OBJECT_MESSAGE"/>
                          </bpws:copy>
                          <bpws:copy>
                            <bpws:from variable="Transaction_DetailPort">
                              <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/errorDetails/Error/TargetSystem]]></bpws:query>
                            </bpws:from>
                            <bpws:to variable="TARGET_SYSTEM_NAME"/>
                          </bpws:copy>
                          <bpws:copy>
                            <bpws:from>true</bpws:from>
                            <bpws:to variable="MANUAL_INTERVENTION_FLAG"/>
                          </bpws:copy>
                          <bpws:copy>
                            <bpws:from variable="Transaction_DetailPort">
                              <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/currentTargetOperation]]></bpws:query>
                            </bpws:from>
                            <bpws:to variable="TARGET_OPERATION_NAME"/>
                          </bpws:copy>
                          <bpws:copy>
                            <bpws:from variable="Transaction_DetailPort">
                              <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/errorDetails/Error/Message]]></bpws:query>
                            </bpws:from>
                            <bpws:to variable="SDP_ORDER_RequestProc">
                              <bpws:query queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116"><![CDATA[/transactionDetail/errorDetails/Error/Message]]></bpws:query>
                            </bpws:to>
                          </bpws:copy>
                        </bpws:assign>
                        <bpws:invoke name="LogCommonErrorLogger4" operation="null" partnerLink="null" portType="wpc:null" wpc:displayName="Log - [CommonErrorLogger ] " wpc:id="834">
                          <wpc:script>
                            <wpc:javaCode><![CDATA[SdpLoggerHelper.logMessage("Invoking CommonErrorLogger:",PROCESS_NAME,processID,SdpLoggerHelper.INFO);

SDP_ORDER_RequestProc.setString(SdpHelper.TEMPSTRING1_PATH.replace('.','/'),processID);	
										
																		]]></wpc:javaCode>
                          </wpc:script>
                        </bpws:invoke>
                        <bpws:invoke name="InvokeLogError2" operation="logErrorDetails" partnerLink="FromSdp_CommonErrorLogger_Interface" portType="ns12:FromSdp_CommonErrorLogger_Interface" wpc:displayName="Invoke Log Error" wpc:id="835">
                          <wpc:input>
                            <wpc:parameter name="transactionState" variable="STATE"/>
                            <wpc:parameter name="targetOperation" variable="TARGET_OPERATION_NAME"/>
                            <wpc:parameter name="parentProcessName" variable="PARENT_PROCESS_NAME"/>
                            <wpc:parameter name="sdpOrder" variable="SDP_ORDER_RequestProc"/>
                            <wpc:parameter name="manualInterventionInd" variable="MANUAL_INTERVENTION_FLAG"/>
                            <wpc:parameter name="severity" variable="SEVERITY"/>
                            <wpc:parameter name="targetSystem" variable="TARGET_SYSTEM_NAME"/>
                            <wpc:parameter name="sdpErrorObjectMessage" variable="SDP_ERROR_OBJECT_MESSAGE"/>
                          </wpc:input>
                          <wpc:output>
                            <wpc:parameter name="response" variable="Transaction_Error"/>
                          </wpc:output>
                        </bpws:invoke>
                        <bpws:invoke name="LogCommonErrorLogger5" operation="null" partnerLink="null" portType="wpc:null" wpc:displayName="Log - [CommonErrorLogger ] " wpc:id="836">
                          <wpc:script>
                            <wpc:javaCode><![CDATA[SdpLoggerHelper.logMessage(" CommonErrorLogger",PROCESS_NAME,processID,SdpLoggerHelper.INFO);]]></wpc:javaCode>
                          </wpc:script>
                        </bpws:invoke>
                        <bpws:assign name="Copyproctotrigg4" wpc:displayName="copy proc to trigg" wpc:id="837">
                          <bpws:copy>
                            <bpws:from variable="SDP_ORDER_RequestProc"/>
                            <bpws:to variable="SDP_ORDER_Request"/>
                          </bpws:copy>
                          <bpws:copy>
                            <bpws:from variable="SDP_ORDER_ProvProc"/>
                            <bpws:to variable="SDP_ORDER_Prov"/>
                          </bpws:copy>
                        </bpws:assign>
                        <bpws:reply name="Reply4" operation="compensateUpdateMailBox" partnerLink="UpdateMailBox_Compensation_Interface" portType="ns11:UpdateMailBox_Compensation_Interface" wpc:displayName="Reply" wpc:id="838">
                          <wpc:input>
                            <wpc:parameter name="SDP_ORDER_ProvPort" variable="SDP_ORDER_Prov"/>
                            <wpc:parameter name="Transaction_Detail" variable="Transaction_DetailPort"/>
                            <wpc:parameter name="SDP_ORDER_RequestPort" variable="SDP_ORDER_Request"/>
                          </wpc:input>
                        </bpws:reply>
                        <bpws:terminate name="Terminate4" wpc:displayName="Terminate" wpc:id="839"/>
                      </bpws:sequence>
                    </bpws:case>
                    <bpws:otherwise wpc:id="917">
                      <bpws:invoke name="LogUCDCLLogoutSuccess" operation="null" partnerLink="null" portType="wpc:null" wpc:displayName="Log - [UCDCL.Logout -Success] " wpc:id="829">
                        <wpc:script>
                          <wpc:javaCode><![CDATA[SdpLoggerHelper.logMessage("UCDCL.Logout -"+SdpLoggerHelper.SUCCESS_STR,PROCESS_NAME,processID,SdpLoggerHelper.INFO);]]></wpc:javaCode>
                        </wpc:script>
                      </bpws:invoke>
                    </bpws:otherwise>
                  </bpws:switch>
                </bpws:sequence>
              </bpws:case>
            </bpws:switch>
            <bpws:invoke name="Decrementcounter" operation="null" partnerLink="null" portType="wpc:null" wpc:displayName="decrement  counter" wpc:id="519">
              <wpc:script>
                <wpc:javaCode><![CDATA[java.lang.Integer __result__1 = new java.lang.Integer(com.ibm.wbiservers.brules.core.codegen.NillableUtility.getInt(intReqTNCounter, "intReqTNCounter") - 1);
intReqTNCounter = __result__1;

//@generated:com.ibm.wbit.activity.ui
//<?xml version="1.0" encoding="UTF-8"?>
//<com.ibm.wbit.activity:CompositeActivity xmi:version="2.0" xmlns:xmi="http://www.omg.org/XMI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:com.ibm.wbit.activity="http:///com/ibm/wbit/activity.ecore" name="ActivityMethod">
//  <exceptions>
//    <type xsi:type="com.ibm.wbit.activity:JavaElementType" name="com.ibm.bpe.api.ProcessException"/>
//  </exceptions>
//  <executableElements xsi:type="com.ibm.wbit.activity:Expression" value="intReqTNCounter-1" assignable="false">
//    <dataOutputs target="//@executableElements.1"/>
//    <type xsi:type="com.ibm.wbit.activity:XSDElementType" name="int" namespace="http://www.w3.org/2001/XMLSchema"/>
//  </executableElements>
//  <executableElements xsi:type="com.ibm.wbit.activity:Expression" dataInputs="//@executableElements.0/@dataOutputs.0" value="intReqTNCounter" variable="true">
//    <type xsi:type="com.ibm.wbit.activity:XSDElementType" name="int" namespace="http://www.w3.org/2001/XMLSchema"/>
//  </executableElements>
//  <executableGroups executableElements="//@executableElements.0 //@executableElements.1"/>
//</com.ibm.wbit.activity:CompositeActivity>
//@generated:end
//!SMAP!*S WBIACTDBG
//!SMAP!*L
//!SMAP!1:1,1
//!SMAP!2:2,1
//!SMAP!1000000:25,1]]></wpc:javaCode>
              </wpc:script>
            </bpws:invoke>
          </bpws:sequence>
        </bpws:while>
        <bpws:invoke name="DecrementReqMailBoxCounter" operation="null" partnerLink="null" portType="wpc:null" wpc:displayName="Decrement Req MailBox Counter" wpc:id="280">
          <wpc:script>
            <wpc:javaCode><![CDATA[java.lang.Integer __result__1 = new java.lang.Integer(com.ibm.wbiservers.brules.core.codegen.NillableUtility.getInt(intReqSubMBoxCounter, "intReqSubMBoxCounter") - 1);
intReqSubMBoxCounter = __result__1;

//@generated:com.ibm.wbit.activity.ui
//<?xml version="1.0" encoding="UTF-8"?>
//<com.ibm.wbit.activity:CompositeActivity xmi:version="2.0" xmlns:xmi="http://www.omg.org/XMI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:com.ibm.wbit.activity="http:///com/ibm/wbit/activity.ecore" name="ActivityMethod">
//  <exceptions>
//    <type xsi:type="com.ibm.wbit.activity:JavaElementType" name="com.ibm.bpe.api.ProcessException"/>
//  </exceptions>
//  <executableElements xsi:type="com.ibm.wbit.activity:Expression" value="intReqSubMBoxCounter-1" assignable="false">
//    <dataOutputs target="//@executableElements.1"/>
//    <type xsi:type="com.ibm.wbit.activity:XSDElementType" name="int" namespace="http://www.w3.org/2001/XMLSchema"/>
//  </executableElements>
//  <executableElements xsi:type="com.ibm.wbit.activity:Expression" dataInputs="//@executableElements.0/@dataOutputs.0" value="intReqSubMBoxCounter" variable="true">
//    <type xsi:type="com.ibm.wbit.activity:XSDElementType" name="int" namespace="http://www.w3.org/2001/XMLSchema"/>
//  </executableElements>
//  <executableGroups executableElements="//@executableElements.0 //@executableElements.1"/>
//</com.ibm.wbit.activity:CompositeActivity>
//@generated:end
//!SMAP!*S WBIACTDBG
//!SMAP!*L
//!SMAP!1:1,1
//!SMAP!2:2,1
//!SMAP!1000000:25,1]]></wpc:javaCode>
          </wpc:script>
        </bpws:invoke>
      </bpws:sequence>
    </bpws:while>
    <bpws:assign name="Copyproctotrigg" wpc:displayName="copy proc to trigg" wpc:id="383">
      <bpws:copy>
        <bpws:from variable="SDP_ORDER_RequestProc"/>
        <bpws:to variable="SDP_ORDER_Request"/>
      </bpws:copy>
      <bpws:copy>
        <bpws:from variable="SDP_ORDER_ProvProc"/>
        <bpws:to variable="SDP_ORDER_Prov"/>
      </bpws:copy>
    </bpws:assign>
    <bpws:invoke name="LogEndProcess" operation="null" partnerLink="null" portType="wpc:null" wpc:displayName="Log - [End Process ]  " wpc:id="560">
      <wpc:script>
        <wpc:javaCode><![CDATA[
SdpLoggerHelper.logMessage("Returning the following GBO To MAM ",PROCESS_NAME,processID,SdpLoggerHelper.INFO);

SdpLoggerHelper.logMessage("Transaction_DetailPort : ",PROCESS_NAME,processID,SdpLoggerHelper.INFO);

SdpLoggerHelper.logBO(Transaction_DetailPort,PROCESS_NAME,processID,SdpLoggerHelper.INFO);

SdpLoggerHelper.logMessage("SDP_ORDER_Request : ",PROCESS_NAME,processID,SdpLoggerHelper.INFO);

SdpLoggerHelper.logBO(SDP_ORDER_Request,PROCESS_NAME,processID,SdpLoggerHelper.INFO);

SdpLoggerHelper.logMessage("SDP_ORDER_Prov : ",PROCESS_NAME,processID,SdpLoggerHelper.INFO);

SdpLoggerHelper.logBO(SDP_ORDER_Prov,PROCESS_NAME,processID,SdpLoggerHelper.INFO);

SdpLoggerHelper.logMessage("End SubFlow: UpdateMailBoxCompensation",PROCESS_NAME,processID,SdpLoggerHelper.INFO);]]></wpc:javaCode>
      </wpc:script>
    </bpws:invoke>
    <bpws:reply name="Reply3" operation="compensateUpdateMailBox" partnerLink="UpdateMailBox_Compensation_Interface" portType="ns11:UpdateMailBox_Compensation_Interface" wpc:displayName="Reply3" wpc:id="515">
      <wpc:input>
        <wpc:parameter name="SDP_ORDER_ProvPort" variable="SDP_ORDER_Prov"/>
        <wpc:parameter name="Transaction_Detail" variable="Transaction_DetailPort"/>
        <wpc:parameter name="SDP_ORDER_RequestPort" variable="SDP_ORDER_Request"/>
      </wpc:input>
    </bpws:reply>
  </bpws:sequence>
</bpws:process>